<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[æµ…æVue3æ•°æ®å“åº”ç³»ç»Ÿ]]></title>
    <url>%2F2019%2F10%2F11%2Fabout-vue3-proxy%2F</url>
    <content type="text"><![CDATA[å›½åº†é•¿å‡è¿˜æ²¡ç»“æŸï¼Œå°¤å¤§å¤§å°±æŠŠVue3æºç ç»™æ”¾äº†å‡ºæ¥ï¼Œè¿˜èƒ½ä¸èƒ½å¥½å¥½è®©äººå¥½å¥½æ”¾ä¸ªå‡ğŸ˜¨ï¼Œç›®å‰çš„ç‰ˆæœ¬è¿˜æ˜¯ Pre-Alphaï¼Œæºç åœ°å€ï¼šVue-nextï¼Œ è€Œæ­£å¼ç‰ˆæœ¬å¯èƒ½è¦æ˜å¹´æ‰å‘å¸ƒäº†ï¼Œäºæ˜¯æ”¾å‡å›æ¥ï¼Œä¾¿ç¬¬ä¸€æ—¶é—´cloneäº†æºç ï¼Œç”Ÿå•ƒäº†èµ·æ¥ï¼Œè¿˜åˆ«è¯´ï¼ŒçœŸé¦™~~~ğŸ˜‚ æºç æ•´ä½“ç»“æ„è¿˜æ˜¯æ¯”è¾ƒæ¸…æ™°ï¼Œç›¸æ¯”è¾ƒäºVue2.xåšäº†æ¯”è¾ƒå¤§çš„è°ƒæ•´ï¼Œä»£ç è¯è¯´98%éƒ½æ˜¯ç”¨tsç¼–å†™ï¼Œæ‰€ä»¥çœ‹æºç è¿˜éœ€è¦å¤§æ¦‚äº†è§£tsçš„ä¸€äº›çŸ¥è¯†ã€‚è€Œåœ¨è¿˜æ²¡å‘å¸ƒVue3æºç ä¹‹å‰ï¼Œå®˜ç½‘ä¹Ÿå·²ç»ç»™å‡ºäº† Vue Composition API RFCï¼Œå¯ä»¥åˆæ­¥äº†è§£Vue3çš„ä¸€äº›å†™æ³•å’Œç‰¹æ€§ï¼Œè¿™ä¸¤å¤©èŠ±äº†äº›æ—¶é—´å¤§æ¦‚çœ‹äº†ä¸‹æ•°æ®å“åº”éƒ¨åˆ†ï¼ˆç½‘ä¸Šå·²ç»æœ‰å¤§ä½¬ç»™å‡ºäº†è°ƒè¯•æŠ€å·§ï¼‰ ç†Ÿæ‚‰Vue2.xçš„ç«¥é‹åº”è¯¥çŸ¥é“ï¼Œå…¶æ•°æ®å“åº”æ˜¯åŸºäº ES5 çš„API Object.defineProperty æ¥æ“ä½œå±æ€§çš„ getter/setter å®ç°çš„ï¼Œæœ¬èº«APIå­˜åœ¨ä¸€äº›ä¸è¶³ï¼šæ¯”å¦‚å¯¹äºæ•°ç»„ï¼Œä¸èƒ½é€šè¿‡æ•°ç»„ä¸‹æ ‡æ¥è§‚æµ‹å…¶å˜åŒ–ï¼Œä¹Ÿä¸èƒ½è§‚æµ‹æ•°ç»„é•¿åº¦lengthçš„å˜åŒ–ï¼Œä¸ºæ­¤å¯¹æ•°ç»„7ä¸ªåŸç”Ÿæ–¹æ³•åšäº†æ‹¦æˆªå¤„ç†å®ç°å¯¹æ•°ç»„çš„è§‚æµ‹ã€‚å¯¹äºå¯¹è±¡ï¼Œç”±äºdefinePropertyçš„å±€é™æ€§ï¼ŒVue2ä¸èƒ½æ£€æµ‹å¯¹è±¡å±æ€§çš„æ·»åŠ æˆ–åˆ é™¤ã€‚ ä¸ºäº†ä¼˜åŒ–è§£å†³è¿™äº›ä¸è¶³ï¼Œæ›´å¥½çš„å®ç°æ–¹å¼æ˜¯é€šè¿‡ ES6 æä¾›çš„ Proxy å¯¹è±¡ã€‚ Vue3å°±æ˜¯åŸºäº Proxy å¯¹å…¶æ•°æ®å“åº”ç³»ç»Ÿè¿›è¡Œäº†é‡å†™ï¼Œç°åœ¨è¿™éƒ¨åˆ†å¯ä»¥ä½œä¸ºç‹¬ç«‹çš„æ¨¡å—é…åˆå…¶ä»–æ¡†æ¶ä½¿ç”¨ã€‚æ•°æ®å“åº”å¯åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼šåˆå§‹åŒ–é˜¶æ®µ --&gt; ä¾èµ–æ”¶é›†é˜¶æ®µ --&gt; æ•°æ®å“åº”é˜¶æ®µ Proxyä»£ç†é¡»çŸ¥ ç”¨ Proxy åšä»£ç†æ—¶ï¼Œæˆ‘ä»¬éœ€è¦äº†è§£å‡ ä¸ªé—®é¢˜ï¼š 1ã€Proxy ä»£ç†æ˜¯å¦‚ä½•å¯¹å…¶ trap è¿›è¡Œå¤„ç†æ¥å®ç°æ•°æ®å“åº”çš„ï¼Ÿä¹Ÿå°±æ˜¯å…¶ get/set é‡Œé¢æ˜¯å¦‚ä½•åšæ‹¦æˆªå¤„ç†ï¼ˆå…¶å®è¿™é‡Œçš„trapé»˜è®¤è¡Œä¸ºå¯ä»¥é€šè¿‡ Reflect æ¥è¿”å›ï¼ŒReflect å¯¹è±¡çš„æ–¹æ³•ä¸ Proxy å¯¹è±¡çš„æ–¹æ³•ä¸€ä¸€å¯¹åº”ï¼Œåªè¦æ˜¯ Proxy å¯¹è±¡çš„æ–¹æ³•ï¼Œå°±èƒ½åœ¨ Reflect å¯¹è±¡ä¸Šæ‰¾åˆ°å¯¹åº”çš„æ–¹æ³•ã€‚è¿™å°±è®© Proxy å¯¹è±¡å¯ä»¥æ–¹ä¾¿åœ°è°ƒç”¨å¯¹åº”çš„ Reflect æ–¹æ³•ï¼Œå®Œæˆé»˜è®¤è¡Œä¸ºï¼Œä½œä¸ºä¿®æ”¹è¡Œä¸ºçš„åŸºç¡€ã€‚è¿™é‡Œå…·ä½“å¯ä»¥æŸ¥çœ‹é˜®å¤§ç¥çš„ES6å…¥é—¨ï¼‰ 2ã€Proxy ä»£ç†çš„å¯¹è±¡åªèƒ½ä»£ç†åˆ°ç¬¬ä¸€å±‚ï¼Œå½“ä»£ç†çš„å¯¹è±¡å¤šå±‚åµŒå¥—æ—¶ï¼Œé‚£ä¹ˆå¯¹è±¡å†…éƒ¨çš„æ·±åº¦ç›‘æµ‹éœ€è¦å¦‚ä½•å»å®ç°ï¼Ÿ 3ã€å½“ä»£ç†å¯¹è±¡æ˜¯æ•°ç»„æ—¶ï¼Œæ¯”å¦‚pushæ“ä½œä¼šè§¦å‘å¤šæ¬¡ get/setï¼Œå› ä¸ºpushæ“ä½œé™¤äº†å¢åŠ æ•°ç»„çš„æ•°æ®é¡¹ä¹‹å¤–ï¼Œä¹Ÿä¼šå¼•å‘æ•°ç»„æœ¬èº«å…¶ä»–ç›¸å…³å±æ€§çš„æ”¹å˜ï¼Œå› æ­¤ä¼šå¤šæ¬¡è§¦å‘ get/set ï¼Œé‚£ä¹ˆè¦å¦‚ä½•è§£å†³å‘¢ï¼Ÿ ä¸‹é¢æˆ‘ä»¬ä¼šç¨å¾®åˆ†æä¸‹Vue3é’ˆå¯¹è¿™å‡ ä¸ªé—®é¢˜åšäº†å“ªäº›ä¼˜åŒ–å¤„ç†ã€‚ åˆå§‹åŒ–é˜¶æ®µ åˆå§‹åŒ–è¿‡ç¨‹ç›¸å¯¹æ¯”è¾ƒç®€å•ï¼Œé€šè¿‡ reactive() æ–¹æ³•å°†æ•°æ®è½¬åŒ–æˆ Proxy å¯¹è±¡ï¼Œè¿™é‡Œæ³¨æ„ä¸€ä¸ªæ¯”è¾ƒé‡è¦çš„å¯¹è±¡ targetMapï¼Œå®ƒåœ¨ä¾èµ–æ”¶é›†é˜¶æ®µèµ·ç€æ¯”è¾ƒé‡è¦çš„ä½œç”¨ï¼Œå…·ä½“ä¸‹é¢ä¼šæœ‰åˆ†æã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758export function reactive(target: object) &#123; // if trying to observe a readonly proxy, return the readonly version. if (readonlyToRaw.has(target)) &#123; return target &#125; // target is explicitly marked as readonly by user if (readonlyValues.has(target)) &#123; return readonly(target) &#125; return createReactiveObject( target, rawToReactive, reactiveToRaw, mutableHandlers, mutableCollectionHandlers )&#125;...// åˆ›å»ºproxyå¯¹è±¡function createReactiveObject( target: any, toProxy: WeakMap&lt;any, any&gt;, toRaw: WeakMap&lt;any, any&gt;, baseHandlers: ProxyHandler&lt;any&gt;, collectionHandlers: ProxyHandler&lt;any&gt;) &#123; if (!isObject(target)) &#123; if (__DEV__) &#123; console.warn(`value cannot be made reactive: $&#123;String(target)&#125;`) &#125; return target &#125; // target already has corresponding Proxy let observed = toProxy.get(target) if (observed !== void 0) &#123; return observed &#125; // target is already a Proxy if (toRaw.has(target)) &#123; return target &#125; // only a whitelist of value types can be observed. if (!canObserve(target)) &#123; return target &#125; const handlers = collectionTypes.has(target.constructor) ? collectionHandlers : baseHandlers observed = new Proxy(target, handlers) toProxy.set(target, observed) toRaw.set(observed, target) if (!targetMap.has(target)) &#123; targetMap.set(target, new Map()) &#125; return observed&#125; Vue3å¦‚ä½•è¿›è¡Œæ·±åº¦è§‚æµ‹çš„ï¼Ÿå…ˆçœ‹ä¸‹é¢è¿™æ®µä»£ç  1234567891011121314151617let data = &#123; x: &#123;y: &#123;z: 1 &#125; &#125; &#125;let p = new Proxy(data, &#123; get(target, key, receiver) &#123; const res = Reflect.get(target, key, receiver) console.log('get value:', key) console.log(res) return res &#125;, set(target, key, value, receiver) &#123; console.log('set value:', key, value) return Reflect.set(target, key, value, receiver) &#125;&#125;)p.x.y = 2// get value: x// &#123;y: 2&#125; ä¸Šé¢ä»£ç æˆ‘ä»¬å¯ä»¥çŸ¥é“ Proxy åªä¼šä»£ç†ä¸€å±‚ï¼Œå› ä¸ºè¿™é‡Œåªæ˜¯è§¦å‘äº†ä¸€æ¬¡æœ€å¤–å±‚å±æ€§ x çš„ getï¼Œè€Œé‡æ–°èµ‹å€¼çš„å…¶å†…éƒ¨å±æ€§ yï¼Œæ­¤æ—¶ set å¹¶æ²¡æœ‰è¢«è§¦å‘ï¼Œæ‰€ä»¥æ”¹å˜å†…éƒ¨å±æ€§æ˜¯ä¸ä¼šç›‘æµ‹åˆ°çš„ã€‚ç»§ç»­çœ‹ï¼ŒReflect.getè¿”å›çš„ç»“æœæ­£æ˜¯ target çš„å†…å±‚ç»“æ„ï¼Œæ­¤æ—¶p.x.yçš„å€¼ä¹Ÿå·²ç»å˜æˆ2äº†ï¼Œæˆ‘ä»¬å¯ä»¥åˆ¤æ–­å½“å‰ Reflect.get è¿”å›çš„å€¼æ˜¯å¦ä¸ºobjectï¼Œè‹¥æ˜¯åˆ™å†é€šè¿‡ reactive åšä»£ç†ï¼Œè¿™æ ·å°±è¾¾åˆ°äº†æ·±åº¦è§‚æµ‹çš„ç›®çš„äº†ã€‚ Vue3å®ç°è¿‡ç¨‹å…·ä½“æˆ‘ä»¬å¯ä»¥çœ‹ä¸‹é¢æºç ï¼š 1234567891011121314151617181920function createGetter(isReadonly: boolean) &#123; return function get(target: any, key: string | symbol, receiver: any) &#123; const res = Reflect.get(target, key, receiver) if (typeof key === 'symbol' &amp;&amp; builtInSymbols.has(key)) &#123; return res &#125; if (isRef(res)) &#123; return res.value &#125; track(target, OperationTypes.GET, key) // å½“ä»£ç†çš„å¯¹è±¡æ˜¯å¤šå±‚ç»“æ„æ—¶ï¼ŒReflect.getä¼šè¿”å›å¯¹è±¡çš„å†…å±‚ç»“æ„ï¼Œæˆ‘ä»¬å¯ä»¥æ‹¿åˆ°å½“å‰reså†åšåˆ¤æ–­æ˜¯å¦ä¸ºobjectï¼Œè¿›è€Œè¿›è¡Œreactiveï¼Œå°±è¾¾åˆ°äº†æ·±åº¦è§‚æµ‹çš„ç›®çš„äº† return isObject(res) ? isReadonly ? // need to lazy access readonly and reactive here to avoid // circular dependency readonly(res) : reactive(res) : res &#125;&#125; ä¾èµ–æ”¶é›†é˜¶æ®µ æ‰€è°“çš„ä¾èµ–åœ¨Vue3å¯ç®€å•ç†è§£ä¸ºå„ç§ effect å“åº”å¼å‡½æ•°ï¼Œå…¶ä¸­åŒ…æ‹¬äº†å±æ€§ä¾èµ–çš„effectï¼Œè®¡ç®—å±æ€§ computedEffect ä»¥åŠç»„ä»¶è§†å›¾çš„ componentEffect 1ã€åœ¨è§†å›¾æŒ‚è½½æ¸²æŸ“æ—¶ä¼šæ‰§è¡Œä¸€ä¸ª componentEffectï¼Œè§¦å‘ç›¸å…³æ•°æ®å±æ€§getteræ“ä½œæ¥å®Œæˆè§†å›¾ä¾èµ–æ”¶é›†ã€‚ 2ã€effectå‡½æ•°æ‰§è¡Œä¹Ÿä¼šè§¦å‘ç›¸å…³å±æ€§çš„getteræ“ä½œï¼Œæ­¤æ—¶æ“ä½œäº†æŸä¸ªå±æ€§çš„effectä¹Ÿä¼šè¢«è¯¥å±æ€§å¯¹åº”è¿›è¡Œæ”¶é›†ï¼ˆæ³¨æ„è¿™é‡Œçš„å±æ€§æ˜¯å¯è§‚æµ‹çš„ï¼‰ã€‚ ä¹‹æ‰€ä»¥è¯´æ˜¯å“åº”å¼çš„ï¼Œæ˜¯å› ä¸ºeffectæ–¹æ³•å›è°ƒä¸­å…³è”äº†è¢«è§‚æµ‹çš„æ•°æ®å±æ€§ï¼Œè€Œeffectä¸€èˆ¬æ˜¯ç«‹å³æ‰§è¡Œçš„ï¼Œæ­¤æ—¶è§¦å‘äº†è¯¥å±æ€§çš„ getterï¼Œè¿›è¡Œä¾èµ–æ”¶é›†ï¼Œå½“è¯¥å±æ€§è§¦å‘ setter æ—¶ï¼Œä¾¿ä¼šè§¦å‘æ‰§è¡Œæ”¶é›†çš„ä¾èµ–ã€‚å¦å¤–ï¼Œè¿™é‡Œæ¯æ¬¡effectæ‰§è¡Œæ—¶ï¼Œå½“å‰çš„effectä¼šè¢«å‹å…¥ä¸€ä¸ªåä¸º activeReactiveEffectStack çš„æ ˆä¸­ï¼Œæ˜¯åœ¨ä¾èµ–æ”¶é›†çš„æ—¶å€™ä½¿ç”¨ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152export function effect( fn: Function, options: ReactiveEffectOptions = EMPTY_OBJ): ReactiveEffect &#123; if ((fn as ReactiveEffect).isEffect) &#123; fn = (fn as ReactiveEffect).raw &#125; const effect = createReactiveEffect(fn, options) if (!options.lazy) &#123; // effectç«‹å³æ‰§è¡Œï¼Œè§¦å‘effectå›è°ƒå‡½æ•°fnä¸­ç›¸å…³å“åº”æ•°æ®å±æ€§çš„getteræ“ä½œï¼Œä»è€Œè¿›è¡Œä¾èµ–æ”¶é›† effect() &#125; return effect&#125;...// è§¦å‘getteræ“ä½œï¼Œè¿›è¡Œä¾èµ–æ”¶é›†export function track( target: any, type: OperationTypes, key?: string | symbol) &#123; if (!shouldTrack) &#123; return &#125; const effect = activeReactiveEffectStack[activeReactiveEffectStack.length - 1] if (effect) &#123; if (type === OperationTypes.ITERATE) &#123; key = ITERATE_KEY &#125; let depsMap = targetMap.get(target) if (depsMap === void 0) &#123; targetMap.set(target, (depsMap = new Map())) &#125; let dep = depsMap.get(key!) if (dep === void 0) &#123; depsMap.set(key!, (dep = new Set())) &#125; // é˜²æ­¢ä¾èµ–é‡å¤æ”¶é›† if (!dep.has(effect)) &#123; dep.add(effect) effect.deps.push(dep) if (__DEV__ &amp;&amp; effect.onTrack) &#123; effect.onTrack(&#123; effect, target, type, key &#125;) &#125; &#125; &#125;&#125; å¼€å¤´è¯´è¿‡ targetMap å¯¹è±¡åœ¨ä¾èµ–æ”¶é›†è¿‡ç¨‹ä¸­çš„é‡è¦ä½œç”¨ï¼Œçœ‹æºç æˆ‘ä»¬å¤§æ¦‚çŸ¥é“äº†ï¼Œå®ƒç»´æŠ¤äº†ä¸€ä¸ªä¾èµ–æ”¶é›†çš„å…³ç³»è¡¨ï¼ŒtargetMap æ˜¯ä¸€ä¸ª WeakMapï¼Œå…¶ key å€¼æ˜¯å½“å‰è¢«ä»£ç†çš„å¯¹è±¡ targetï¼Œè€Œ value åˆ™æ˜¯è¯¥å¯¹è±¡æ‰€å¯¹åº”çš„ depsMapï¼Œå®ƒæ˜¯ä¸€ä¸ª Mapï¼Œkey å€¼ä¸ºè§¦å‘ getter æ—¶çš„å±æ€§å€¼ï¼Œè€Œ value å€¼åˆ™æ˜¯è§¦å‘è¿‡è¯¥å±æ€§å€¼æ‰€å¯¹åº”çš„å„ä¸ª effectã€‚ æ•… targetMap çš„å…³ç³»æ˜ å°„å¯ä»¥çœ‹æˆ target --&gt; key --&gt; effectï¼Œå¯ä»¥çœ‹å‡º target è¢«è§‚æµ‹åï¼Œå…¶å±æ€§ key åœ¨è¢«è§¦å‘ getter æ“ä½œæ—¶ï¼Œæ”¶é›†äº†æ‰€ä¾èµ–çš„ effectï¼Œå¯ä»¥è¯´ targetMap æ˜¯Vue3è¿›è¡Œä¾èµ–æ”¶é›†çš„ä¸€ä¸ªæ ¸å¿ƒå¯¹è±¡ã€‚ å“åº”é˜¶æ®µ å½“è§¦å‘å±æ€§ setter æ—¶ï¼Œé€šè¿‡ trigger å‡½æ•°ä¼šæ‰§è¡Œå±æ€§å¯¹åº”æ”¶é›†çš„ effectsï¼Œä¹ŸåŒ…æ‹¬ computedEffectsï¼Œæ­¤æ—¶é€šè¿‡ scheduleRun é€ä¸ªè°ƒç”¨ effectï¼Œæœ€åå®Œæˆè§†å›¾æ›´æ–°ã€‚ ä¸Šé¢æˆ‘ä»¬è®²è¿‡ç›‘æµ‹æ•°ç»„çš„æ—¶å€™å¯èƒ½è§¦å‘å¤šæ¬¡ get/set, é‚£ä¹ˆå¦‚ä½•é˜²æ­¢è§¦å‘å¤šæ¬¡çš„å‘¢ï¼Ÿå…ˆçœ‹Vue3çš„æºç (ç®€å†™çœç•¥äº†éƒ¨åˆ†ä»£ç )ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182// setteræ“ä½œè§¦å‘å“åº”function set( target: any, key: string | symbol, value: any, receiver: any): boolean &#123; value = toRaw(value) // åˆ¤æ–­keyæ˜¯å¦ä¸ºå½“å‰targetè‡ªèº«å±æ€§ const hadKey = hasOwn(target, key) // è·å–æ—§å€¼ const oldValue = target[key] if (isRef(oldValue) &amp;&amp; !isRef(value)) &#123; oldValue.value = value return true &#125; const result = Reflect.set(target, key, value, receiver) ... if (!hadKey) &#123; // è‹¥å±æ€§ä¸å­˜åœ¨æ ‡è®°ä¸ºaddæ“ä½œ trigger(target, OperationTypes.ADD, key) &#125; else if (value !== oldValue) &#123; // è‹¥å€¼ä¸ç›¸ç­‰åœ¨è§¦å‘ï¼Œå¹¶ä¸”æ ‡è®°ä¸ºsetæ“ä½œ trigger(target, OperationTypes.SET, key) &#125; ... return result&#125;export function trigger( target: any, type: OperationTypes, key?: string | symbol, extraInfo?: any) &#123; const depsMap = targetMap.get(target) if (depsMap === void 0) &#123; // never been tracked return &#125; const effects = new Set&lt;ReactiveEffect&gt;() const computedRunners = new Set&lt;ReactiveEffect&gt;() // è¿™é‡Œéå†æ‰¾å‡ºç›¸å…³ä¾èµ–çš„effect if (type === OperationTypes.CLEAR) &#123; // collection being cleared, trigger all effects for target depsMap.forEach(dep =&gt; &#123; addRunners(effects, computedRunners, dep) &#125;) &#125; else &#123; // schedule runs for SET | ADD | DELETE if (key !== void 0) &#123; addRunners(effects, computedRunners, depsMap.get(key)) &#125; // also run for iteration key on ADD | DELETE if (type === OperationTypes.ADD || type === OperationTypes.DELETE) &#123; // è¿™é‡Œå½“æ”¹å˜æ•°ç»„lengthé•¿åº¦æ—¶ä¹Ÿä¼šè§¦å‘ç›¸å…³effectè¿›è¡Œå“åº” const iterationKey = Array.isArray(target) ? 'length' : ITERATE_KEY addRunners(effects, computedRunners, depsMap.get(iterationKey)) &#125; &#125; // éå†æ‰§è¡Œä¾èµ–çš„effect const run = (effect: ReactiveEffect) =&gt; &#123; scheduleRun(effect, target, type, key, extraInfo) &#125; computedRunners.forEach(run) effects.forEach(run)&#125;function scheduleRun( effect: ReactiveEffect, target: any, type: OperationTypes, key: string | symbol | undefined, extraInfo: any) &#123; ... if (effect.scheduler !== void 0) &#123; effect.scheduler(effect) &#125; else &#123; effect() &#125;&#125; ç”±æºç æˆ‘ä»¬å¯ä»¥åˆ†æå‡ºï¼š1ã€åˆ¤æ–­keyæ˜¯å¦ä¸ºå½“å‰è¢«ä»£ç†å¯¹è±¡targetè‡ªèº«å±æ€§; 2ã€åˆ¤æ–­æ—§å€¼ä¸æ–°å€¼æ˜¯å¦ç›¸ç­‰ã€‚åªæœ‰è¿™ä¸¤ä¸ªæ¡ä»¶å…¶ä¸­ä¸€ä¸ªæ»¡è¶³ï¼Œæ‰æœ‰å¯èƒ½æ‰§è¡Œ triggerã€‚ æ€ä¹ˆç†è§£å‘¢ï¼Œæˆ‘ä»¬ä¸¾ä¸ªğŸŒ°ï¼Œå¯ä»¥å®ç°ä¸€ä¸ªå°çš„ reactive æ–¹æ³•æ¥åšæ•°æ®ä»£ç†ï¼Œä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435function hasOwn(val, key) &#123; const hasOwnProperty = Object.prototype.hasOwnProperty return hasOwnProperty.call(val, key)&#125;function reactive(data) &#123; let observed = new Proxy(data, &#123; get(target, key, receiver) &#123; const res = Reflect.get(target, key, receiver) return res &#125;, set(target, key, value, receiver) &#123; console.log(target, key, value) const hadKey = hasOwn(target, key) const oldValue = target[key] const result = Reflect.set(target, key, value, receiver) if (!hadKey) &#123; console.log('trigger add operation...') &#125; else if(value !== oldValue) &#123; console.log('trigger set operation...') &#125; return result &#125; &#125;) return observed&#125;let data = ['a', 'b']let state = reactive(data)state.push('c')// ["a", "b"] "2" "c"// trigger add operation...// ["a", "b", "c"] "length" 3 state.push(â€˜câ€™) ä¼šè§¦å‘ä¸¤æ¬¡ set ï¼Œä¸€æ¬¡æ˜¯pushçš„å€¼ c ï¼Œä¸€æ¬¡æ˜¯ length å±æ€§è®¾ç½®ã€‚ 1ã€è®¾ç½®å€¼ c æ—¶ï¼Œæ–°å¢äº†ç´¢å¼• key ä¸º 2ï¼Œ*target æ˜¯åŸå§‹çš„ä»£ç†å¯¹è±¡ [â€˜aâ€™, â€˜câ€™] ï¼Œè¿™æ˜¯ä¸€ä¸ª add æ“ä½œ, æ•… hasOwn(target, key) è¿”å›çš„æ˜¯falseï¼Œæ­¤æ—¶æ‰§è¡Œ trigger add operationâ€¦ ã€‚æ³¨æ„åœ¨Vueæºç triggeræ–¹æ³•ä¸­ï¼Œlengthæ²¡æœ‰å¯¹åº”çš„effectï¼Œæ‰€ä»¥å°±æ²¡æœ‰æ‰§è¡Œç›¸å…³çš„effect 2ã€å½“ä¼ å…¥ key ä¸º length æ—¶ï¼Œlength æ˜¯è‡ªèº«å±æ€§ï¼Œæ•… hasOwn(target, key) è¿”å› true, æ­¤æ—¶ value æ˜¯ 3, è€Œ oldValue å³ä¸º target[â€˜lengthâ€™] ä¹Ÿæ˜¯ 3ï¼Œæ•…value !== oldValueä¸æˆç«‹ï¼Œä¸æ‰§è¡Œtriggeræ–¹æ³• æ•…åªæœ‰å½“ hasOwn(target, key) è¿”å›trueæˆ–è€… value !== oldValue çš„æ—¶å€™æ‰æ‰§è¡Œ trigger æ€»ç»“ åœ¨åˆ†ææºç ä¹‹å‰æˆ‘ä»¬å…ˆåˆ—ä¸¾äº†ç”¨Proxyåšä»£ç†å®ç°æ•°æ®å“åº”éœ€è¦è§£å†³çš„å‡ ä¸ªé—®é¢˜ï¼Œå¹¶å¸¦ç€è¿™äº›é—®é¢˜ä¸€æ­¥ä¸€æ­¥æ­å¼€Vueåœ¨æ•°æ®å“åº”ç³»ç»Ÿå¤„ç†è¿™äº›é—®é¢˜çš„é¢çº±ï¼Œä¹Ÿè®©æˆ‘ä»¬è¿›ä¸€æ­¥äº†è§£äº†Vueæºç ç¼–å†™æœ‰è®¸å¤šå·§å¦™çš„åœ°æ–¹ï¼Œæ¯”å¦‚åˆ©ç”¨ Reflect.get è¿”å›å€¼ä¸º target å½“å‰è§¦å‘çš„ç¬¬ä¸€å±‚å±æ€§ key å€¼å¯¹åº”çš„ value å€¼ï¼Œä»è€Œå†æ¥åˆ¤æ–­æ˜¯å¦ä¸ºObjectæ¥è¿›è¡Œæ·±åº¦è§‚æµ‹ï¼Œå¹¶ä¸”è§‚æµ‹çš„å€¼å­˜æ”¾åœ¨ä¸€ä¸ªWeakMapä¸‹ï¼Œè¿™æ ·ç›¸æ¯”è¾ƒé€’å½’Proxyï¼ŒVueçš„è¿™ç§å®ç°æ–¹å¼å¤§å¤§æé«˜äº†æ•°æ®å“åº”çš„æ€§èƒ½ã€‚ è¿™ä¸¤å¤©å°±å¤§è‡´çš„é˜…è¯»äº†è¿™éƒ¨åˆ†æºç ï¼Œæœ‰äº›ç»†èŠ‚åœ°æ–¹è¿˜æ²¡å»æ·±å…¥ç†è§£ï¼Œå­˜åœ¨ä¸è¶³æˆ–è€…é”™è¯¯çš„åœ°æ–¹è¿˜è¯·å„ä½å¤§ä½¬æŒ‡å‡ºï¼Œå¤§å®¶ä¸€èµ·å­¦ä¹ äº¤æµå“ˆã€‚]]></content>
      <categories>
        <category>å‰ç«¯å¼€å‘</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç§»åŠ¨ç«¯å¼€å‘é—®é¢˜å°è®°]]></title>
    <url>%2F2019%2F07%2F03%2Fabout-mobile-develop%2F</url>
    <content type="text"><![CDATA[å…³äºiosé”®ç›˜æŒ¡ä½é—®é¢˜ï¼ˆé€‚ç”¨äºinputç½®åº•ï¼Œé”®ç›˜å¼¹èµ·çª—å£å¯æ»šåŠ¨ï¼‰ 12345678910111213141516171819202122232425262728293031323334/** * è§£å†³iosé”®ç›˜è¢«æŒ¡ä½inputé—®é¢˜ï¼Œé€‚ç”¨äºinputç½®åº•ï¼Œé”®ç›˜å¼¹èµ·çª—å£å¯æ»šåŠ¨ * @param &#123;*&#125; input inputç±»åæˆ–é€‰æ‹©å™¨ */ repairIosInputHidden(input) &#123; if (this.isIos()) &#123; const inputEl = typeof input === 'string' ? document.querySelector(input) : input; let timeout = null; // è®°å½•çª—å£æ»šåŠ¨å‰çš„æ»šåŠ¨é«˜åº¦ const scrollElement = document.scrollingElement || document.body || document.documentElement; const bfscrolltop = scrollElement.scrollTop || window.pageYOffset; const setScrollTop = (h) =&gt; &#123; scrollElement.scrollTop = h; &#125;; const scrollToBottom = () =&gt; &#123; const scrollHeight = document.documentElement.scrollHeight || document.body.scrollHeight; setScrollTop(scrollHeight); &#125;; // inputèšç„¦é”®ç›˜å¼¹èµ·ï¼Œè·å–çª—å£å¯æ»šåŠ¨é«˜åº¦scrollHeightï¼Œå»¶æ—¶èµ‹å€¼ï¼Œæ­¤æ—¶å·²ç»æ˜¯æœ€å¤§å¯æ»šåŠ¨é«˜åº¦äº†ï¼Œ // å³é”®ç›˜å¼¹å‡ºåæ»šåŠ¨æ¡ä¼šæ»šåŠ¨åˆ°åº•éƒ¨ï¼Œinputä¼šæ˜¾ç¤ºåœ¨é”®ç›˜ä¹‹ä¸Š inputEl.onfocus = () =&gt; &#123; // è®©inputæ˜¾ç¤ºåœ¨å¯è§†åŒºåŸŸï¼Œå…¼å®¹éƒ¨åˆ†æœºå‹åŸç”Ÿé”®ç›˜æŒ¡ä½é—®é¢˜ inputEl.scrollIntoView(true); timeout = setTimeout(() =&gt; &#123; scrollToBottom(); &#125;, 300); &#125;; // inputå¤±å»ç„¦ç‚¹åï¼Œæ¢å¤åŸæ¥æ»šåŠ¨ä½ç½® inputEl.onblur = () =&gt; &#123; clearTimeout(timeout); setScrollTop(bfscrolltop); &#125;; &#125; &#125; ç‚¹å‡»åŒå‡»äº‹ä»¶å¹¶å­˜ 123456789101112131415161718192021222324252627282930313233343536373839&lt;template&gt; &lt;div class="touch-wrapper" @click.stop="onTap"&gt; &lt;slot&gt;&lt;/slot&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;let lastClickTime = 0;let clickTimer;export default &#123; name: 'BaseTouch', props: &#123; // å•å‡»äº‹ä»¶å»¶è¿Ÿæ—¶é—´ delay: &#123; type: Number, default: 300 &#125; &#125;, methods: &#123; onTap(e) &#123; const nowTime = new Date().getTime(); // åœ¨è§„å®šæ—¶é—´å†…å†è§¦å‘ç‚¹å‡»äº‹ä»¶æ—¶æ‰§è¡ŒdoubleTapï¼Œå³æ­¤æ—¶ä¸ºåŒå‡»äº‹ä»¶ï¼Œå¦åˆ™ä¸ºå•å‡»äº‹ä»¶ if (nowTime - lastClickTime &lt; this.delay) &#123; lastClickTime = 0; if (clickTimer) &#123; clearTimeout(clickTimer); &#125; this.$emit('double-tap', e); &#125; else &#123; lastClickTime = nowTime; clickTimer = setTimeout(() =&gt; &#123; this.$emit('tap', e); &#125;, this.delay); &#125; &#125; &#125;&#125;;&lt;/script&gt;]]></content>
      <categories>
        <category>å‰ç«¯å¼€å‘</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>ç§»åŠ¨ç«¯å¼€å‘</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[PromiseåŸç†å°è®°]]></title>
    <url>%2F2019%2F02%2F26%2Fabout-promise%2F</url>
    <content type="text"><![CDATA[å®šä¹‰ Promise å¯¹è±¡ç”¨äºè¡¨ç¤ºä¸€ä¸ªå¼‚æ­¥æ“ä½œçš„æœ€ç»ˆçŠ¶æ€ï¼ˆå®Œæˆæˆ–å¤±è´¥ï¼‰ï¼Œä»¥åŠå…¶è¿”å›çš„å€¼ã€‚ Promiseï¼šä¸ºæ„é€ å‡½æ•°ï¼Œæ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¯¥å‡½æ•°æ¥æ”¶resolveå’Œrejectä¸¤ä¸ªå‚æ•°ï¼Œç”±JavaScriptå¼•æ“æä¾›ï¼Œæ— éœ€è‡ªå·±å®ç°ã€‚ resolveï¼šå…¶ä½œç”¨æ˜¯å°†Promiseå¯¹è±¡çš„çŠ¶æ€ä»Pendingå˜ä¸ºResolved,åœ¨å¼‚æ­¥æ“ä½œæˆåŠŸæ—¶è°ƒç”¨ï¼Œå¹¶å°†å¼‚æ­¥æ“ä½œçš„ç»“æœï¼Œä½œä¸ºå‚æ•°ä¼ é€’å‡ºå»ï¼› rejectï¼šå…¶ä½œç”¨æ˜¯å°†Promiseå¯¹è±¡çš„çŠ¶æ€ä»ä»Pendingå˜ä¸ºRejected,åœ¨å¼‚æ­¥æ“ä½œå¤±è´¥æ—¶è°ƒç”¨ï¼Œå¹¶å°†å¼‚æ­¥æ“ä½œæŠ›å‡ºçš„é”™è¯¯ï¼Œä½œä¸ºå‚æ•°ä¼ é€’å‡ºå»ã€‚ Promiseå¯¹è±¡åªæœ‰ä¸‰ç§çŠ¶æ€: æœªå®Œæˆï¼špending å·²å®Œæˆï¼šresolved(ä¹Ÿç§°fulfilled) å¤±è´¥ï¼šrejected ä»¥ä¸Šä¸‰ç§çŠ¶æ€åªæœ‰ä»¥ä¸‹ä¸¤ç§å˜åŒ–,ä¸€æ—¦å½“å‰çŠ¶æ€å˜ä¸ºâ€œresolvedâ€æˆ–â€œrejectedâ€ï¼Œå°±æ„å‘³ç€ä¸ä¼šå†æœ‰æ–°çš„çŠ¶æ€å˜åŒ–ï¼š pending-&gt;resolved pending-&gt;rejected then(onFulfilled, onRjected)ï¼šthenæ–¹æ³•ä¼ é€’ä¸¤ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œå½“PromiseçŠ¶æ€ä¸ºfulfilledæ—¶ï¼Œè°ƒç”¨ then çš„ onFulfilled æ–¹æ³•ï¼Œå½“PromiseçŠ¶æ€ä¸ºrejectedæ—¶ï¼Œè°ƒç”¨ then çš„ onRjected æ–¹æ³•ã€‚ catch(onRjected)ï¼šå½“PromiseçŠ¶æ€ä¸ºrejectedæ—¶ï¼Œè°ƒç”¨ then çš„ onRjected æ–¹æ³•ã€‚ ä¾‹å­ï¼š 1234567891011121314151617let p = new Promise(function(resolve, reject)&#123; setTimeout(function()&#123; let num = Math.random() if (num &gt; 0.5) &#123; resolve(num) &#125;else&#123; reject(num) &#125; &#125;, 1000)&#125;)p.then(function(num)&#123; console.log('å¤§äº0.5çš„æ•°å­—ï¼š', num)&#125;,function(num)&#123; console.log('å°äºç­‰äº0.5çš„æ•°å­—', num)&#125;)// è¿è¡Œç¬¬ä¸€æ¬¡ï¼šå°äºç­‰äº0.5çš„æ•°å­— 0.166162996031475// è¿è¡Œç¬¬äºŒæ¬¡ï¼šå¤§äº0.5çš„æ•°å­—ï¼š 0.6591451548308984 åŸç† æ ¹æ®ä»¥ä¸Šå†…å®¹ï¼ŒPromiseå¯¹è±¡ä½œä¸ºä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œå¹¶æ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¯¥å‡½æ•°æ‰§è¡Œå®ŒåŒæ­¥æˆ–å¼‚æ­¥æ“ä½œåï¼Œè°ƒç”¨å®ƒçš„ä¸¤ä¸ªå‚æ•°resolveå’Œrejectï¼Œï¼ŒåŒæ—¶å…¶å†…éƒ¨æœ‰çŠ¶æ€æœºåˆ¶ï¼ŒåŸå‹é“¾ä¸Šæœ‰thenæ–¹æ³•ï¼Œæ•…å¯å…ˆåˆæ­¥å®ç°Promiseçš„åŠŸèƒ½ï¼Œå¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930function Promise(executor)&#123; //executoræ˜¯ä¸€ä¸ªæ‰§è¡Œå™¨ï¼ˆå‡½æ•°ï¼‰ let _this = this // å…ˆç¼“å­˜thisä»¥å…åé¢æŒ‡é’ˆæ··ä¹± _this.status = 'pending' // é»˜è®¤çŠ¶æ€ä¸ºç­‰å¾…æ€ _this.value = undefined // æˆåŠŸæ—¶è¦ä¼ é€’ç»™æˆåŠŸå›è°ƒçš„æ•°æ®ï¼Œé»˜è®¤undefined _this.reason = undefined // å¤±è´¥æ—¶è¦ä¼ é€’ç»™å¤±è´¥å›è°ƒçš„åŸå› ï¼Œé»˜è®¤undefined function resolve(value) &#123; // å†…ç½®ä¸€ä¸ªresolveæ–¹æ³•ï¼Œæ¥æ”¶æˆåŠŸçŠ¶æ€æ•°æ® // ä¸Šé¢è¯´äº†ï¼Œåªæœ‰pendingå¯ä»¥è½¬ä¸ºå…¶ä»–çŠ¶æ€ï¼Œæ‰€ä»¥è¿™é‡Œè¦åˆ¤æ–­ä¸€ä¸‹ if (_this.status === 'pending') &#123; _this.status = 'resolved' // å½“è°ƒç”¨resolveæ—¶è¦å°†çŠ¶æ€æ”¹ä¸ºæˆåŠŸæ€ _this.value = value // ä¿å­˜æˆåŠŸæ—¶ä¼ è¿›æ¥çš„æ•°æ® &#125; &#125; function reject(reason) &#123; // å†…ç½®ä¸€ä¸ªrejectæ–¹æ³•ï¼Œå¤±è´¥çŠ¶æ€æ—¶æ¥æ”¶åŸå›  if (_this.status === 'pending') &#123; // å’ŒresolveåŒç† _this.status = 'rejected' // è½¬ä¸ºå¤±è´¥æ€ _this.reason = reason // ä¿å­˜å¤±è´¥åŸå›  &#125; &#125; executor(resolve, reject) // æ‰§è¡Œæ‰§è¡Œå™¨å‡½æ•°ï¼Œå¹¶å°†ä¸¤ä¸ªæ–¹æ³•ä¼ å…¥&#125;// thenæ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯æˆåŠŸå’Œå¤±è´¥çš„å›è°ƒï¼Œè¿™é‡Œæˆ‘ä»¬å‘½åä¸ºonFulfilledå’ŒonRjectedPromise.prototype.then = function(onFulfilled, onRjected)&#123; let _this = this; // ä¾ç„¶ç¼“å­˜this if(_this.status === 'resolved')&#123; // åˆ¤æ–­å½“å‰Promiseçš„çŠ¶æ€ onFulfilled(_this.value) // å¦‚æœæ˜¯æˆåŠŸæ€ï¼Œå½“ç„¶æ˜¯è¦æ‰§è¡Œç”¨æˆ·ä¼ é€’çš„æˆåŠŸå›è°ƒï¼Œå¹¶æŠŠæ•°æ®ä¼ è¿›å» &#125; if(_this.status === 'rejected')&#123; // åŒç† onRjected(_this.reason) &#125;&#125; æµ‹è¯•ä¸‹ï¼š 1234567891011121314151617181920212223// æˆåŠŸlet Promise = require('./myPromise') // å¼•å…¥æ¨¡å—let p = new Promise(function(resolve, reject)&#123; resolve('test')&#125;)p.then(function(data)&#123; console.log('æˆåŠŸ', data)&#125;,function(err)&#123; console.log('å¤±è´¥', err)&#125;)// æˆåŠŸ test// å¤±è´¥let Promise = require('./myPromise') // å¼•å…¥æ¨¡å—let p = new Promise(function(resolve, reject)&#123; reject('test')&#125;)p.then(function(data)&#123; console.log('æˆåŠŸ', data)&#125;,function(err)&#123; console.log('å¤±è´¥', err)&#125;)// å¤±è´¥ test ä»¥ä¸Šå¯ä»¥çœ‹åˆ°Promiseä¼ å…¥å‚æ•°çš„å‡½æ•°æ˜¯ç«‹åˆ»æ‰§è¡Œçš„ï¼Œå½“ä¼ å…¥çš„å‡½æ•°æ‰§è¡Œå¼‚æ­¥æ“ä½œæ—¶ï¼Œè¿™ä¸ªæ—¶å€™thenæ–¹æ³•ä¸­å›è°ƒæ˜¯ä¸ä¼šå¼‚æ­¥æ‰§è¡Œçš„ï¼Œå³æ­¤æ—¶è·å–ä¸åˆ°ä»»ä½•ç»“æœï¼Œä¾‹å¦‚ï¼š 1234567891011let p = new Promise(function(resolve, reject)&#123; setTimeout(function()&#123; resolve(100) &#125;, 1000)&#125;)p.then(function(data)&#123; console.log('æˆåŠŸ', data)&#125;,function(err)&#123; console.log('å¤±è´¥', err)&#125;)// ä¸ä¼šè¾“å‡ºä»»ä½•ä»£ç  åŸå› æ˜¯thenåªæ˜¯å¯¹æˆåŠŸæˆ–è€…å¤±è´¥çŠ¶æ€è¿›è¡Œäº†åˆ¤æ–­ï¼Œè€ŒPromiseå®ä¾‹åŒ–æ—¶ï¼Œä¼ å…¥çš„å‡½æ•°ä¼šç«‹å³æ‰§è¡Œï¼Œè€ŒsetTimeoutæ˜¯å¼‚æ­¥æ‰§è¡Œçš„ï¼Œå½“thenæ–¹æ³•æ‰§è¡Œçš„æ—¶å€™ï¼Œæ­¤æ—¶Promiseçš„çŠ¶æ€è¿˜æ˜¯penddingï¼Œå› æ­¤ä¹Ÿéœ€è¦å¯¹penddingçŠ¶æ€è¿›è¡Œåˆ¤æ–­ï¼Œæ­¤æ—¶æˆ‘ä»¬å¯ä»¥åœ¨thenæ–¹æ³•ä¸­åˆ¤æ–­penddingçŠ¶æ€ï¼Œå…ˆè·å–ä¿å­˜å›è°ƒå‡½æ•°ï¼Œç­‰åˆ°å¼‚æ­¥å‡½æ•°æ‰§è¡Œå†ä¸€ä¸€æ‰§è¡Œthenæ–¹æ³•ä¸­çš„å›è°ƒå‡½æ•°ï¼Œæ”¹è¿›åçš„ä»£ç å¦‚ä¸‹ï¼š å®ç°å¼‚æ­¥ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556// myPromisefunction Promise(executor)&#123; //executoræ˜¯ä¸€ä¸ªæ‰§è¡Œå™¨ï¼ˆå‡½æ•°ï¼‰ let _this = this // å…ˆç¼“å­˜thisä»¥å…åé¢æŒ‡é’ˆæ··ä¹± _this.status = 'pending' // é»˜è®¤çŠ¶æ€ä¸ºç­‰å¾…æ€ _this.value = undefined // æˆåŠŸæ—¶è¦ä¼ é€’ç»™æˆåŠŸå›è°ƒçš„æ•°æ®ï¼Œé»˜è®¤undefined _this.reason = undefined // å¤±è´¥æ—¶è¦ä¼ é€’ç»™å¤±è´¥å›è°ƒçš„åŸå› ï¼Œé»˜è®¤undefined /**add: ç”¨æ¥å­˜æ”¾thenå›è°ƒå‡½æ•°**/ _this.onResolvedCallbacks = []; // å­˜æ”¾thenæˆåŠŸçš„å›è°ƒ _this.onRejectedCallbacks = []; // å­˜æ”¾thenå¤±è´¥çš„å›è°ƒ /**add**/ function resolve(value) &#123; // å†…ç½®ä¸€ä¸ªresolveæ–¹æ³•ï¼Œæ¥æ”¶æˆåŠŸçŠ¶æ€æ•°æ® // ä¸Šé¢è¯´äº†ï¼Œåªæœ‰pendingå¯ä»¥è½¬ä¸ºå…¶ä»–çŠ¶æ€ï¼Œæ‰€ä»¥è¿™é‡Œè¦åˆ¤æ–­ä¸€ä¸‹ if (_this.status === 'pending') &#123; _this.status = 'resolved' // å½“è°ƒç”¨resolveæ—¶è¦å°†çŠ¶æ€æ”¹ä¸ºæˆåŠŸæ€ _this.value = value // ä¿å­˜æˆåŠŸæ—¶ä¼ è¿›æ¥çš„æ•°æ® /**add**/ _this.onResolvedCallbacks.forEach(function(fn)&#123;// å½“æˆåŠŸçš„å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œä¹‹å‰ç¼“å­˜çš„å›è°ƒå‡½æ•°ä¼šè¢«ä¸€ä¸€è°ƒç”¨ fn() &#125;) &#125; &#125; function reject(reason) &#123; // å†…ç½®ä¸€ä¸ªrejectæ–¹æ³•ï¼Œå¤±è´¥çŠ¶æ€æ—¶æ¥æ”¶åŸå›  if (_this.status === 'pending') &#123; // å’ŒresolveåŒç† _this.status = 'rejected' // è½¬ä¸ºå¤±è´¥æ€ _this.reason = reason // ä¿å­˜å¤±è´¥åŸå›  /**add**/ _this.onRejectedCallbacks.forEach(function(fn)&#123;// å½“å¤±è´¥çš„å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œä¹‹å‰ç¼“å­˜çš„å›è°ƒå‡½æ•°ä¼šè¢«ä¸€ä¸€è°ƒç”¨ fn() &#125;) &#125; &#125; executor(resolve, reject) // æ‰§è¡Œæ‰§è¡Œå™¨å‡½æ•°ï¼Œå¹¶å°†ä¸¤ä¸ªæ–¹æ³•ä¼ å…¥&#125;// thenæ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯æˆåŠŸå’Œå¤±è´¥çš„å›è°ƒï¼Œè¿™é‡Œæˆ‘ä»¬å‘½åä¸ºonFulfilledå’ŒonRjectedPromise.prototype.then = function(onFulfilled, onRjected)&#123; let _this = this; // ä¾ç„¶ç¼“å­˜this /**add: åˆ¤æ–­penddingçŠ¶æ€ï¼Œå°†æˆåŠŸæˆ–è€…å¤±è´¥çš„å›è°ƒå‡½æ•°å­˜æ”¾åˆ°å¯¹åº”çš„æ•°ç»„ä¸­**/ if(_this.status === 'pending')&#123; _this.onResolvedCallbacks.push(function()&#123; onFulfilled(_this.value) &#125;) _this.onRejectedCallbacks.push(function()&#123; onRjected(_this.reason) &#125;) &#125; /**add**/ if(_this.status === 'resolved')&#123; // åˆ¤æ–­å½“å‰Promiseçš„çŠ¶æ€ onFulfilled(_this.value) // å¦‚æœæ˜¯æˆåŠŸæ€ï¼Œå½“ç„¶æ˜¯è¦æ‰§è¡Œç”¨æˆ·ä¼ é€’çš„æˆåŠŸå›è°ƒï¼Œå¹¶æŠŠæ•°æ®ä¼ è¿›å» &#125; if(_this.status === 'rejected')&#123; // åŒç† onRjected(_this.reason) &#125;&#125;module.exports = Promise // å¯¼å‡ºæ¨¡å—ï¼Œå¦åˆ™åˆ«çš„æ–‡ä»¶æ²¡æ³•ä½¿ç”¨ å¤„ç†é”™è¯¯ Promiseæ•è·é”™è¯¯æ‰§è¡Œçš„æ˜¯rejectå‡½æ•°ï¼Œå› æ­¤åœ¨å®ä¾‹ä¸­è·‘å‡ºé”™è¯¯æ—¶ï¼Œåªæ‰§è¡Œrejectå‡½æ•°å°±å¯ä»¥ï¼Œå¯ä½¿ç”¨try catchè¿›è¡Œå¼‚å¸¸æ•è·ï¼› 12345try&#123; executor(resolve, reject)&#125; catch(e)&#123; // å¦‚æœæ•è·å‘ç”Ÿå¼‚å¸¸ï¼Œç›´æ¥è°ƒå¤±è´¥ï¼Œå¹¶æŠŠå‚æ•°ç©¿è¿›å» reject(e)&#125; catchæ–¹æ³•å®ç° catchæ–¹æ³•å…¶å®å°±æ˜¯è·å–å®ä¾‹rejectedæ–¹æ³•æ•è·é”™è¯¯ï¼Œç›¸å½“äºæ‰§è¡Œthen(null, onRejected) 123Promise.prototype.catch = function(onRejected) &#123; return this.then(null, onRejected)&#125; å®ç°thençš„é“¾å¼è°ƒç”¨ ä¸Šé¢å®ç°çš„thenæ–¹æ³•å…¶å®è¿˜ä¸å®Œå–„ï¼Œä¸èƒ½è¿›è¡Œé“¾å¼è°ƒç”¨ã€‚æ˜¯å¦å¯ä»¥è·Ÿjqä¸€æ ·åœ¨thenæ–¹æ³•ä¸­return thiså®ç°é“¾å¼è°ƒç”¨ï¼Œå¯å®é™…ä¸ŠPromiseä¸­thenæ–¹æ³•è¦å¤æ‚çš„å¤šï¼Œä¸èƒ½ç®€å•çš„ç”¨return thiså®ç°é“¾å¼è°ƒç”¨ã€‚ 123456789101112let p1 = new Promise(function(resolve, reject)&#123; resolve()&#125;)let p2 = p1.then(function(data)&#123; //è¿™æ˜¯p1çš„æˆåŠŸå›è°ƒï¼Œæ­¤æ—¶p1æ˜¯æˆåŠŸæ€ throw new Error('é”™è¯¯') // å¦‚æœè¿™é‡ŒæŠ›å‡ºé”™è¯¯ï¼Œp2åº”æ˜¯å¤±è´¥æ€&#125;)p2.then(function()&#123;&#125;,function(err)&#123; console.log(err)&#125;)// Error: é”™è¯¯ æŒ‰ç…§ä¸Šé¢ä»£ç ï¼Œå¦‚æœthenæ–¹æ³•ä¸­è¿”å›çš„æ˜¯thisï¼Œé‚£ä¹ˆp2è·Ÿp1ç›¸åŒï¼Œå›ºçŠ¶æ€ä¹Ÿç›¸åŒï¼Œä½†æ˜¯Promiseçš„æˆåŠŸæ€å’Œå¤±è´¥æ€ä¸èƒ½ç›¸äº’è½¬æ¢ï¼Œé‚£å°±ä¸ä¼šå¾—åˆ°p1æˆåŠŸè€Œp2å¤±è´¥çš„æ•ˆæœï¼Œè€Œå®é™…ä¸Šæ˜¯å¯èƒ½å‘ç”Ÿè¿™ç§æƒ…å†µçš„ã€‚å› æ­¤Promiseçš„thenæ–¹æ³•å®ç°é“¾å¼è°ƒç”¨çš„åŸç†æ˜¯ï¼šè¿”å›ä¸€ä¸ªæ–°çš„Promise æŒ‰ç…§è¿™æ ·çš„æ€è·¯ï¼Œåœ¨thenæ–¹æ³•ä¸­å…ˆå®šä¹‰ä¸€ä¸ªæ–°çš„Promiseï¼Œå–åä¸ºpromise2ï¼Œç„¶ååœ¨ä¸‰ç§çŠ¶æ€ä¸‹åˆ†åˆ«ç”¨promise2åŒ…è£…ä¸€ä¸‹ï¼Œåœ¨è°ƒç”¨onFulfilledæ—¶ç”¨ä¸€ä¸ªå˜é‡xï¼ˆè§„å®šçš„ï¼‰æ¥æ”¶è¿”å›å€¼ï¼Œtryâ€¦catchâ€¦ä¸€ä¸‹ä»£ç ï¼Œæ²¡é”™å°±è°ƒresolveä¼ å…¥xï¼Œæœ‰é”™å°±è°ƒrejectä¼ å…¥é”™è¯¯ï¼Œæœ€åå†æŠŠpromise2ç»™returnå‡ºå»ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243// æ”¹åŠ¨thenlet promise2;if (_this.status === 'resolved') &#123; promise2 = new Promise(function (resolve, reject) &#123; try &#123; let x = onFulfilled(_this.value) resolve(x) &#125; catch (e) &#123; reject(e) &#125; &#125;)&#125;if (_this.status === 'rejected') &#123; promise2 = new Promise(function (resolve, reject) &#123; try &#123; let x = onRjected(_this.reason) resolve(x) &#125; catch (e) &#123; reject(e) &#125; &#125;)&#125;if(_this.status === 'pending')&#123; promise2 = new Promise(function (resolve, reject) &#123; _this.onResolvedCallbacks.push(function()&#123; try &#123; let x = onFulfilled(_this.value) resolve(x) &#125; catch (e) &#123; reject(e) &#125; &#125;) _this.onRejectedCallbacks.push(function()&#123; try &#123; let x = onRjected(_this.reason) resolve(x) &#125; catch (e) &#123; reject(e) &#125; &#125;) &#125;)&#125;return promise2 è¿™æ ·å®ç°xåªæ˜¯å½“åšä¸€ä¸ªæ™®é€šçš„å€¼ï¼Œæ¯”å¦‚å­—ç¬¦ä¸²æ•°å­—æ•°ç»„å¯¹è±¡ç­‰å€¼å¯ä»¥ç”¨ä¸Šé¢ä»£ç ç®€å•é“¾å¼è°ƒç”¨ä¼ ç»™ä¸‹ä¸€ä¸ªthenï¼Œä½†æ˜¯å¦‚æœxä¹Ÿæ˜¯ä¸€ä¸ªPromiseæˆ–è€…æ˜¯å…¶ä»–å¼‚æ­¥æ“ä½œï¼Œå¯èƒ½æ€§å¦‚ä¸‹ï¼š å‰ä¸€æ¬¡thenè¿”å›ä¸€ä¸ªæ™®é€šå€¼ï¼Œæ¯”å¦‚å­—ç¬¦ä¸²æ•°ç»„å¯¹è±¡ç­‰ï¼Œåªéœ€ä¼ ç»™ä¸‹ä¸€ä¸ªthenï¼Œåˆšæ‰çš„æ–¹æ³•å°±èƒ½å®ç°ã€‚ å‰ä¸€æ¬¡thenè¿”å›çš„æ˜¯ä¸€ä¸ªPromiseï¼Œæ˜¯æ­£å¸¸çš„æ“ä½œï¼Œä¹Ÿæ˜¯Promiseæä¾›çš„è¯­æ³•ç³–ï¼Œæˆ‘ä»¬è¦æƒ³åŠæ³•åˆ¤æ–­åˆ°åº•è¿”å›çš„æ˜¯å•¥ã€‚ å‰ä¸€æ¬¡thenè¿”å›çš„æ˜¯ä¸€ä¸ªPromiseï¼Œå…¶ä¸­æœ‰å¼‚æ­¥æ“ä½œï¼Œä¹Ÿæ˜¯ç†æ‰€å½“ç„¶çš„ï¼Œé‚£æˆ‘ä»¬å°±è¦ç­‰å¾…ä»–çš„çŠ¶æ€æ”¹å˜ï¼Œå†è¿›è¡Œä¸‹é¢çš„å¤„ç†ã€‚ å‰ä¸€æ¬¡thenè¿”å›çš„æ˜¯è‡ªå·±æœ¬èº«è¿™ä¸ªPromise 123var p1 = p.then(function()&#123; return p1 &#125;) å‰ä¸€æ¬¡thenè¿”å›çš„æ˜¯è‡ªå®šä¹‰çš„Promiseçš„æ™®é€šå¯¹è±¡ï¼Œæ¯”å¦‚{then:â€˜xxxâ€™}ï¼Œæˆ–è€…æ”¹å˜thenæ–¹æ³•çš„è®¿é—®å™¨å±æ€§ï¼Œåœ¨thené‡Œæ•…æ„æŠ›é”™ã€‚æ¯”å¦‚ 123456let promise = &#123;&#125;Object.defineProperty(promise,'then',&#123; value: function()&#123; throw new Error('æŠ¥é”™æ°”æ­»ä½ ') &#125;&#125;) åœ¨resolveä¼ ä¸€ä¸ªPromiseå¯¹è±¡ 1234567p.then(function(data) &#123; return new Promise(function(resolve, reject) &#123; resolve(new Promise(function(resolve,reject)&#123; resolve(1111) &#125;)) &#125;)&#125;) åŒæ—¶è°ƒç”¨resolveå’Œrejectï¼Œåˆ™éœ€å–å‰é¢è°ƒç”¨çš„æ–¹æ³•ï¼Œå¿½ç•¥åä¸€ä¸ª ä¸ä¼ ä»»ä½•å‚æ•°ï¼Œä¸‹é¢ä»£ç è¿è¡Œç»“æœæ˜¯undefinedï¼ŒæŒ‰æˆ‘ä»¬ä¸Šé¢å®ç°çš„ä»£ç ï¼Œthenä¸ä¼ ä»»ä½•å‚æ•°æ—¶ï¼Œresolveä¸­ä¼ çš„å€¼æ˜¯æ²¡æœ‰åŠæ³•ç©¿é€çš„ï¼Œ 123456new Promise(resolve=&gt;resolve(8)) .then() .then() .then(function foo(value) &#123; alert(value) &#125;) é’ˆå¯¹ä»¥ä¸Šé—®é¢˜å¯ä»¥å¯¹thenæ–¹æ³•ä»£ç åšå‡ºä¼˜åŒ–ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114Promise.prototype.then = function (onFulfilled, onRjected) &#123; //æˆåŠŸå’Œå¤±è´¥é»˜è®¤ä¸ä¼ ç»™ä¸€ä¸ªå‡½æ•°ï¼Œè§£å†³äº†é—®é¢˜8 onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : function (value) &#123; return value; &#125; onRjected = typeof onRjected === 'function' ? onRjected : function (err) &#123; throw err; &#125; let _this = this; let promise2; //è¿”å›çš„promise if (_this.status === 'resolved') &#123; promise2 = new Promise(function (resolve, reject) &#123; // å½“æˆåŠŸæˆ–è€…å¤±è´¥æ‰§è¡Œæ—¶æœ‰å¼‚å¸¸é‚£ä¹ˆè¿”å›çš„promiseåº”è¯¥å¤„äºå¤±è´¥çŠ¶æ€ setTimeout(function () &#123;// æ ¹æ®è§„èŒƒè®©é‚£ä¿©å®¶ä¼™å¼‚æ­¥æ‰§è¡Œ try &#123; let x = onFulfilled(_this.value);//è¿™é‡Œè§£é‡Šè¿‡äº† // å†™ä¸€ä¸ªæ–¹æ³•ç»Ÿä¸€å¤„ç†é—®é¢˜1-7 resolvePromise(promise2, x, resolve, reject); &#125; catch (e) &#123; reject(e); &#125; &#125;) &#125;) &#125; if (_this.status === 'rejected') &#123; promise2 = new Promise(function (resolve, reject) &#123; setTimeout(function () &#123; try &#123; let x = onRjected(_this.reason); resolvePromise(promise2, x, resolve, reject); &#125; catch (e) &#123; reject(e); &#125; &#125;) &#125;) &#125; if (_this.status === 'pending') &#123; promise2 = new Promise(function (resolve, reject) &#123; _this.onResolvedCallbacks.push(function () &#123; setTimeout(function () &#123; try &#123; let x = onFulfilled(_this.value); resolvePromise(promise2, x, resolve, reject); &#125; catch (e) &#123; reject(e) &#125; &#125;) &#125;); _this.onRejectedCallbacks.push(function () &#123; setTimeout(function () &#123; try &#123; let x = onRjected(_this.reason); resolvePromise(promise2, x, resolve, reject); &#125; catch (e) &#123; reject(e); &#125; &#125;) &#125;); &#125;) &#125; return promise2;&#125;function resolvePromise(promise2, x, resolve, reject) &#123; // æ¥å—å››ä¸ªå‚æ•°ï¼Œæ–°Promiseã€è¿”å›å€¼ï¼ŒæˆåŠŸå’Œå¤±è´¥çš„å›è°ƒ if (promise2 === x) &#123; //è¿™é‡Œåº”è¯¥æŠ¥ä¸€ä¸ªç±»å‹é”™è¯¯ï¼Œæ¥è§£å†³é—®é¢˜4 return reject(new TypeError('å¾ªç¯å¼•ç”¨äº†')) &#125; // è‹¥è¿”å›ä¸€ä¸ªpromiseå®ä¾‹ if (x instanceof Promise) &#123; // xçŠ¶æ€æ²¡ç¡®å®šæ—¶å³å®ä¾‹åŒ–æ—¶è¿›è¡Œå¼‚æ­¥æ“ä½œ if (x.status === 'pending') &#123; x.then(function(v) &#123; resolvePromise(promise2, v, resolve, reject) &#125;, reject) &#125; else &#123; // çŠ¶æ€ç¡®å®šæ—¶ï¼Œç›´æ¥è°ƒç”¨thenæ–¹æ³• x.then(resolve, reject) &#125; return &#125; // çœ‹xæ˜¯ä¸æ˜¯ä¸€ä¸ªpromise,promiseåº”è¯¥æ˜¯ä¸€ä¸ªå¯¹è±¡ let called; // è¡¨ç¤ºæ˜¯å¦è°ƒç”¨è¿‡æˆåŠŸæˆ–è€…å¤±è´¥ï¼Œç”¨æ¥è§£å†³é—®é¢˜7 //ä¸‹é¢åˆ¤æ–­ä¸Šä¸€æ¬¡thenè¿”å›çš„æ˜¯æ™®é€šå€¼è¿˜æ˜¯å‡½æ•°ï¼Œæ¥è§£å†³é—®é¢˜1ã€2 if (x !== null &amp;&amp; (typeof x === 'object' || typeof x === 'function')) &#123; // å¯èƒ½æ˜¯promise &#123;&#125;,çœ‹è¿™ä¸ªå¯¹è±¡ä¸­æ˜¯å¦æœ‰thenæ–¹æ³•ï¼Œå¦‚æœæœ‰thenæˆ‘å°±è®¤ä¸ºä»–æ˜¯promiseäº† try &#123; let then = x.then;// ä¿å­˜ä¸€ä¸‹xçš„thenæ–¹æ³• if (typeof then === 'function') &#123; // æˆåŠŸ //è¿™é‡Œçš„yä¹Ÿæ˜¯å®˜æ–¹è§„èŒƒï¼Œå¦‚æœè¿˜æ˜¯promiseï¼Œå¯ä»¥å½“ä¸‹ä¸€æ¬¡çš„xä½¿ç”¨ //ç”¨callæ–¹æ³•ä¿®æ”¹æŒ‡é’ˆä¸ºxï¼Œå¦åˆ™thisæŒ‡å‘window then.call(x, function (y) &#123; if (called) return //å¦‚æœè°ƒç”¨è¿‡å°±returnæ‰ called = true // yå¯èƒ½è¿˜æ˜¯ä¸€ä¸ªpromiseï¼Œåœ¨å»è§£æç›´åˆ°è¿”å›çš„æ˜¯ä¸€ä¸ªæ™®é€šå€¼ resolvePromise(promise2, y, resolve, reject)//é€’å½’è°ƒç”¨ï¼Œè§£å†³äº†é—®é¢˜6 &#125;, function (err) &#123; //å¤±è´¥ if (called) return called = true reject(err); &#125;) &#125; else &#123; resolve(x) &#125; &#125; catch (e) &#123; if (called) return called = true; reject(e); &#125; &#125; else &#123; // è¯´æ˜æ˜¯ä¸€ä¸ªæ™®é€šå€¼1 resolve(x); // è¡¨ç¤ºæˆåŠŸäº† &#125;&#125; å…¶ä»–æ–¹æ³• 12345678910111213141516171819202122232425262728293031323334353637383940414243// æ•è·é”™è¯¯çš„æ–¹æ³•ï¼Œåœ¨åŸå‹ä¸Šæœ‰catchæ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªæ²¡æœ‰resolveçš„thenç»“æœå³å¯Promise.prototype.catch = function (callback) &#123; return this.then(null, callback)&#125;// è§£æå…¨éƒ¨æ–¹æ³•ï¼Œæ¥æ”¶ä¸€ä¸ªPromiseæ•°ç»„promises,è¿”å›æ–°çš„Promiseï¼Œéå†æ•°ç»„ï¼Œéƒ½å®Œæˆå†resolvePromise.all = function (promises) &#123; //promisesæ˜¯ä¸€ä¸ªpromiseçš„æ•°ç»„ return new Promise(function (resolve, reject) &#123; let arr = []; //arræ˜¯æœ€ç»ˆè¿”å›å€¼çš„ç»“æœ let i = 0; // è¡¨ç¤ºæˆåŠŸäº†å¤šå°‘æ¬¡ function processData(index, y) &#123; arr[index] = y; if (++i === promises.length) &#123; resolve(arr); &#125; &#125; for (let i = 0; i &lt; promises.length; i++) &#123; promises[i].then(function (y) &#123; processData(i, y) &#125;, reject) &#125; &#125;)&#125;// åªè¦æœ‰ä¸€ä¸ªpromiseæˆåŠŸäº† å°±ç®—æˆåŠŸã€‚å¦‚æœç¬¬ä¸€ä¸ªå¤±è´¥äº†å°±å¤±è´¥äº†Promise.race = function (promises) &#123; return new Promise(function (resolve, reject) &#123; for (var i = 0; i &lt; promises.length; i++) &#123; promises[i].then(resolve,reject) &#125; &#125;)&#125;// ç”Ÿæˆä¸€ä¸ªæˆåŠŸçš„promisePromise.resolve = function(value)&#123; return new Promise(function(resolve,reject)&#123; resolve(value); &#125;)&#125;// ç”Ÿæˆä¸€ä¸ªå¤±è´¥çš„promisePromise.reject = function(reason)&#123; return new Promise(function(resolve,reject)&#123; reject(reason); &#125;)&#125;]]></content>
      <categories>
        <category>å‰ç«¯å¼€å‘</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>Promise</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[AsyncåŸç†å°è®°]]></title>
    <url>%2F2019%2F02%2F26%2Fabout-async%2F</url>
    <content type="text"><![CDATA[å®šä¹‰ async function å£°æ˜ç”¨äºå®šä¹‰ä¸€ä¸ªè¿”å› AsyncFunction å¯¹è±¡çš„å¼‚æ­¥å‡½æ•°ã€‚å¼‚æ­¥å‡½æ•°æ˜¯æŒ‡é€šè¿‡äº‹ä»¶å¾ªç¯å¼‚æ­¥æ‰§è¡Œçš„å‡½æ•°ï¼Œå®ƒä¼šé€šè¿‡ä¸€ä¸ªéšå¼çš„ Promise è¿”å›å…¶ç»“æœã€‚ä½†æ˜¯å¦‚æœä½ çš„ä»£ç ä½¿ç”¨äº†å¼‚æ­¥å‡½æ•°ï¼Œå®ƒçš„è¯­æ³•å’Œç»“æ„ä¼šæ›´åƒæ˜¯æ ‡å‡†çš„åŒæ­¥å‡½æ•°ã€‚ 12345678910111213141516171819function resolveAfter2Seconds() &#123; return new Promise(resolve =&gt; &#123; setTimeout(() =&gt; &#123; resolve('resolved'); &#125;, 2000); &#125;);&#125;async function asyncCall() &#123; console.log('calling'); var result = await resolveAfter2Seconds(); console.log(result); // expected output: 'resolved'&#125;asyncCall();// calling// resolved æè¿° å½“è°ƒç”¨ä¸€ä¸ª async å‡½æ•°æ—¶ï¼Œä¼šè¿”å›ä¸€ä¸ª Promise å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨thenæ–¹æ³•æ·»åŠ å›è°ƒå‡½æ•°ã€‚ async å‡½æ•°è¿”å›ä¸€ä¸ªå€¼æ—¶ï¼ŒPromise çš„ resolve æ–¹æ³•ä¼šè´Ÿè´£ä¼ é€’è¿™ä¸ªå€¼ï¼›å½“ async å‡½æ•°æŠ›å‡ºå¼‚å¸¸æ—¶ï¼ŒPromise çš„ reject æ–¹æ³•ä¹Ÿä¼šä¼ é€’è¿™ä¸ªå¼‚å¸¸å€¼ã€‚ å½“ async å‡½æ•°æ‰§è¡Œçš„æ—¶å€™ï¼Œä¸€æ—¦é‡åˆ°awaitå°±ä¼šå…ˆè¿”å›ï¼Œç­‰åˆ°å¼‚æ­¥æ“ä½œå®Œæˆï¼Œå†æ¥ç€æ‰§è¡Œå‡½æ•°ä½“å†…åé¢çš„è¯­å¥ã€‚ 12345678910111213141516171819202122232425// thenå†™æ³•function readFile(a)&#123; return new Promise(resolve=&gt;&#123; setTimeout(()=&gt;&#123; console.log(a); resolve(a); &#125;,500) &#125;)&#125;readFile('a').then(()=&gt;&#123; console.log('b')&#125;).then(()=&gt;&#123; console.log('c')&#125;); //a b c// asyncå†™æ³•async function test()&#123; await readFile('a'); console.log('b'); console.log('c');&#125;test(); //a b c æ³¨æ„ï¼šawait å…³é”®å­—ä»…ä»…åœ¨ async functionä¸­æœ‰æ•ˆï¼Œå¹¶ä¸”awaitåªä¼šå½±å“asyncå‡½æ•°å†…éƒ¨çš„æ‰§è¡Œé¡ºåºã€‚å¦‚æœåœ¨ async functionå‡½æ•°ä½“å¤–ä½¿ç”¨ await ï¼Œä½ åªä¼šå¾—åˆ°ä¸€ä¸ªè¯­æ³•é”™è¯¯ï¼ˆSyntaxErrorï¼‰ã€‚ å®ç°åŸç† ç†è§£asyncåŸç†ä¹‹å‰å…ˆäº†è§£Generatorå‡½æ•°ï¼Œå…¶å®asyncæ˜¯Generatorçš„è¯­æ³•ç³–ï¼Œasync å°±ç­‰äºGenerator+è‡ªåŠ¨æ‰§è¡Œå™¨ã€‚ Generatorå‡½æ•° Generatoræ˜¯ ES6 æä¾›çš„ä¸€ç§å¼‚æ­¥ç¼–ç¨‹è§£å†³æ–¹æ¡ˆï¼Œè¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ã€‚å®ƒä¸æ™®é€šå‡½æ•°çš„åŒºåˆ«æ˜¯ï¼š functionå…³é”®å­—ä¸å‡½æ•°åä¹‹é—´æœ‰ä¸€ä¸ªæ˜Ÿå·ï¼› å‡½æ•°ä½“å†…éƒ¨ä½¿ç”¨yieldè¯­å¥ï¼Œå®šä¹‰ä¸åŒçš„å†…éƒ¨çŠ¶æ€ã€‚ 12345678function* g() &#123; yield 'a'; yield 'b'; yield 'c'; return 'ending';&#125;g(); //è¿”å›ä¸€ä¸ªå¯¹è±¡ ä¸Šé¢ä¾‹å­g()ä¸ä¼šæ‰§è¡Œï¼Œè€Œæ˜¯ä¼šè¿”å›ä¸€ä¸ªè¿­ä»£å™¨å¯¹è±¡ï¼ˆIterator Objectï¼‰ã€‚ 12var gen = g();gen.next(); // è¿”å›Object &#123;value: "a", done: false&#125; è¯¥å¯¹è±¡æœ‰ä¸€ä¸ªnextæ–¹æ³•ï¼Œè°ƒç”¨è¯¥æ–¹æ³•æ—¶ä¼šè¿›è¡Œåˆ†æ®µæ‰§è¡Œã€‚ gen.next()è¿”å›ä¸€ä¸ªå¯¹è±¡{value: â€œaâ€, done: false}ï¼Œ'aâ€™å°±æ˜¯gå‡½æ•°æ‰§è¡Œåˆ°ç¬¬ä¸€ä¸ªyieldè¯­å¥ä¹‹åå¾—åˆ°çš„å€¼ï¼Œfalseè¡¨ç¤ºgå‡½æ•°è¿˜æ²¡æœ‰æ‰§è¡Œå®Œï¼Œåªæ˜¯åœ¨è¿™æš‚åœã€‚ä»¥æ­¤ç±»æ¨ï¼Œå½“æ‰§è¡Œåˆ°ç¬¬å››ä¸ªnext()æ—¶ï¼Œè¿”å›{value: â€œendingâ€, done: true}ï¼Œè¿™æ ·ï¼Œæ•´ä¸ªgå‡½æ•°å°±è¿è¡Œå®Œæ¯•äº†ã€‚ ç»¼ä¸Šï¼šè°ƒç”¨ Generator å‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼Œä»£è¡¨ Generator å‡½æ•°çš„å†…éƒ¨æŒ‡é’ˆã€‚ä»¥åï¼Œæ¯æ¬¡è°ƒç”¨éå†å™¨å¯¹è±¡çš„nextæ–¹æ³•ï¼Œå°±ä¼šè¿”å›ä¸€ä¸ªæœ‰ç€valueå’Œdoneä¸¤ä¸ªå±æ€§çš„å¯¹è±¡ã€‚valueå±æ€§è¡¨ç¤ºå½“å‰çš„å†…éƒ¨çŠ¶æ€çš„å€¼ï¼Œæ˜¯yieldè¡¨è¾¾å¼åé¢é‚£ä¸ªè¡¨è¾¾å¼çš„å€¼ï¼›doneå±æ€§æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦éå†ç»“æŸã€‚ yield è¡¨è¾¾å¼ ç”±äº Generator å‡½æ•°è¿”å›çš„éå†å™¨å¯¹è±¡ï¼Œåªæœ‰è°ƒç”¨nextæ–¹æ³•æ‰ä¼šéå†ä¸‹ä¸€ä¸ªå†…éƒ¨çŠ¶æ€ï¼Œæ‰€ä»¥å…¶å®æä¾›äº†ä¸€ç§å¯ä»¥æš‚åœæ‰§è¡Œçš„å‡½æ•°ã€‚yieldè¡¨è¾¾å¼å°±æ˜¯æš‚åœæ ‡å¿—ã€‚ éå†å™¨å¯¹è±¡çš„nextæ–¹æ³•çš„è¿è¡Œé€»è¾‘å¦‚ä¸‹ã€‚ ï¼ˆ1ï¼‰é‡åˆ°yieldè¡¨è¾¾å¼ï¼Œå°±æš‚åœæ‰§è¡Œåé¢çš„æ“ä½œï¼Œå¹¶å°†ç´§è·Ÿåœ¨yieldåé¢çš„é‚£ä¸ªè¡¨è¾¾å¼çš„å€¼ï¼Œä½œä¸ºè¿”å›çš„å¯¹è±¡çš„valueå±æ€§å€¼ã€‚ ï¼ˆ2ï¼‰ä¸‹ä¸€æ¬¡è°ƒç”¨nextæ–¹æ³•æ—¶ï¼Œå†ç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼Œç›´åˆ°é‡åˆ°ä¸‹ä¸€ä¸ªyieldè¡¨è¾¾å¼ã€‚ ï¼ˆ3ï¼‰å¦‚æœæ²¡æœ‰å†é‡åˆ°æ–°çš„yieldè¡¨è¾¾å¼ï¼Œå°±ä¸€ç›´è¿è¡Œåˆ°å‡½æ•°ç»“æŸï¼Œç›´åˆ°returnè¯­å¥ä¸ºæ­¢ï¼Œå¹¶å°†returnè¯­å¥åé¢çš„è¡¨è¾¾å¼çš„å€¼ï¼Œä½œä¸ºè¿”å›çš„å¯¹è±¡çš„valueå±æ€§å€¼ã€‚ ï¼ˆ4ï¼‰å¦‚æœè¯¥å‡½æ•°æ²¡æœ‰returnè¯­å¥ï¼Œåˆ™è¿”å›çš„å¯¹è±¡çš„valueå±æ€§å€¼ä¸ºundefinedã€‚ Generator å‡½æ•°å¯ä»¥ä¸ç”¨yieldè¡¨è¾¾å¼ï¼Œè¿™æ—¶å°±å˜æˆäº†ä¸€ä¸ªå•çº¯çš„æš‚ç¼“æ‰§è¡Œå‡½æ•°ã€‚ 123456789function* f() &#123; console.log('æ‰§è¡Œäº†ï¼')&#125;var generator = f();setTimeout(function () &#123; generator.next()&#125;, 2000); ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•°få¦‚æœæ˜¯æ™®é€šå‡½æ•°ï¼Œåœ¨ä¸ºå˜é‡generatorèµ‹å€¼æ—¶å°±ä¼šæ‰§è¡Œã€‚ä½†æ˜¯ï¼Œå‡½æ•°fæ˜¯ä¸€ä¸ª Generator å‡½æ•°ï¼Œå°±å˜æˆåªæœ‰è°ƒç”¨nextæ–¹æ³•æ—¶ï¼Œå‡½æ•°fæ‰ä¼šæ‰§è¡Œã€‚ æ³¨æ„ï¼šyieldè¡¨è¾¾å¼åªèƒ½ç”¨åœ¨ Generator å‡½æ•°é‡Œé¢ï¼Œç”¨åœ¨å…¶ä»–åœ°æ–¹éƒ½ä¼šæŠ¥é”™ã€‚ ç°åœ¨å›è¿‡å¤´å†æ¥çœ‹ï¼Œå°†å¼€å¤´é‚£æ®µä»£ç æ”¹æˆGeneratorå‡½æ•° 1234567891011121314151617function readFile(a)&#123; return new Promise(resolve=&gt;&#123; setTimeout(()=&gt;&#123; console.log(a); resolve(a); &#125;,500) &#125;)&#125;function *foo()&#123; var result = yield readFile('a'); console.log('b');&#125;var it = foo();var result = it.next(); //nextè¿”å›çš„valueæ˜¯readFileå‡½æ•°è¿”å›çš„Promiseå¯¹è±¡result.value.then(()=&gt;&#123; //ç»™Promiseå¯¹è±¡å¢åŠ æˆåŠŸçš„å›è°ƒ it.next(); //å½“PromiseæˆåŠŸåæ¢å¤foo()å‡½æ•°æ‰§è¡Œ&#125;); //a b ä½¿ç”¨Generatorå‡½æ•°æ‰§è¡Œæ—¶ï¼Œæ¯æ¬¡éƒ½éœ€è¦next()æ¥æ‰§è¡Œï¼Œå¯ä»¥çœ‹å‡ºæ§åˆ¶fooå‡½æ•°çš„æš‚åœå’Œç»§ç»­å´éœ€è¦å†™é¢å¤–çš„ä»£ç ï¼Œå¦‚ä½•æ§åˆ¶Generatorå‡½æ•°è‡ªåŠ¨æ‰§è¡Œnext() æ–¹æ³•ï¼Ÿé’ˆå¯¹ä¸Šé¢ä»£ç å¯ä»¥ç”¨é€’å½’æ¥å®ç°ã€‚ 1234567891011121314151617181920212223242526function run(g)&#123; var res = g.next(); //res.valueæ˜¯ä¸ªpromiseå¯¹è±¡ if(!res.done)&#123; res.value.then(()=&gt;&#123; //promiseè§£å†³äº†æ‰è°ƒç”¨next()ç»§ç»­æ‰§è¡Œç”Ÿæˆå™¨å†…éƒ¨å‡½æ•° run(g); &#125;) &#125;&#125;// testfunction readFile(a)&#123; return new Promise(resolve=&gt;&#123; setTimeout(()=&gt;&#123; console.log(a); resolve(a); &#125;,500) &#125;)&#125;function *foo()&#123; console.log('a'); var result = yield readFile('b'); console.log('c');&#125;run(foo());console.log('d');foo() è¿è¡Œç»“æœä¸ºa d b cã€‚åˆ†æï¼šåœ¨jsè¿è¡Œä¸­ï¼Œç¬¬ä¸€æ¬¡æ‰§è¡Œfoo().next()ä¼šæ‰“å°å‡ºaï¼Œç„¶åç”Ÿæˆå™¨å†…å‡½æ•°æš‚åœï¼Œå› ä¸ºreadFileè¿”å›ä¸€ä¸ªpromiseå¯¹è±¡å¹¶ä¸”è¿›å…¥setTimeoutè¿›è¡Œå¼‚æ­¥æ‰§è¡Œï¼Œæ­¤æ—¶è¿›å…¥å¼‚æ­¥é˜Ÿåˆ—ç­‰å¾…æ‰§è¡Œï¼Œä¸»çº¿ç¨‹ç»§ç»­è¿è¡Œï¼Œå†æ‰“å‡ºdï¼Œç­‰å®šæ—¶å™¨åˆ°äº†ï¼Œå¼‚æ­¥é˜Ÿåˆ—ä¾æ¬¡æ‰§è¡Œï¼Œæ‰“å‡ºbç­‰åˆ°ç»“æœåï¼Œå†æ‰§è¡Œyieldåé¢çš„ä»£ç ï¼Œæ‰“å‡ºcã€‚å†çœ‹asyncå†™æ³•ï¼š 123456// asyncå†™æ³•async function foo() &#123; console.log('a'); var result = await readFile('b'); console.log('c');&#125; å¯ä»¥çœ‹å‡ºasyncå‡½æ•°å†™æ³•ï¼ŒGeneratorå‡½æ•°å‡½æ•°å¾ˆç›¸è¿‘ï¼Œä¸Šé¢ä»£ç åªæ˜¯ç®€å•æ¨¡æ‹Ÿasyncçš„åŸç†ï¼Œasyncå¯ä»¥çœ‹æˆGenerator+è‡ªåŠ¨æ‰§è¡Œå™¨çš„è¯­æ³•ç³–ã€‚]]></content>
      <categories>
        <category>å‰ç«¯å¼€å‘</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>Promise</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ğŸ”¥åŸºäºtaro + dva + typescript å¼€å‘çš„éŸ³ä¹æ’­æ”¾å™¨å°ç¨‹åº]]></title>
    <url>%2F2019%2F01%2F11%2Ftaro-music%2F</url>
    <content type="text"><![CDATA[ç®€ä»‹ æœ¬é¡¹ç›®æ˜¯åŸºäº Taro + Dva + TypeScript å¼€å‘çš„éŸ³ä¹æ’­æ”¾å™¨å°ç¨‹åºï¼Œæ˜¯ä¸ªäººç”¨äºå­¦ä¹ taroæ¡†æ¶å¼€å‘çš„ï¼ŒåŠŸèƒ½ä¹Ÿç›¸å¯¹ç®€å•ï¼Œå½“ç„¶ä¹Ÿå­˜åœ¨ä¸€äº›ä¸è¶³ï¼Œå‰æœŸæ˜¯ç”¨taroçš„reduxç‰ˆæœ¬å¼€å‘ï¼Œåé¢å‘ç°ä¸šåŠ¡ä»£ç å’Œé¡µé¢è€¦åˆåº¦é«˜ï¼Œå°±åŠ å…¥äº†dvaï¼Œä¸€ä¸ªåŸºäº redux å’Œ redux-saga çš„æ•°æ®æµæ–¹æ¡ˆï¼Œè¿™é‡Œåªç”¨äº†dvaçš„ä¸€ä¸ªæ ¸å¿ƒ dva-coreï¼Œç”¨äºmodelå±‚æ¥é™ä½è€¦åˆï¼Œç”¨ dva-model-extend å¤ç”¨ modelï¼Œå¤§å¤§æå‡äº†å¼€å‘ä½“éªŒï¼Œæ•ˆæœä¸é”™ã€‚åå°æ˜¯ç½‘æ˜“äº‘éŸ³ä¹NeteaseCloudMusicApi æä¾›çš„APIï¼Œç›®å‰è¯¥é¡¹ç›®è¿˜æ²¡æœ‰æ­£å¼ä¸Šçº¿åˆ°å°ç¨‹åºã€‚ Usage æœ¬é¡¹ç›®å·²ç»ä½¿ç”¨äº†çº¿ä¸Šapiæ¥å£ï¼Œæ‰€ä»¥æ— éœ€è¿è¡Œåå°ä¹Ÿå¯ä»¥è·å–æ•°æ®ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥åœ¨æœ¬åœ°è¿è¡Œ NeteaseCloudMusicApi é¡¹ç›®ï¼Œå¼€å¯è·å–æ­Œæ›²æœåŠ¡ï¼Œé»˜è®¤ç«¯å£æ˜¯3000 123$ git clone git@github.com:Binaryify/NeteaseCloudMusicApi.git$ cd NeteaseCloudMusicApi &amp;&amp; npm install$ npm start åœ¨è¿è¡Œæœ¬é¡¹ç›®å‰ï¼Œç¡®ä¿ç³»ç»Ÿå·²ç»å…¨å±€å®‰è£…äº†taroï¼Œå®‰è£…å¯è¯¦è§è¿™é‡Œï¼Œå®‰è£…å®Œè¿è¡Œé¡¹ç›®åä½¿ç”¨ å¾®ä¿¡å¼€å‘è€…å·¥å…· å¯¼å…¥é¡¹ç›®ï¼ˆæœ¬é¡¹ç›®æ ¹ç›®å½•è¿›è¡Œå¯¼å…¥ï¼‰ï¼Œå¼€å‘å‰æ³¨æ„äº‹é¡¹å¯æŸ¥çœ‹: https://nervjs.github.io/taro/docs/before-dev-remind.html 12345678910# git clone$ git clone https://github.com/huangzhuangjia/taro-music.git# install$ npm i# or yarn install$ yarn install# development$ npm run dev:weapp# production$ npm run build:weapp é¡¹ç›®åœ°å€ï¼šhttps://github.com/huangzhuangjia/taro-music]]></content>
      <categories>
        <category>å‰ç«¯å¼€å‘</category>
      </categories>
      <tags>
        <tag>å°ç¨‹åº</tag>
        <tag>React</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å‰ç«¯æ€§èƒ½ä¼˜åŒ–æ€»ç»“]]></title>
    <url>%2F2018%2F03%2F14%2Fperformance-optimization%2F</url>
    <content type="text"><![CDATA[ä¼˜åŒ–çš„åŸåˆ™å’Œæ–¹å‘ å‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„åŸåˆ™å…¶å®å°±æ˜¯æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œå…·ä½“å®ç°çš„ç›®æ ‡å¤§ä½“æœ‰ä¸¤ä¸ªï¼š åˆç†ä½¿ç”¨å†…å­˜æˆ–ç¼“å­˜ï¼Œå‡å°‘è¯·æ±‚ï¼› å‡å°‘CPUæˆ–è€…GPUçš„è®¡ç®—ï¼Œè¾¾åˆ°æ›´å¿«çš„å±•ç°ã€‚ å‰ç«¯åœ¨æ€§èƒ½ä¼˜åŒ–çš„æ–¹å‘å¤§ä½“æœ‰ä¸¤ä¸ªï¼š å‡å°‘é¡µé¢ä½“ç§¯ï¼Œæå‡ç½‘ç»œåŠ è½½ ä¼˜åŒ–é¡µé¢æ¸²æŸ“ è¯¦æƒ… å‡å°‘é¡µé¢ä½“ç§¯ï¼Œæå‡ç½‘ç»œåŠ è½½ 1ã€é™æ€èµ„æºçš„å‹ç¼©åˆå¹¶ï¼ˆJS ä»£ç å‹ç¼©åˆå¹¶ã€CSS ä»£ç å‹ç¼©åˆå¹¶ã€é›ªç¢§å›¾ï¼‰ å‹ç¼©æ˜¯ä¸ºäº†å‡å°æ–‡ä»¶ä½“ç§¯ï¼Œå‡è½»ç½‘ç»œè´Ÿè½½ï¼Œè¾¾åˆ°æ›´å¿«çš„ä¸‹è½½ï¼› åˆå¹¶å’Œé›ªç¢§å›¾éƒ½æ˜¯ä¸ºäº†å‡å°‘æ–‡ä»¶çš„è¯·æ±‚æ¬¡æ•°ï¼Œä½†ä¸æ˜¯åˆå¹¶çš„å°±ä¸€ä¸ªæ¯”æ²¡æœ‰åˆå¹¶æ—¶åŠ è½½å¿«ï¼Œè¦çœ‹åˆå¹¶ä¹‹åçš„ä½“ç§¯ï¼Œè‹¥æ–‡ä»¶åˆå¹¶åå¤ªå¤§äº†ä¹Ÿä¸å¤ªåˆ©äºæ€§èƒ½ä¼˜åŒ–ï¼Œæ‰€ä»¥åœ¨å®é™…çš„é¡¹ç›®ä¸­è¦åšå¥½æƒè¡¡ã€‚ 2ã€é™æ€èµ„æºç¼“å­˜ï¼ˆèµ„æºåç§°åŠ  MD5 æˆ³ï¼‰ å¯ä»¥é€šè¿‡é“¾æ¥åç§°æ§åˆ¶ç¼“å­˜ï¼šé€šè¿‡å‰ç«¯æ„å»ºå·¥å…·ä¸ºæ‰“åŒ…çš„æ–‡ä»¶æ·»åŠ md5åç¼€ï¼Œè¿™æ ·å½“æ‰“åŒ…ä¸Šçº¿æ—¶è¯·æ±‚çš„é“¾æ¥å‘ç”Ÿæ”¹å˜ï¼Œè¿™æ ·å¯ä»¥é˜²æ­¢ç”±äºç¼“å¯¼è‡´é™æ€èµ„æºæ›´æ–°å¤±æ•ˆï¼› 3ã€ ä½¿ç”¨ CDN è®©èµ„æºåŠ è½½æ›´å¿« ä¼˜åŒ–é¡µé¢æ¸²æŸ“ 1ã€CSS æ”¾å‰é¢ï¼ŒJS æ”¾åé¢ æµè§ˆå™¨åœ¨æ¸²æŸ“è§£æè¿‡ç¨‹ä¸­ï¼Œè‹¥é‡åˆ°&lt;link href=&quot;...&quot;&gt;å’Œ&lt;script src=&quot;...&quot;&gt;è¿™ç§å¤–é“¾åŠ è½½ CSS å’Œ JS çš„æ ‡ç­¾ï¼Œæµè§ˆå™¨ä¼šå¼‚æ­¥ä¸‹è½½å¹¶è§£ææ‰§è¡Œã€‚CSSæ”¾åœ¨å¤´éƒ¨æ˜¯ä¸ºäº†è®©æµè§ˆå™¨å°½æ—©è§£ææ‰§è¡ŒCssæ–‡ä»¶ï¼Œæ¸²æŸ“å‡ºé¡µé¢çš„æ ·å¼ï¼Œè‹¥æ”¾åœ¨åº•éƒ¨ä¼šå‡ºç°æ¸²æŸ“å¡é¡¿çš„æƒ…å†µï¼Œå½±å“æ€§èƒ½å’Œä½“éªŒã€‚ è€Œå½“æ¸²æŸ“è¿‡ç¨‹ä¸­é‡åˆ°scriptæ ‡ç­¾æ—¶å°±ä¼šæ‰§è¡ŒJSä»£ç ï¼Œä»é˜»å¡é¡µé¢æ¸²æŸ“ï¼Œå› ä¸ºæµè§ˆå™¨æ¸²æŸ“å’Œ JS æ‰§è¡Œå…±ç”¨ä¸€ä¸ªçº¿ç¨‹ï¼Œè€Œä¸”è¿™é‡Œå¿…é¡»æ˜¯å•çº¿ç¨‹æ“ä½œï¼Œå¤šçº¿ç¨‹ä¼šäº§ç”Ÿæ¸²æŸ“ DOM å†²çªã€‚æ‰€ä»¥è¦å°†JSæ”¾åœ¨åº•éƒ¨ï¼Œç­‰åˆ°é¡µé¢æ¸²æŸ“å®Œæˆä¹‹åå†å»è§£ææ‰§è¡Œjsï¼Œä¿è¯ç”¨æˆ·ä½“éªŒæ€§ã€‚å› ä¸ºæµè§ˆå™¨æ¸²æŸ“å’Œ JS æ‰§è¡Œå…±ç”¨ä¸€ä¸ªçº¿ç¨‹ï¼Œè€Œä¸”è¿™é‡Œå¿…é¡»æ˜¯å•çº¿ç¨‹æ“ä½œï¼Œå¤šçº¿ç¨‹ä¼šäº§ç”Ÿæ¸²æŸ“ DOM å†²çªã€‚ å¦å¤–ï¼ŒJS æ‰§è¡Œå¦‚æœæ¶‰åŠ DOM æ“ä½œï¼Œå¾—ç­‰å¾… DOM è§£æå®Œæˆæ‰è¡Œï¼ŒJS æ”¾åœ¨åº•éƒ¨æ‰§è¡Œæ—¶ï¼ŒHTML è‚¯å®šéƒ½è§£ææˆäº† DOM ç»“æ„ã€‚JS å¦‚æœæ”¾åœ¨ HTML é¡¶éƒ¨ï¼ŒJS æ‰§è¡Œçš„æ—¶å€™ HTML è¿˜æ²¡æ¥å¾—åŠè½¬æ¢ä¸º DOM ç»“æ„ï¼Œå¯èƒ½ä¼šæŠ¥é”™ã€‚ 2ã€æ‡’åŠ è½½ï¼ˆå›¾ç‰‡æ‡’åŠ è½½ã€ä¸‹æ‹‰åŠ è½½æ›´å¤šï¼‰ å…ˆå°†srcèµ‹å€¼æˆä¸€ä¸ªé€šç”¨çš„é¢„è§ˆå›¾ï¼Œä¸‹æ‹‰æ—¶å€™å†åŠ¨æ€èµ‹å€¼æˆæ­£å¼çš„å›¾ç‰‡ã€‚å¦‚ä¸‹ï¼Œpreview.pngæ˜¯é¢„è§ˆå›¾ç‰‡ï¼Œæ¯”è¾ƒå°ï¼ŒåŠ è½½å¾ˆå¿«ï¼Œè€Œä¸”å¾ˆå¤šå›¾ç‰‡éƒ½å…±ç”¨è¿™ä¸ªpreview.pngï¼ŒåŠ è½½ä¸€æ¬¡å³å¯ã€‚å¾…é¡µé¢ä¸‹æ‹‰ï¼Œå›¾ç‰‡æ˜¾ç¤ºå‡ºæ¥æ—¶ï¼Œå†å»æ›¿æ¢srcä¸ºdata-srcçš„å€¼ã€‚ï¼ˆdata-å¼€å¤´çš„å±æ€§æµè§ˆå™¨æ¸²æŸ“çš„æ—¶å€™ä¼šå¿½ç•¥æ‰ï¼Œæé«˜æ¸²æŸ“æ€§èƒ½ï¼‰ 1&lt;img src="preview.png" data-src="realImg.png"/&gt; 3ã€å‡å°‘DOM æŸ¥è¯¢ï¼Œå¯¹ DOM æŸ¥è¯¢åšç¼“å­˜ 1234567// åªæŸ¥è¯¢ä¸€ä¸ª DOM ï¼Œç¼“å­˜åœ¨ pList ä¸­äº†var pList = document.getElementsByTagName('p') for (var i = 0; i &lt; pList.length; i++) &#123;&#125;// æ¯æ¬¡å¾ªç¯ï¼Œéƒ½ä¼šæŸ¥è¯¢ DOM ï¼Œè€—è´¹æ€§èƒ½for (var i = 0; i &lt; document.getElementsByTagName('p').length; i++) &#123;&#125; 4ã€å‡å°‘DOM æ“ä½œï¼Œå¤šä¸ªæ“ä½œå°½é‡åˆå¹¶åœ¨ä¸€èµ·æ‰§è¡Œï¼ˆDocumentFragmentï¼‰ DOM æ“ä½œæ˜¯éå¸¸è€—è´¹æ€§èƒ½çš„ï¼Œå› æ­¤æ’å…¥å¤šä¸ªæ ‡ç­¾æ—¶ï¼Œå…ˆæ’å…¥ Fragment ç„¶åå†ç»Ÿä¸€æ’å…¥ DOMã€‚å› ä¸ºFragmentæ–‡æ¡£ç‰‡æ®µå­˜åœ¨äºå†…å­˜ä¸­ï¼Œå¹¶ä¸åœ¨DOMæ ‘ä¸­ï¼Œæ‰€ä»¥å°†å­å…ƒç´ æ’å…¥åˆ°æ–‡æ¡£ç‰‡æ®µæ—¶ä¸ä¼šå¼•èµ·é¡µé¢å›æµã€‚ 12345678910var listNode = document.getElementById('list')// è¦æ’å…¥ 10 ä¸ª li æ ‡ç­¾var frag = document.createDocumentFragment();var i, li;for(i = 0; i &lt; 10; i++) &#123; li = document.createElement("li"); li.innerHTML = "List item " + i; frag.appendChild(li); //å…ˆæ”¾åœ¨ frag ä¸­ï¼Œæœ€åä¸€æ¬¡æ€§æ’å…¥åˆ° DOM ç»“æ„ä¸­ã€‚&#125;listNode.appendChild(frag); 5ã€äº‹ä»¶èŠ‚æµ åœ¨å¼€å‘è¿‡ç¨‹ä¸­ä¼šé‡åˆ°é¡µé¢ä¸€äº›é¢‘ç¹è§¦å‘çš„äº‹ä»¶ï¼Œæ¯”å¦‚mouseoverã€scrollã€resizeç­‰äº‹ä»¶ã€‚ä¸€ç§’å¯ä»¥æ‰§è¡Œå¾ˆå¤šæ¬¡ï¼Œè¿™æ ·ä¼šé€ æˆä¸¥é‡çš„é¡µé¢æ€§èƒ½é—®é¢˜ï¼Œå¯¼è‡´é¡µé¢cå‡ºç°å¡é¡¿ç”šè‡³æµè§ˆå™¨å´©æºƒã€‚å› æ­¤æˆ‘ä»¬éœ€è¦å¯¹äº‹ä»¶è¿›è¡ŒèŠ‚æµï¼Œç®€å•çš„è¯´å°±æ˜¯æ§åˆ¶å…¶æ‰§è¡Œçš„æ¬¡æ•°ã€‚è¿™é‡Œå°±æ¶‰åŠåˆ°äº†å¸¸ç”¨åˆ°çš„jsçš„èŠ‚æµå’Œé˜²æŠ–åŠŸèƒ½å®ç°ã€‚ 1ã€ é˜²æŠ–ï¼ˆdebounceï¼‰ï¼šåœ¨äº‹ä»¶è¢«è§¦å‘nç§’åå†æ‰§è¡Œå›è°ƒï¼Œå¦‚æœåœ¨è¿™nç§’å†…åˆè¢«è§¦å‘ï¼Œåˆ™é‡æ–°è®¡æ—¶ã€‚ 1234567891011121314151617function debounce(fn, delay) &#123; // å®šæ—¶å™¨ï¼Œç”¨æ¥ setTimeout var timer // è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°ä¼šåœ¨ä¸€ä¸ªæ—¶é—´åŒºé—´ç»“æŸåçš„ delay æ¯«ç§’æ—¶æ‰§è¡Œ fn å‡½æ•° return function () &#123; // ä¿å­˜å‡½æ•°è°ƒç”¨æ—¶çš„ä¸Šä¸‹æ–‡å’Œå‚æ•°ï¼Œä¼ é€’ç»™ fn var context = this var args = arguments // æ¯æ¬¡è¿™ä¸ªè¿”å›çš„å‡½æ•°è¢«è°ƒç”¨ï¼Œå°±æ¸…é™¤å®šæ—¶å™¨ï¼Œä»¥ä¿è¯ä¸æ‰§è¡Œ fn timer &amp;&amp; clearTimeout(timer) // å½“è¿”å›çš„å‡½æ•°è¢«æœ€åä¸€æ¬¡è°ƒç”¨åï¼ˆä¹Ÿå°±æ˜¯ç”¨æˆ·åœæ­¢äº†æŸä¸ªè¿ç»­çš„æ“ä½œï¼‰ï¼Œ // å†è¿‡ delay æ¯«ç§’å°±æ‰§è¡Œ fn timer = setTimeout(function () &#123; fn.apply(context, args) &#125;, delay) &#125;&#125; 2ã€èŠ‚æµï¼ˆthrottleï¼‰ï¼šè§„å®šä¸€ä¸ªå•ä½æ—¶é—´ï¼Œåœ¨è¿™ä¸ªå•ä½æ—¶é—´å†…ï¼Œåªèƒ½æœ‰ä¸€æ¬¡è§¦å‘äº‹ä»¶çš„å›è°ƒå‡½æ•°æ‰§è¡Œï¼Œå¦‚æœåœ¨åŒä¸€ä¸ªå•ä½æ—¶é—´å†…æŸäº‹ä»¶è¢«è§¦å‘å¤šæ¬¡ï¼Œåªæœ‰ä¸€æ¬¡èƒ½ç”Ÿæ•ˆã€‚ 123456789101112131415161718192021222324252627282930function throttle(fn, threshhold) &#123; // è®°å½•ä¸Šæ¬¡æ‰§è¡Œçš„æ—¶é—´ var last // å®šæ—¶å™¨ var timer // é»˜è®¤é—´éš”ä¸º 250ms threshhold || (threshhold = 250) // è¿”å›çš„å‡½æ•°ï¼Œæ¯è¿‡ threshhold æ¯«ç§’å°±æ‰§è¡Œä¸€æ¬¡ fn å‡½æ•° return function () &#123; // ä¿å­˜å‡½æ•°è°ƒç”¨æ—¶çš„ä¸Šä¸‹æ–‡å’Œå‚æ•°ï¼Œä¼ é€’ç»™ fn var context = this var args = arguments var now = +new Date() // å¦‚æœè·ç¦»ä¸Šæ¬¡æ‰§è¡Œ fn å‡½æ•°çš„æ—¶é—´å°äº threshholdï¼Œé‚£ä¹ˆå°±æ”¾å¼ƒ // æ‰§è¡Œ fnï¼Œå¹¶é‡æ–°è®¡æ—¶ if (last &amp;&amp; now &lt; last + threshhold) &#123; timer &amp;&amp; clearTimeout(timer) // ä¿è¯åœ¨å½“å‰æ—¶é—´åŒºé—´ç»“æŸåï¼Œå†æ‰§è¡Œä¸€æ¬¡ fn timer = setTimeout(function () &#123; last = now fn.apply(context, args) &#125;, threshhold) // åœ¨æ—¶é—´åŒºé—´çš„æœ€å¼€å§‹å’Œåˆ°è¾¾æŒ‡å®šé—´éš”çš„æ—¶å€™æ‰§è¡Œä¸€æ¬¡ fn &#125; else &#123; last = now fn.apply(context, args) &#125; &#125;&#125; 6ã€å°½æ—©æ‰§è¡Œæ“ä½œï¼ˆDOMContentLoadedï¼‰ 123456789window.addEventListener('load', function () &#123; // é¡µé¢çš„å…¨éƒ¨èµ„æºåŠ è½½å®Œæ‰ä¼šæ‰§è¡Œï¼ŒåŒ…æ‹¬å›¾ç‰‡ã€è§†é¢‘ç­‰&#125;)document.addEventListener('DOMContentLoaded', function () &#123; // DOM æ¸²æŸ“å®Œå³å¯æ‰§è¡Œï¼Œæ­¤æ—¶å›¾ç‰‡ã€è§†é¢‘è¿˜å¯èƒ½æ²¡æœ‰åŠ è½½å®Œ&#125;)$(document).ready(&#123;function () &#123; // åŒDOMContentLoaded&#125;) 7ã€ä½¿ç”¨ é¢„æ¸²æŸ“ æˆ–è€… SSRåç«¯æ¸²æŸ“ï¼Œæ•°æ®ç›´æ¥è¾“å‡ºåˆ° HTML ä¸­ï¼Œå‡å°‘æµè§ˆå™¨ä½¿ç”¨ JS æ¨¡æ¿æ¸²æŸ“é¡µé¢ HTML çš„æ—¶é—´ (å¦‚Vue SSR)ï¼ŒåŒæ—¶ä¹Ÿæœ‰åˆ©äºç½‘ç«™çš„SEOã€‚]]></content>
      <categories>
        <category>å‰ç«¯å¼€å‘</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>æ€§èƒ½ä¼˜åŒ–</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ·±å…¥ç†è§£Vueå“åº”å¼åŸç†]]></title>
    <url>%2F2018%2F02%2F07%2FAbout-responsive-of-Vue%2F</url>
    <content type="text"><![CDATA[åˆæ­¥ æœ€è¿‘ä¸€æ®µæ—¶é—´åœ¨é˜…è¯»Vueæºç ï¼Œä»å®ƒçš„æ ¸å¿ƒåŸç†å…¥æ‰‹ï¼Œå¼€å§‹äº†æºç çš„å­¦ä¹ ï¼Œè€Œå…¶æ ¸å¿ƒåŸç†å°±æ˜¯å…¶æ•°æ®çš„å“åº”å¼ï¼Œè®²åˆ°Vueçš„å“åº”å¼åŸç†ï¼Œæˆ‘ä»¬å¯ä»¥ä»å®ƒçš„å…¼å®¹æ€§è¯´èµ·ï¼ŒVueä¸æ”¯æŒIE8ä»¥ä¸‹ç‰ˆæœ¬çš„æµè§ˆå™¨ï¼Œå› ä¸ºVueæ˜¯åŸºäº Object.defineProperty æ¥å®ç°æ•°æ®å“åº”çš„ï¼Œè€Œ Object.defineProperty æ˜¯ ES5 ä¸­ä¸€ä¸ªæ— æ³• shim çš„ç‰¹æ€§ï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆ Vue ä¸æ”¯æŒ IE8 ä»¥åŠæ›´ä½ç‰ˆæœ¬æµè§ˆå™¨çš„åŸå› ï¼›Vueé€šè¿‡Object.definePropertyçš„ getter/setter å¯¹æ”¶é›†çš„ä¾èµ–é¡¹è¿›è¡Œç›‘å¬,åœ¨å±æ€§è¢«è®¿é—®å’Œä¿®æ”¹æ—¶é€šçŸ¥å˜åŒ–,è¿›è€Œæ›´æ–°è§†å›¾æ•°æ®ï¼› å—ç°ä»£JavaScript çš„é™åˆ¶ (ä»¥åŠåºŸå¼ƒ Object.observe)ï¼ŒVueä¸èƒ½æ£€æµ‹åˆ°å¯¹è±¡å±æ€§çš„æ·»åŠ æˆ–åˆ é™¤ã€‚ç”±äº Vue ä¼šåœ¨åˆå§‹åŒ–å®ä¾‹æ—¶å¯¹å±æ€§æ‰§è¡Œ getter/setter è½¬åŒ–è¿‡ç¨‹ï¼Œæ‰€ä»¥å±æ€§å¿…é¡»åœ¨ data å¯¹è±¡ä¸Šå­˜åœ¨æ‰èƒ½è®©Vueè½¬æ¢å®ƒï¼Œè¿™æ ·æ‰èƒ½è®©å®ƒæ˜¯å“åº”çš„ã€‚ æˆ‘ä»¬è¿™é‡Œæ˜¯æ ¹æ®Vue2.3æºç è¿›è¡Œåˆ†æ,Vueæ•°æ®å“åº”å¼å˜åŒ–ä¸»è¦æ¶‰åŠ Observer, Watcher , Dep è¿™ä¸‰ä¸ªä¸»è¦çš„ç±»ï¼›å› æ­¤è¦å¼„æ¸…Vueå“åº”å¼å˜åŒ–éœ€è¦æ˜ç™½è¿™ä¸ªä¸‰ä¸ªç±»ä¹‹é—´æ˜¯å¦‚ä½•è¿ä½œè”ç³»çš„ï¼›ä»¥åŠå®ƒä»¬çš„åŸç†ï¼Œè´Ÿè´£çš„é€»è¾‘æ“ä½œã€‚é‚£ä¹ˆæˆ‘ä»¬ä»ä¸€ä¸ªç®€å•çš„Vueå®ä¾‹çš„ä»£ç æ¥åˆ†æVueçš„å“åº”å¼åŸç† 123456789101112131415var vue = new Vue(&#123; el: "#app", data: &#123; name: 'Junga' &#125;, created () &#123; this.helloWorld() &#125;, methods: &#123; helloWorld: function() &#123; console.log('my name is' + this.name) &#125; &#125; ...&#125;) Vueåˆå§‹åŒ–å®ä¾‹ æ ¹æ®Vueçš„ç”Ÿå‘½å‘¨æœŸæˆ‘ä»¬çŸ¥é“ï¼ŒVueé¦–å…ˆä¼šè¿›è¡Œinitåˆå§‹åŒ–æ“ä½œï¼›æºç åœ¨src/core/instance/init.jsä¸­ 1234567891011121314/*åˆå§‹åŒ–ç”Ÿå‘½å‘¨æœŸ*/initLifecycle(vm)/*åˆå§‹åŒ–äº‹ä»¶*/initEvents(vm)Object.defineProperty /*åˆå§‹åŒ–render*/initRender(vm)/*è°ƒç”¨beforeCreateé’©å­å‡½æ•°å¹¶ä¸”è§¦å‘beforeCreateé’©å­äº‹ä»¶*/callHook(vm, 'beforeCreate')initInjections(vm) // resolve injections before data/props/*åˆå§‹åŒ–propsã€methodsã€dataã€computedä¸watch*/initState(vm)initProvide(vm) // resolve provide after data/props/*è°ƒç”¨createdé’©å­å‡½æ•°å¹¶ä¸”è§¦å‘createdé’©å­äº‹ä»¶*/callHook(vm, 'created') ä»¥ä¸Šä»£ç å¯ä»¥çœ‹åˆ° initState(vm) æ˜¯ç”¨æ¥åˆå§‹åŒ–props,methods,data,computedå’Œwatch; src/core/instance/state.js 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152/*åˆå§‹åŒ–propsã€methodsã€dataã€computedä¸watch*/export function initState (vm: Component) &#123; vm._watchers = [] const opts = vm.$options /*åˆå§‹åŒ–props*/ if (opts.props) initProps(vm, opts.props) /*åˆå§‹åŒ–æ–¹æ³•*/ if (opts.methods) initMethods(vm, opts.methods) /*åˆå§‹åŒ–data*/ if (opts.data) &#123; initData(vm) &#125; else &#123; /*è¯¥ç»„ä»¶æ²¡æœ‰dataçš„æ—¶å€™ç»‘å®šä¸€ä¸ªç©ºå¯¹è±¡*/ observe(vm._data = &#123;&#125;, true /* asRootData */) &#125; /*åˆå§‹åŒ–computed*/ if (opts.computed) initComputed(vm, opts.computed) /*åˆå§‹åŒ–watchers*/ if (opts.watch) initWatch(vm, opts.watch)&#125;.../*åˆå§‹åŒ–data*/function initData (vm: Component) &#123; /*å¾—åˆ°dataæ•°æ®*/ let data = vm.$options.data data = vm._data = typeof data === 'function' ? getData(data, vm) : data || &#123;&#125;defi ... //éå†dataä¸­çš„æ•°æ® while (i--) &#123; /*ä¿è¯dataä¸­çš„keyä¸ä¸propsä¸­çš„keyé‡å¤ï¼Œpropsä¼˜å…ˆï¼Œå¦‚æœæœ‰å†²çªä¼šäº§ç”Ÿwarning*/ if (props &amp;&amp; hasOwn(props, keys[i])) &#123; process.env.NODE_ENV !== 'production' &amp;&amp; warn( `The data property "$&#123;keys[i]&#125;" is already declared as a prop. ` + `Use prop default value instead.`, vm ) &#125; else if (!isReserved(keys[i])) &#123; /*åˆ¤æ–­æ˜¯å¦æ˜¯ä¿ç•™å­—æ®µ*/ /*è¿™é‡Œæ˜¯æˆ‘ä»¬å‰é¢è®²è¿‡çš„ä»£ç†ï¼Œå°†dataä¸Šé¢çš„å±æ€§ä»£ç†åˆ°äº†vmå®ä¾‹ä¸Š*/ proxy(vm, `_data`, keys[i]) &#125; &#125; // observe data /*è¿™é‡Œé€šè¿‡observeå®ä¾‹åŒ–Observeå¯¹è±¡ï¼Œå¼€å§‹å¯¹æ•°æ®è¿›è¡Œç»‘å®šï¼ŒasRootDataç”¨æ¥æ ¹æ•°æ®ï¼Œç”¨æ¥è®¡ç®—å®ä¾‹åŒ–æ ¹æ•°æ®çš„ä¸ªæ•°ï¼Œä¸‹é¢ä¼šè¿›è¡Œé€’å½’observeè¿›è¡Œå¯¹æ·±å±‚å¯¹è±¡çš„ç»‘å®šã€‚åˆ™asRootDataä¸ºétrue*/ observe(data, true /* asRootData */)&#125; 1ã€initData ç°åœ¨æˆ‘ä»¬é‡ç‚¹åˆ†æä¸‹initDataï¼Œè¿™é‡Œä¸»è¦åšäº†ä¸¤ä»¶äº‹ï¼Œä¸€æ˜¯å°†_dataä¸Šé¢çš„æ•°æ®ä»£ç†åˆ°vmä¸Šï¼ŒäºŒæ˜¯é€šè¿‡æ‰§è¡Œ *observe(data, true / asRootData */)**å°†æ‰€æœ‰dataå˜æˆå¯è§‚å¯Ÿçš„ï¼Œå³å¯¹dataå®šä¹‰çš„æ¯ä¸ªå±æ€§è¿›è¡Œgetter/setteræ“ä½œï¼Œè¿™é‡Œå°±æ˜¯Vueå®ç°å“åº”å¼çš„åŸºç¡€ï¼›observeçš„å®ç°å¦‚ä¸‹ src/core/observer/index.js 1234567891011121314151617181920212223242526 /*å°è¯•åˆ›å»ºä¸€ä¸ªObserverå®ä¾‹ï¼ˆ__ob__ï¼‰ï¼Œå¦‚æœæˆåŠŸåˆ›å»ºObserverå®ä¾‹åˆ™è¿”å›æ–°çš„Observerå®ä¾‹ï¼Œå¦‚æœå·²æœ‰Observerå®ä¾‹åˆ™è¿”å›ç°æœ‰çš„Observerå®ä¾‹ã€‚*/export function observe (value: any, asRootData: ?boolean): Observer | void &#123; if (!isObject(value)) &#123; return &#125; let ob: Observer | void /*è¿™é‡Œç”¨__ob__è¿™ä¸ªå±æ€§æ¥åˆ¤æ–­æ˜¯å¦å·²ç»æœ‰Observerå®ä¾‹ï¼Œå¦‚æœæ²¡æœ‰Observerå®ä¾‹åˆ™ä¼šæ–°å»ºä¸€ä¸ªObserverå®ä¾‹å¹¶èµ‹å€¼ç»™__ob__è¿™ä¸ªå±æ€§ï¼Œå¦‚æœå·²æœ‰Observerå®ä¾‹åˆ™ç›´æ¥è¿”å›è¯¥Observerå®ä¾‹ï¼Œè¿™é‡Œå¯ä»¥çœ‹Observerå®ä¾‹åŒ–çš„ä»£ç def(value, '__ob__', this)*/ if (hasOwn(value, '__ob__') &amp;&amp; value.__ob__ instanceof Observer) &#123; ob = value.__ob__ &#125; else if ( /*è¿™é‡Œçš„åˆ¤æ–­æ˜¯ä¸ºäº†ç¡®ä¿valueæ˜¯å•çº¯çš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯å‡½æ•°æˆ–è€…æ˜¯Regexpç­‰æƒ…å†µã€‚è€Œä¸”è¯¥å¯¹è±¡åœ¨shouldConvertçš„æ—¶å€™æ‰ä¼šè¿›è¡ŒObserverã€‚è¿™æ˜¯ä¸€ä¸ªæ ‡è¯†ä½ï¼Œé¿å…é‡å¤å¯¹valueè¿›è¡ŒObserver */ observerState.shouldConvert &amp;&amp; !isServerRendering() &amp;&amp; (Array.isArray(value) || isPlainObject(value)) &amp;&amp; Object.isExtensible(value) &amp;&amp; !value._isVue ) &#123; ob = new Observer(value) &#125; if (asRootData &amp;&amp; ob) &#123; /*å¦‚æœæ˜¯æ ¹æ•°æ®åˆ™è®¡æ•°ï¼Œåé¢Observerä¸­çš„observeçš„asRootDataétrue*/ ob.vmCount++ &#125; return ob&#125; è¿™é‡Œ new Observer(value) å°±æ˜¯å®ç°å“åº”å¼çš„æ ¸å¿ƒæ–¹æ³•ä¹‹ä¸€äº†ï¼Œé€šè¿‡å®ƒå°†dataè½¬å˜å¯ä»¥æˆè§‚å¯Ÿçš„ï¼Œè€Œè¿™é‡Œæ­£æ˜¯æˆ‘ä»¬å¼€å¤´è¯´çš„ï¼Œç”¨äº† Object.defineProperty å®ç°äº†dataçš„ getter/setter æ“ä½œï¼Œé€šè¿‡ Watcher æ¥è§‚å¯Ÿæ•°æ®çš„å˜åŒ–ï¼Œè¿›è€Œæ›´æ–°åˆ°è§†å›¾ä¸­ã€‚ 2ã€Observer Observerç±»æ˜¯å°†æ¯ä¸ªç›®æ ‡å¯¹è±¡ï¼ˆå³dataï¼‰çš„é”®å€¼è½¬æ¢æˆgetter/setterå½¢å¼ï¼Œç”¨äºè¿›è¡Œä¾èµ–æ”¶é›†ä»¥åŠè°ƒåº¦æ›´æ–°ã€‚ src/core/observer/index.js 123456789101112131415161718192021222324252627282930313233export class Observer &#123; value: any; dep: Dep; vmCount: number; // number of vms that has this object as root $data constructor (value: any) &#123; this.value = value this.dep = new Dep() this.vmCount = 0 /* å°†Observerå®ä¾‹ç»‘å®šåˆ°dataçš„__ob__å±æ€§ä¸Šé¢å»ï¼Œä¹‹å‰è¯´è¿‡observeçš„æ—¶å€™ä¼šå…ˆæ£€æµ‹æ˜¯å¦å·²ç»æœ‰__ob__å¯¹è±¡å­˜æ”¾Observerå®ä¾‹äº†ï¼Œdefæ–¹æ³•å®šä¹‰å¯ä»¥å‚è€ƒ/src/core/util/lang.js*/ def(value, '__ob__', this) if (Array.isArray(value)) &#123; /*å¦‚æœæ˜¯æ•°ç»„ï¼Œå°†ä¿®æ”¹åå¯ä»¥æˆªè·å“åº”çš„æ•°ç»„æ–¹æ³•æ›¿æ¢æ‰è¯¥æ•°ç»„çš„åŸå‹ä¸­çš„åŸç”Ÿæ–¹æ³•ï¼Œè¾¾åˆ°ç›‘å¬æ•°ç»„æ•°æ®å˜åŒ–å“åº”çš„æ•ˆæœã€‚è¿™é‡Œå¦‚æœå½“å‰æµè§ˆå™¨æ”¯æŒ__proto__å±æ€§ï¼Œåˆ™ç›´æ¥è¦†ç›–å½“å‰æ•°ç»„å¯¹è±¡åŸå‹ä¸Šçš„åŸç”Ÿæ•°ç»„æ–¹æ³•ï¼Œå¦‚æœä¸æ”¯æŒè¯¥å±æ€§ï¼Œåˆ™ç›´æ¥è¦†ç›–æ•°ç»„å¯¹è±¡çš„åŸå‹ã€‚*/ const augment = hasProto ? protoAugment /*ç›´æ¥è¦†ç›–åŸå‹çš„æ–¹æ³•æ¥ä¿®æ”¹ç›®æ ‡å¯¹è±¡*/ : copyAugment /*å®šä¹‰ï¼ˆè¦†ç›–ï¼‰ç›®æ ‡å¯¹è±¡æˆ–æ•°ç»„çš„æŸä¸€ä¸ªæ–¹æ³•*/ augment(value, arrayMethods, arrayKeys) /*å¦‚æœæ˜¯æ•°ç»„åˆ™éœ€è¦éå†æ•°ç»„çš„æ¯ä¸€ä¸ªæˆå‘˜è¿›è¡Œobserve*/ this.observeArray(value) &#125; else &#123; /*å¦‚æœæ˜¯å¯¹è±¡åˆ™ç›´æ¥walkè¿›è¡Œç»‘å®š*/ this.walk(value) &#125;, walk (obj: Object) &#123; const keys = Object.keys(obj) /*walkæ–¹æ³•ä¼šéå†å¯¹è±¡çš„æ¯ä¸€ä¸ªå±æ€§è¿›è¡ŒdefineReactiveç»‘å®š*/ for (let i = 0; i &lt; keys.length; i++) &#123; defineReactive(obj, keys[i], obj[keys[i]]) &#125; &#125; &#125; é¦–å…ˆå°†Observerå®ä¾‹ç»‘å®šåˆ°dataçš„__ob__å±æ€§ä¸Šé¢å»ï¼Œé˜²æ­¢é‡å¤ç»‘å®šï¼› è‹¥dataä¸ºæ•°ç»„ï¼Œå…ˆå®ç°å¯¹åº”çš„å˜å¼‚æ–¹æ³•ï¼ˆè¿™é‡Œå˜å¼‚æ–¹æ³•æ˜¯æŒ‡Vueé‡å†™äº†æ•°ç»„çš„7ç§åŸç”Ÿæ–¹æ³•ï¼Œè¿™é‡Œä¸åšèµ˜è¿°ï¼Œåç»­å†è¯´æ˜ï¼‰ï¼Œå†å°†æ•°ç»„çš„æ¯ä¸ªæˆå‘˜è¿›è¡Œobserveï¼Œä½¿ä¹‹æˆå“åº”å¼æ•°æ®ï¼› å¦åˆ™æ‰§è¡Œwalk()æ–¹æ³•ï¼Œéå†dataæ‰€æœ‰çš„æ•°æ®ï¼Œè¿›è¡Œgetter/setterç»‘å®šï¼Œè¿™é‡Œçš„æ ¸å¿ƒæ–¹æ³•å°±æ˜¯ defineReative(obj, keys[i], obj[keys[i]]) 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364export function defineReactive ( obj: Object, key: string, val: any, customSetter?: Function) &#123; /*åœ¨é—­åŒ…ä¸­å®šä¹‰ä¸€ä¸ªdepå¯¹è±¡*/ const dep = new Dep() const property = Object.getOwnPropertyDescriptor(obj, key) if (property &amp;&amp; property.configurable === false) &#123; return &#125; /*å¦‚æœä¹‹å‰è¯¥å¯¹è±¡å·²ç»é¢„è®¾äº†getterä»¥åŠsetterå‡½æ•°åˆ™å°†å…¶å–å‡ºæ¥ï¼Œæ–°å®šä¹‰çš„getter/setterä¸­ä¼šå°†å…¶æ‰§è¡Œï¼Œä¿è¯ä¸ä¼šè¦†ç›–ä¹‹å‰å·²ç»å®šä¹‰çš„getter/setterã€‚*/ // cater for pre-defined getter/setters const getter = property &amp;&amp; property.get const setter = property &amp;&amp; property.set /*å¯¹è±¡çš„å­å¯¹è±¡é€’å½’è¿›è¡Œobserveå¹¶è¿”å›å­èŠ‚ç‚¹çš„Observerå¯¹è±¡*/ let childOb = observe(val) Object.defineProperty(obj, key, &#123; enumerable: true, configurable: true, get: function reactiveGetter () &#123; /*å¦‚æœåŸæœ¬å¯¹è±¡æ‹¥æœ‰getteræ–¹æ³•åˆ™æ‰§è¡Œ*/ const value = getter ? getter.call(obj) : val if (Dep.target) &#123; /*è¿›è¡Œä¾èµ–æ”¶é›†*/ dep.depend() if (childOb) &#123; /*å­å¯¹è±¡è¿›è¡Œä¾èµ–æ”¶é›†ï¼Œå…¶å®å°±æ˜¯å°†åŒä¸€ä¸ªwatcherè§‚å¯Ÿè€…å®ä¾‹æ”¾è¿›äº†ä¸¤ä¸ªdependä¸­ï¼Œä¸€ä¸ªæ˜¯æ­£åœ¨æœ¬èº«é—­åŒ…ä¸­çš„dependï¼Œå¦ä¸€ä¸ªæ˜¯å­å…ƒç´ çš„depend*/ childOb.dep.depend() &#125; if (Array.isArray(value)) &#123; /*æ˜¯æ•°ç»„åˆ™éœ€è¦å¯¹æ¯ä¸€ä¸ªæˆå‘˜éƒ½è¿›è¡Œä¾èµ–æ”¶é›†ï¼Œå¦‚æœæ•°ç»„çš„æˆå‘˜è¿˜æ˜¯æ•°ç»„ï¼Œåˆ™é€’å½’ã€‚*/ dependArray(value) &#125; &#125; return value &#125;, set: function reactiveSetter (newVal) &#123; /*é€šè¿‡getteræ–¹æ³•è·å–å½“å‰å€¼ï¼Œä¸æ–°å€¼è¿›è¡Œæ¯”è¾ƒï¼Œä¸€è‡´åˆ™ä¸éœ€è¦æ‰§è¡Œä¸‹é¢çš„æ“ä½œ*/ const value = getter ? getter.call(obj) : val /* eslint-disable no-self-compare */ if (newVal === value || (newVal !== newVal &amp;&amp; value !== value)) &#123; return &#125; /* eslint-enable no-self-compare */ if (process.env.NODE_ENV !== 'production' &amp;&amp; customSetter) &#123; customSetter() &#125; if (setter) &#123; /*å¦‚æœåŸæœ¬å¯¹è±¡æ‹¥æœ‰setteræ–¹æ³•åˆ™æ‰§è¡Œsetter*/ setter.call(obj, newVal) &#125; else &#123; val = newVal &#125; /*æ–°çš„å€¼éœ€è¦é‡æ–°è¿›è¡Œobserveï¼Œä¿è¯æ•°æ®å“åº”å¼*/ childOb = observe(newVal) /*depå¯¹è±¡é€šçŸ¥æ‰€æœ‰çš„è§‚å¯Ÿè€…*/ dep.notify() &#125; &#125;)&#125; å…¶ä¸­getteræ–¹æ³•ï¼š å…ˆä¸ºæ¯ä¸ªdataå£°æ˜ä¸€ä¸ª Dep å®ä¾‹å¯¹è±¡ï¼Œè¢«ç”¨äºgetteræ—¶æ‰§è¡Œdep.depend()è¿›è¡Œæ”¶é›†ç›¸å…³çš„ä¾èµ–; æ ¹æ®Dep.targetæ¥åˆ¤æ–­æ˜¯å¦æ”¶é›†ä¾èµ–ï¼Œè¿˜æ˜¯æ™®é€šå–å€¼ã€‚Dep.targetæ˜¯åœ¨ä»€ä¹ˆæ—¶å€™ï¼Œå¦‚ä½•æ”¶é›†çš„åé¢å†è¯´æ˜ï¼Œå…ˆç®€å•äº†è§£å®ƒçš„ä½œç”¨ï¼Œ é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œæˆ‘ä»¬ä¸ºå•¥è¦æ”¶é›†ç›¸å…³ä¾èµ–å‘¢ï¼Ÿ 123456789101112new Vue(&#123; template: `&lt;div&gt; &lt;span&gt;text1:&lt;/span&gt; &#123;&#123;text1&#125;&#125; &lt;span&gt;text2:&lt;/span&gt; &#123;&#123;text2&#125;&#125; &lt;div&gt;`, data: &#123; text1: 'text1', text2: 'text2', text3: 'text3' &#125;&#125;); æˆ‘ä»¬å¯ä»¥ä»ä»¥ä¸Šä»£ç çœ‹å‡ºï¼Œdataä¸­text3å¹¶æ²¡æœ‰è¢«æ¨¡æ¿å®é™…ç”¨åˆ°ï¼Œä¸ºäº†æé«˜ä»£ç æ‰§è¡Œæ•ˆç‡ï¼Œæˆ‘ä»¬æ²¡æœ‰å¿…è¦å¯¹å…¶è¿›è¡Œå“åº”å¼å¤„ç†ï¼Œå› æ­¤ï¼Œä¾èµ–æ”¶é›†ç®€å•ç‚¹ç†è§£å°±æ˜¯æ”¶é›†åªåœ¨å®é™…é¡µé¢ä¸­ç”¨åˆ°çš„dataæ•°æ®ï¼Œç„¶åæ‰“ä¸Šæ ‡è®°ï¼Œè¿™é‡Œå°±æ˜¯æ ‡è®°ä¸ºDep.targetã€‚ åœ¨setteræ–¹æ³•ä¸­: è·å–æ–°çš„å€¼å¹¶ä¸”è¿›è¡Œobserveï¼Œä¿è¯æ•°æ®å“åº”å¼ï¼› é€šè¿‡depå¯¹è±¡é€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…å»æ›´æ–°æ•°æ®ï¼Œä»è€Œè¾¾åˆ°å“åº”å¼æ•ˆæœã€‚ åœ¨Observerç±»ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°åœ¨getteræ—¶ï¼Œdepä¼šæ”¶é›†ç›¸å…³ä¾èµ–ï¼Œå³æ”¶é›†ä¾èµ–çš„watcherï¼Œç„¶ååœ¨setteræ“ä½œæ—¶å€™é€šè¿‡depå»é€šçŸ¥watcher,æ­¤æ—¶watcherå°±æ‰§è¡Œå˜åŒ–ï¼Œå…¶å®æˆ‘ä»¬å¯ä»¥ç®€å•ç†è§£ï¼šDepå¯ä»¥çœ‹åšæ˜¯ä¹¦åº—ï¼ŒWatcherå°±æ˜¯ä¹¦åº—è®¢é˜…è€…ï¼Œè€ŒObserverå°±æ˜¯ä¹¦åº—çš„ä¹¦ï¼Œè®¢é˜…è€…åœ¨ä¹¦åº—è®¢é˜…ä¹¦ç±ï¼Œå°±å¯ä»¥æ·»åŠ è®¢é˜…è€…ä¿¡æ¯ï¼Œä¸€æ—¦æœ‰æ–°ä¹¦å°±ä¼šé€šè¿‡ä¹¦åº—ç»™è®¢é˜…è€…å‘é€æ¶ˆæ¯ã€‚ 3ã€Watcher Watcheræ˜¯ä¸€ä¸ªè§‚å¯Ÿè€…å¯¹è±¡ã€‚ä¾èµ–æ”¶é›†ä»¥åWatcherå¯¹è±¡ä¼šè¢«ä¿å­˜åœ¨Depçš„subsä¸­ï¼Œæ•°æ®å˜åŠ¨çš„æ—¶å€™Depä¼šé€šçŸ¥Watcherå®ä¾‹ï¼Œç„¶åç”±Watcherå®ä¾‹å›è°ƒcbè¿›è¡Œè§†å›¾çš„æ›´æ–°ã€‚ src/core/observer/watcher.js 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204export default class Watcher &#123; constructor ( vm: Component, expOrFn: string | Function, cb: Function, options?: Object ) &#123; this.vm = vm /*_watcherså­˜æ”¾è®¢é˜…è€…å®ä¾‹*/ vm._watchers.push(this) // options if (options) &#123; this.deep = !!options.deep this.user = !!options.user this.lazy = !!options.lazy this.sync = !!options.sync &#125; else &#123; this.deep = this.user = this.lazy = this.sync = false &#125; this.cb = cb this.id = ++uid // uid for batching this.active = true this.dirty = this.lazy // for lazy watchers this.deps = [] this.newDeps = [] this.depIds = new Set() this.newDepIds = new Set() this.expression = process.env.NODE_ENV !== 'production' ? expOrFn.toString() : '' // parse expression for getter /*æŠŠè¡¨è¾¾å¼expOrFnè§£ææˆgetter*/ if (typeof expOrFn === 'function') &#123; this.getter = expOrFn &#125; else &#123; this.getter = parsePath(expOrFn) if (!this.getter) &#123; this.getter = function () &#123;&#125; process.env.NODE_ENV !== 'production' &amp;&amp; warn( `Failed watching path: "$&#123;expOrFn&#125;" ` + 'Watcher only accepts simple dot-delimited paths. ' + 'For full control, use a function instead.', vm ) &#125; &#125; this.value = this.lazy ? undefined : this.get() &#125; /** * Evaluate the getter, and re-collect dependencies. */ /*è·å¾—getterçš„å€¼å¹¶ä¸”é‡æ–°è¿›è¡Œä¾èµ–æ”¶é›†*/ get () &#123; /*å°†è‡ªèº«watcherè§‚å¯Ÿè€…å®ä¾‹è®¾ç½®ç»™Dep.targetï¼Œç”¨ä»¥ä¾èµ–æ”¶é›†ã€‚*/ pushTarget(this) let value const vm = this.vm /*æ‰§è¡Œäº†getteræ“ä½œï¼Œçœ‹ä¼¼æ‰§è¡Œäº†æ¸²æŸ“æ“ä½œï¼Œå…¶å®æ˜¯æ‰§è¡Œäº†ä¾èµ–æ”¶é›†ã€‚ åœ¨å°†Dep.targetè®¾ç½®ä¸ºè‡ªç”Ÿè§‚å¯Ÿè€…å®ä¾‹ä»¥åï¼Œæ‰§è¡Œgetteræ“ä½œã€‚ è­¬å¦‚è¯´ç°åœ¨çš„çš„dataä¸­å¯èƒ½æœ‰aã€bã€cä¸‰ä¸ªæ•°æ®ï¼Œgetteræ¸²æŸ“éœ€è¦ä¾èµ–aè·Ÿcï¼Œ é‚£ä¹ˆåœ¨æ‰§è¡Œgetterçš„æ—¶å€™å°±ä¼šè§¦å‘aè·Ÿcä¸¤ä¸ªæ•°æ®çš„getterå‡½æ•°ï¼Œ åœ¨getterå‡½æ•°ä¸­å³å¯åˆ¤æ–­Dep.targetæ˜¯å¦å­˜åœ¨ç„¶åå®Œæˆä¾èµ–æ”¶é›†ï¼Œ å°†è¯¥è§‚å¯Ÿè€…å¯¹è±¡æ”¾å…¥é—­åŒ…ä¸­çš„Depçš„subsä¸­å»ã€‚*/ if (this.user) &#123; try &#123; value = this.getter.call(vm, vm) &#125; catch (e) &#123; handleError(e, vm, `getter for watcher "$&#123;this.expression&#125;"`) &#125; &#125; else &#123; value = this.getter.call(vm, vm) &#125; // "touch" every property so they are all tracked as // dependencies for deep watching /*å¦‚æœå­˜åœ¨deepï¼Œåˆ™è§¦å‘æ¯ä¸ªæ·±å±‚å¯¹è±¡çš„ä¾èµ–ï¼Œè¿½è¸ªå…¶å˜åŒ–*/ if (this.deep) &#123; /*é€’å½’æ¯ä¸€ä¸ªå¯¹è±¡æˆ–è€…æ•°ç»„ï¼Œè§¦å‘å®ƒä»¬çš„getterï¼Œä½¿å¾—å¯¹è±¡æˆ–æ•°ç»„çš„æ¯ä¸€ä¸ªæˆå‘˜éƒ½è¢«ä¾èµ–æ”¶é›†ï¼Œå½¢æˆä¸€ä¸ªâ€œæ·±ï¼ˆdeepï¼‰â€ä¾èµ–å…³ç³»*/ traverse(value) &#125; /*å°†è§‚å¯Ÿè€…å®ä¾‹ä»targetæ ˆä¸­å–å‡ºå¹¶è®¾ç½®ç»™Dep.target*/ popTarget() this.cleanupDeps() return value &#125; /** * Add a dependency to this directive. */ /*æ·»åŠ ä¸€ä¸ªä¾èµ–å…³ç³»åˆ°Depsé›†åˆä¸­*/ addDep (dep: Dep) &#123; const id = dep.id if (!this.newDepIds.has(id)) &#123; this.newDepIds.add(id) this.newDeps.push(dep) if (!this.depIds.has(id)) &#123; dep.addSub(this) &#125; &#125; &#125; /** * Clean up for dependency collection. */ /*æ¸…ç†ä¾èµ–æ”¶é›†*/ cleanupDeps () &#123; /*ç§»é™¤æ‰€æœ‰è§‚å¯Ÿè€…å¯¹è±¡*/ ... &#125; /** * Subscriber interface. * Will be called when a dependency changes. */ /* è°ƒåº¦è€…æ¥å£ï¼Œå½“ä¾èµ–å‘ç”Ÿæ”¹å˜çš„æ—¶å€™è¿›è¡Œå›è°ƒã€‚ */ update () &#123; /* istanbul ignore else */ if (this.lazy) &#123; this.dirty = true &#125; else if (this.sync) &#123; /*åŒæ­¥åˆ™æ‰§è¡Œrunç›´æ¥æ¸²æŸ“è§†å›¾*/ this.run() &#125; else &#123; /*å¼‚æ­¥æ¨é€åˆ°è§‚å¯Ÿè€…é˜Ÿåˆ—ä¸­ï¼Œä¸‹ä¸€ä¸ªtickæ—¶è°ƒç”¨ã€‚*/ queueWatcher(this) &#125; &#125; /** * Scheduler job interface. * Will be called by the scheduler. */ /* è°ƒåº¦è€…å·¥ä½œæ¥å£ï¼Œå°†è¢«è°ƒåº¦è€…å›è°ƒã€‚ */ run () &#123; if (this.active) &#123; /* getæ“ä½œåœ¨è·å–valueæœ¬èº«ä¹Ÿä¼šæ‰§è¡Œgetterä»è€Œè°ƒç”¨updateæ›´æ–°è§†å›¾ */ const value = this.get() if ( value !== this.value || // Deep watchers and watchers on Object/Arrays should fire even // when the value is the same, because the value may // have mutated. /* å³ä¾¿å€¼ç›¸åŒï¼Œæ‹¥æœ‰Deepå±æ€§çš„è§‚å¯Ÿè€…ä»¥åŠåœ¨å¯¹è±¡ï¼æ•°ç»„ä¸Šçš„è§‚å¯Ÿè€…åº”è¯¥è¢«è§¦å‘æ›´æ–°ï¼Œå› ä¸ºå®ƒä»¬çš„å€¼å¯èƒ½å‘ç”Ÿæ”¹å˜ã€‚ */ isObject(value) || this.deep ) &#123; // set new value const oldValue = this.value /*è®¾ç½®æ–°çš„å€¼*/ this.value = value /*è§¦å‘å›è°ƒ*/ if (this.user) &#123; try &#123; this.cb.call(this.vm, value, oldValue) &#125; catch (e) &#123; handleError(e, this.vm, `callback for watcher "$&#123;this.expression&#125;"`) &#125; &#125; else &#123; this.cb.call(this.vm, value, oldValue) &#125; &#125; &#125; &#125; /** * Evaluate the value of the watcher. * This only gets called for lazy watchers. */ /*è·å–è§‚å¯Ÿè€…çš„å€¼*/ evaluate () &#123; this.value = this.get() this.dirty = false &#125; /** * Depend on all deps collected by this watcher. */ /*æ”¶é›†è¯¥watcherçš„æ‰€æœ‰depsä¾èµ–*/ depend () &#123; let i = this.deps.length while (i--) &#123; this.deps[i].depend() &#125; &#125; /** * Remove self from all dependencies' subscriber list. */ /*å°†è‡ªèº«ä»æ‰€æœ‰ä¾èµ–æ”¶é›†è®¢é˜…åˆ—è¡¨åˆ é™¤*/ teardown () &#123; ... &#125;&#125; 4ã€Dep è¢«Observerçš„dataåœ¨è§¦å‘ getter æ—¶ï¼ŒDep å°±ä¼šæ”¶é›†ä¾èµ–çš„ Watcher ï¼Œå…¶å® Dep å°±åƒåˆšæ‰è¯´çš„æ˜¯ä¸€ä¸ªä¹¦åº—ï¼Œå¯ä»¥æ¥å—å¤šä¸ªè®¢é˜…è€…çš„è®¢é˜…ï¼Œå½“æœ‰æ–°ä¹¦æ—¶å³åœ¨dataå˜åŠ¨æ—¶ï¼Œå°±ä¼šé€šè¿‡ Dep ç»™ Watcher å‘é€šçŸ¥è¿›è¡Œæ›´æ–°ã€‚ src/core/observer/dep.js 123456789101112131415161718192021222324252627282930313233343536export default class Dep &#123; static target: ?Watcher; id: number; subs: Array&lt;Watcher&gt;; constructor () &#123; this.id = uid++ this.subs = [] &#125; /*æ·»åŠ ä¸€ä¸ªè§‚å¯Ÿè€…å¯¹è±¡*/ addSub (sub: Watcher) &#123; this.subs.push(sub) &#125; /*ç§»é™¤ä¸€ä¸ªè§‚å¯Ÿè€…å¯¹è±¡*/ removeSub (sub: Watcher) &#123; remove(this.subs, sub) &#125; /*ä¾èµ–æ”¶é›†ï¼Œå½“å­˜åœ¨Dep.targetçš„æ—¶å€™æ·»åŠ è§‚å¯Ÿè€…å¯¹è±¡*/ depend () &#123; if (Dep.target) &#123; Dep.target.addDep(this) &#125; &#125; /*é€šçŸ¥æ‰€æœ‰è®¢é˜…è€…*/ notify () &#123; // stabilize the subscriber list first const subs = this.subs.slice() for (let i = 0, l = subs.length; i &lt; l; i++) &#123; subs[i].update() &#125; &#125;&#125; æ€»ç»“ å…¶å®åœ¨ Vue ä¸­åˆå§‹åŒ–æ¸²æŸ“æ—¶ï¼Œè§†å›¾ä¸Šç»‘å®šçš„æ•°æ®å°±ä¼šå®ä¾‹åŒ–ä¸€ä¸ª Watcherï¼Œä¾èµ–æ”¶é›†å°±æ˜¯æ˜¯é€šè¿‡å±æ€§çš„ getter å‡½æ•°å®Œæˆçš„ï¼Œæ–‡ç« ä¸€å¼€å§‹è®²åˆ°çš„ Observer ã€Watcher ã€Dep éƒ½ä¸ä¾èµ–æ”¶é›†ç›¸å…³ã€‚å…¶ä¸­ Observer ä¸ Dep æ˜¯ä¸€å¯¹ä¸€çš„å…³ç³»ï¼Œ Dep ä¸ Watcher æ˜¯å¤šå¯¹å¤šçš„å…³ç³»ï¼ŒDep åˆ™æ˜¯ Observer å’Œ Watcher ä¹‹é—´çš„çº½å¸¦ã€‚ä¾èµ–æ”¶é›†å®Œæˆåï¼Œå½“å±æ€§å˜åŒ–ä¼šæ‰§è¡Œè¢« Observer å¯¹è±¡çš„ dep.notify() æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šéå†è®¢é˜…è€…ï¼ˆWatcherï¼‰åˆ—è¡¨å‘å…¶å‘é€æ¶ˆæ¯ï¼Œ Watcher ä¼šæ‰§è¡Œ run æ–¹æ³•å»æ›´æ–°è§†å›¾ï¼Œæˆ‘ä»¬å†æ¥çœ‹ä¸€å¼ å›¾æ€»ç»“ä¸€ä¸‹ï¼š åœ¨ Vue ä¸­æ¨¡æ¿ç¼–è¯‘è¿‡ç¨‹ä¸­çš„æŒ‡ä»¤æˆ–è€…æ•°æ®ç»‘å®šéƒ½ä¼šå®ä¾‹åŒ–ä¸€ä¸ª Watcher å®ä¾‹ï¼Œå®ä¾‹åŒ–è¿‡ç¨‹ä¸­ä¼šè§¦å‘ get() å°†è‡ªèº«æŒ‡å‘ Dep.target; dataåœ¨ Observer æ—¶æ‰§è¡Œ getter ä¼šè§¦å‘ dep.depend() è¿›è¡Œä¾èµ–æ”¶é›†;ä¾èµ–æ”¶é›†çš„ç»“æœï¼š1ã€dataåœ¨ Observer æ—¶é—­åŒ…çš„depå®ä¾‹çš„subsæ·»åŠ è§‚å¯Ÿå®ƒçš„ Watcher å®ä¾‹ï¼›2. Watcher çš„depsä¸­æ·»åŠ è§‚å¯Ÿå¯¹è±¡ Observer æ—¶çš„é—­åŒ…depï¼› å½“dataä¸­è¢« Observer çš„æŸä¸ªå¯¹è±¡å€¼å˜åŒ–åï¼Œè§¦å‘subsä¸­è§‚å¯Ÿå®ƒçš„watcheræ‰§è¡Œ update() æ–¹æ³•ï¼Œæœ€åå®é™…ä¸Šæ˜¯è°ƒç”¨watcherçš„å›è°ƒå‡½æ•°cbï¼Œè¿›è€Œæ›´æ–°è§†å›¾ã€‚ å‚è€ƒ Vueæºç  Vueæ–‡æ¡£ Vueæºç å­¦ä¹ ]]></content>
      <categories>
        <category>å‰ç«¯å¼€å‘</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å…³äºç§»åŠ¨ç«¯å¼€å‘ä¸­é‡åˆ°çš„å‘]]></title>
    <url>%2F2017%2F07%2F30%2Fsomething-about-web-app%2F</url>
    <content type="text"><![CDATA[å‰è¨€ ä¸‰æœˆä¸­æ—¬è·³å®Œæ§½ä¹‹åå°±å¥½å¥½ä¹…æ²¡å†™åšå®¢äº†ï¼Œè·³åˆ°æŸå…¬å¸ä¹‹åï¼Œæ€€æ£ç€æ»¡è…”çƒ­æ°´çš„æˆ‘åˆæŠ•å…¥äº†å·¥ä½œä¸­ï¼Œä»é¢è¯•ã€åŠç†ç¦»èŒåˆ°å…¥èŒåªç”¨äº†ä¸€ä¸ªæ˜ŸæœŸã€‚è¿™æ•ˆç‡ä¹Ÿæ²¡è°äº†ï¼Œå…¥èŒä¹‹åç»™äº†ä¸€ä¸ªå°é¡¹ç›®ï¼Œç”¨Vueå…¨å®¶æ¡¶å¼€å‘ä¸€ä¸ªç®€æ˜“çš„ä¸ªäººåšå®¢ã€‚å› ä¸ºä¹‹å‰è‡ªå­¦äº†è§£è¿‡ï¼Œäºæ˜¯å¾ˆå¿«å°±ä¸Šæ‰‹ï¼ŒåŸæœ¬è¦æ±‚ç”¨ä¸¤å‘¨çš„æ—¶é—´ç”¨äº†ä¸‰å¤©å°±å®Œæˆäº†å…¨éƒ¨çš„åŠŸèƒ½ï¼Œäºæ˜¯å°±ä¸€å‘¨ä¹‹åå°±å¼€å§‹å®‰æ’åˆ°é¡¹ç›®ç»„è¿›è¡Œå®é™…çš„å¼€å‘ä¸­äº†ï¼Œæœ€åè¢«å®‰æ’åˆ°æ‹›è˜ç»„è´Ÿè´£æ ¡æ‹›çš„å‰ç«¯å¼€å‘ã€‚ä¸€å»å°±æäº‹æƒ…ï¼Œç»™æˆ‘å®‰æ’äº†åå°ç§»åŠ¨ç«¯çš„å¼€å‘ï¼Œå°±æ˜¯ä¸ºäº†æ–¹ä¾¿é¢†å¯¼æ‰‹æœºä¸Šä½¿ç”¨ï¼ŒåŸºäºå†…éƒ¨é¡¹ç›®éƒ½æ˜¯ç”¨äº†Vueï¼Œæœ€åç¡®å®šç”¨Vue+ä¸€ä¸ªç§»åŠ¨ç«¯çš„åŸºäºVueçš„UIæ¡†æ¶Vuxè¿›è¡Œå¼€å‘ï¼Œäºæ˜¯å°±è¿›å…¥äº†ç§»åŠ¨ç«¯çš„è¸©å‘ä¹‹æ—…ï¼Œä¹‹å‰æ¯”è¾ƒå°‘æ¥è§¦ç§»åŠ¨ç«¯å¼€å‘ã€‚ é¡¹ç›®å¼€å‘æ˜¯åŸºäºVueçš„UIæ¡†æ¶Vuxï¼Œå…¶å®å°±æ˜¯ä¸€å¥—åŸºäºWe-UIçš„ä¸€å¥—ç§»åŠ¨ç«¯UIæ¡†æ¶ï¼Œä½†æ ¹æ®å®é™…æƒ…å†µï¼Œä¸€äº›å¸ƒå±€è¿˜æ˜¯å¾—è‡ªå·±å»é‡æ„ã€‚äºæ˜¯å°±æ„‰å¿«çš„è¸©èµ·äº†ç§»åŠ¨ç«¯å¼€å‘çš„å‘ã€‚ æ»šåŠ¨ç©¿é€é—®é¢˜ æ»šåŠ¨ç©¿é€æ˜¯æŒ‡åœ¨ç§»åŠ¨ç«¯å½“æœ‰ fixed é®ç½©èƒŒæ™¯å’Œå¼¹å‡ºå±‚æ—¶ï¼Œåœ¨å±å¹•ä¸Šæ»‘åŠ¨èƒ½å¤Ÿæ»‘åŠ¨èƒŒæ™¯ä¸‹é¢çš„å†…å®¹ã€‚ç½‘ä¸Šæ•´ç†äº†è§£å†³æ–¹æ¡ˆï¼Œä½†æœ‰äº›è¿˜æ˜¯å­˜åœ¨ä¸€å®šçš„é—®é¢˜ï¼š è®¾ç½®overflowä¸ºhidden 123456.modal-open &#123; &amp;, body &#123; overflow: hidden; height: 100% &#125;&#125; å³å½“å¼¹å‡ºå±‚å¼¹å‡ºæ—¶åœ¨htmlä¸Šæ·»åŠ .modal-open,ç¦ç”¨ html å’Œ body çš„æ»šåŠ¨æ¡,ä½†å®é™…ç”¨ä¸Šå°±ä¼šå‘ç°ï¼š ç”±äº html å’Œ bodyçš„æ»šåŠ¨æ¡éƒ½è¢«ç¦ç”¨ï¼Œå¼¹å‡ºå±‚åé¡µé¢çš„æ»šåŠ¨ä½ç½®ä¼šä¸¢å¤±ï¼Œéœ€è¦ç”¨ js æ¥è®¡ç®—åŸæ¥æ»šåŠ¨çš„ä½ç½®ï¼Œåœ¨å¼¹å‡ºæ—¶ä¿æŒæ»šåŠ¨ä½ç½®ï¼› æ¯å…·çš„æ˜¯é¡µé¢çš„èƒŒæ™¯è¿˜æ˜¯èƒ½å¤Ÿæœ‰æ»šçš„åŠ¨çš„æ•ˆæœ js ä¹‹ touchmove + preventDefault 123modal.addEventListener('touchmove', function(e) &#123; e.preventDefault();&#125;, false); å³é€šè¿‡é˜»æ­¢ç§»åŠ¨ç«¯touchmoveäº‹ä»¶ï¼Œä½†å®é™…ç”¨ä¸Šä¼šå‘ç°å¼¹å‡ºå±‚éœ€è¦æ»šåŠ¨æ—¶ä¹Ÿä¼šè¢«é˜»æ­¢ æœ€åè§£å†³æ–¹æ¡ˆï¼šposition: fixed 1234body.modal-open &#123; position: fixed; width: 100%;&#125; è¿™ç§æ–¹å¼åŒæ ·å½“å¼¹å‡ºå±‚å¼¹å‡ºæ—¶æ»šåŠ¨æ¡ä¼šä¸¢å¤±ï¼Œæ‰€ä»¥è¿˜éœ€è¦ä½¿ç”¨jsæ¥ä¿å­˜æ»šåŠ¨æ¡çš„ä½ç½®ï¼Œåœ¨å…³é—­å¼¹å‡ºå±‚æ—¶å°†æ»šåŠ¨ä½ç½®è¿˜åŸï¼› 1234567891011121314var ModalHelper = (function(bodyCls) &#123; var scrollTop; // åœ¨é—­åŒ…ä¸­å®šä¹‰ä¸€ä¸ªç”¨æ¥ä¿å­˜æ»šåŠ¨ä½ç½®çš„å˜é‡ return &#123; afterOpen: function() &#123; //å¼¹å‡ºä¹‹åè®°å½•ä¿å­˜æ»šåŠ¨ä½ç½®ï¼Œå¹¶ä¸”ç»™bodyæ·»åŠ .modal-open scrollTop = document.scrollingElement.scrollTop; document.body.classList.add(bodyCls); document.body.style.top = -scrollTop + 'px'; &#125;, beforeClose: function() &#123; //å…³é—­æ—¶å°†.modal-openç§»é™¤å¹¶è¿˜åŸä¹‹å‰ä¿å­˜æ»šåŠ¨ä½ç½® document.body.classList.remove(bodyCls); document.scrollingElement.scrollTop = scrollTop; &#125; &#125;;&#125;)('modal-open'); æœ¬äººäº²æµ‹ç¡®å®æ¯”è¾ƒå®Œç¾è§£å†³äº†ç§»åŠ¨ç«¯æ»šåŠ¨é—®é¢˜ğŸ˜Š ç§»åŠ¨ç«¯è¾“å…¥æ¡†è¢«é”®ç›˜æŒ¡ä½é—®é¢˜ ç”±äºæ‰€å¼€å‘çš„é¡µé¢å†…åµŒåœ¨å…¬å¸çš„ä¸€ä¸ªAPPä¸­ï¼Œæœ‰ä¸€ä¸ªç±»ä¼¼èŠå¤©çª—å£çš„ç•Œé¢ï¼Œæµ‹è¯•çš„æ—¶å€™å‘ç°åœ¨éƒ¨åˆ†å®‰å“æœºä¸­è¾“å…¥æ¡†è¢«å®Œå…¨é®æŒ¡ä½ï¼Œè¸©è¿™ä¸ªå‘æ—¶åœ¨ç½‘ä¸Šæ‰¾äº†å¥½å¤šèµ„æ–™ï¼Œå¥½åƒéƒ½æ²¡æœ‰ä¸€å¥—å®Œæ•´çš„è§£å†³åŠæ³•ï¼Œå…ˆçœ‹å…¶ä¸­ä¸€ç§è§£å†³åŠæ³•ï¼Œå¯ä»¥è§£å†³ç»å¤§æ•°å®‰å“æœºä¸Šé¢çš„é—®é¢˜ï¼š 1234567if(/Android/.test(navigator.appVersion)) &#123; window.addEventListener("resize", function() &#123; if(document.activeElement.tagName=="INPUT" || document.activeElement.tagName=="TEXTAREA") &#123; document.activeElement.scrollIntoView(); &#125; &#125;)&#125; å³åœ¨å®‰å“æœºä¸­é€šè¿‡ç›‘å¬å½“çª—å£resizeæ—¶ï¼Œåˆ¤æ–­å½“å‰è·å¾—ç„¦ç‚¹çš„å…ƒç´ æ˜¯å¦ä¸ºè¾“å…¥æ¡†ï¼Œå†è°ƒç”¨è¯¥å…ƒç´ çš„scrollIntoView()ï¼Œå³å°†è¯¥å…ƒç´ å±•ç¤ºåœ¨å½“å‰çª—å£çš„å¯è§†åŒºåŸŸã€‚ç”±äºåªæœ‰scrollIntoViewè¢«å„æµè§ˆå™¨å‡æ”¯æŒï¼Œæ‰€ä»¥è¿™ä¸ªæ–¹æ³•æœ€ä¸ºå¸¸ç”¨ã€‚ ä½¿ç”¨è¿™æ®µä»£ç ä¹‹åï¼Œåœ¨å¾®ä¿¡æˆ–è€…å…¶ä»–æµè§ˆå™¨æµ‹è¯•æ—¶æœ‰æ•ˆæœï¼Œä½†å› ä¸ºæ˜¯éœ€è¦å†…åµŒåœ¨è‡ªå®¶APPä¸Šï¼Œä½¿ç”¨è¿™æ®µä»£ç ä¸€ç›´æ²¡æœ‰è§£å†³è¾“å…¥æ¡†è¢«æŒ¡ä½çš„é—®é¢˜ï¼Œæœ€åæµ‹è¯•æ‰å‘ç°ï¼ŒAPPå†…ç½®æµè§ˆå™¨åœ¨èšç„¦è¾“å…¥æ¡†å¼¹å‡ºé”®ç›˜æ ¹æœ¬æ²¡æœ‰è§¦å‘çª—å£çš„resizeäº‹ä»¶ï¼Œç¬é—´å¿ƒä¸­ä¸‡é©¬å¥”è…¾~~~ï¼Œåé¢åœ¨å€Ÿé‰´äº†æŸé˜¿é‡Œçš„ä¸€ä¸ªç½‘é¡µç‰ˆçš„èŠå¤©ç•Œé¢ï¼Œå‘ç°å®ƒæ˜¯é€šè¿‡è·å–è¾“å…¥æ¡†ç„¦ç‚¹å°†è¾“å…¥æ¡†å®šä½åˆ°çª—å£ç•¥é«˜äºè¾“å…¥æ¡†çš„ä½ç½®ï¼Œåœ¨å¤±å»ç„¦ç‚¹é”®ç›˜å¼¹å›æ—¶å†æ¢å¤åˆ°åº•éƒ¨ï¼Œäºæ˜¯é€šè¿‡è¿™ç§æ–¹å¼å¤„ç†ï¼Œæš‚æ—¶æ¯”è¾ƒæš´åŠ›çš„è§£å†³äº†åœ¨å®‰å“ä¸Šè¯¥APPä¸Šè¾“å…¥æ¡†è¢«æŒ¡ä½çš„é—®é¢˜ï¼Œè¿™ç§æ–¹æ³•æ˜¾ç„¶æ˜¯ä¸å®Œç¾çš„ï¼Œæ¯”å¦‚ç”±äºæ— æ³•ç›‘å¬resizeäº‹ä»¶ï¼Œè€Œä¸”ä½¿ç”¨çš„é”®ç›˜é«˜åº¦ä¸å›ºå®šï¼Œæ‰€ä»¥åªèƒ½å¤§æ¦‚çš„å°†é«˜åº¦è®¾ç½®ä¿æŒåœ¨å±å¹•ä¸€åŠåä¸Šä¸€ç‚¹ã€‚ä¿è¯ç»å¤§æ•°æƒ…å†µä¸‹è¾“å…¥æ¡†åœ¨é”®ç›˜ä¹‹ä¸Šæ˜¾ç¤ºã€‚ IOSæ»šåŠ¨ä¸å¹³æ»‘çš„é—®é¢˜ åœ¨ç§»åŠ¨ç«¯ç‰¹åˆ«æ˜¯iOSä¸­ï¼Œå½“æ»šåŠ¨å±å¹•æ—¶ä¼šå‘ç°æ‰‹æŒ‡ä¸€æ‹¿å¼€æ»šåŠ¨å°±åœæ­¢ï¼Œè¿™ç§ç”¨æˆ·ä½“éªŒæ•ˆæœå¾ˆä¸å¥½ï¼Œæœ‰ç§ç»™ç”¨æˆ·æ»šåŠ¨å¡é¡¿çš„æ„Ÿè§‰ã€‚CSS3ä¸­çš„-webkit-overflow-scrollingå±æ€§å¯ä»¥å®Œç¾çš„è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè¯¥å±æ€§å¯æ§åˆ¶å…ƒç´ åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šæ˜¯å¦ä½¿ç”¨æ»šåŠ¨å›å¼¹æ•ˆæœ: auto ä½¿ç”¨æ™®é€šæ»šåŠ¨, å½“æ‰‹æŒ‡ä»è§¦æ‘¸å±ä¸Šç§»å¼€ï¼Œæ»šåŠ¨ä¼šç«‹å³åœæ­¢ã€‚ touch ä½¿ç”¨å…·æœ‰å›å¼¹æ•ˆæœçš„æ»šåŠ¨, å½“æ‰‹æŒ‡ä»è§¦æ‘¸å±ä¸Šç§»å¼€ï¼Œå†…å®¹ä¼šç»§ç»­ä¿æŒä¸€æ®µæ—¶é—´çš„æ»šåŠ¨æ•ˆæœã€‚ç»§ç»­æ»šåŠ¨çš„é€Ÿåº¦å’ŒæŒç»­çš„æ—¶é—´å’Œæ»šåŠ¨æ‰‹åŠ¿çš„å¼ºçƒˆç¨‹åº¦æˆæ­£æ¯”ã€‚åŒæ—¶ä¹Ÿä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å †æ ˆä¸Šä¸‹æ–‡ã€‚]]></content>
      <categories>
        <category>å‰ç«¯å¼€å‘</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>ç§»åŠ¨ç«¯webå¼€å‘</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä½œç”¨åŸŸä¸é—­åŒ…çš„ä¸€äºŒäº‹]]></title>
    <url>%2F2017%2F03%2F05%2Fscope-and-closure%2F</url>
    <content type="text"><![CDATA[é—­åŒ…æ˜¯JavaScriptè¯­è¨€çš„ä¸€å¤§ç‰¹ç‚¹ï¼Œå¯ä»¥è¯´å†å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œå®ƒæ— å¤„ä¸åœ¨ï¼Œå³ä½¿æœ‰æ—¶å€™æˆ‘ä»¬éƒ½æ²¡æœ‰å‘ç°å®ƒçš„å­˜åœ¨ã€‚æ¥è§¦JavaScriptä»¥æ¥ï¼Œè™½ç„¶è¯´æ˜¯ä¸€ç›´æœ‰å¯¹é—­åŒ…äº†è§£ï¼Œä½†æ˜¯å®é™…åº”ç”¨èµ·æ¥æˆ–è€…åˆ†æä¸€äº›ä»£ç çš„æ—¶å€™å´æœ‰äº›åƒåŠ›ã€‚ç°åœ¨å›è¿‡å¤´æ€»ç»“ï¼Œæ‰åˆè¿›ä¸€æ­¥çš„æ­å¼€äº†é—­åŒ…çš„ä¸€å±‚é¢çº±ã€‚è€Œåœ¨è®²é—­åŒ…ä¹‹å‰ï¼Œæˆ‘ä»¬è¦å…ˆæ˜ç™½JavaScriptä¸­åˆä¸€ä¸ªé‡è¦çš„çŸ¥è¯†ï¼Œé‚£å°±æ˜¯JavaScriptçš„å†…å­˜æœºåˆ¶ä»¥åŠä½œç”¨åŸŸï¼Œè¿™ä¸¤ä¸ªæ˜¯æˆ‘ä»¬æœ‰æ•ˆç†è§£é—­åŒ…åŸç†çš„å‰æå§ã€‚å‰é¢æˆ‘ä»¬å·²ç»è®²äº†JavaScriptçš„å†…å­˜æœºåˆ¶ï¼Œé‚£ä¹ˆåœ¨è¿™é‡Œå…ˆç†è§£ä»€ä¹ˆæ˜¯ä½œç”¨åŸŸå’Œä½œç”¨åŸŸé“¾ã€‚ ä½œç”¨åŸŸä¸ä½œç”¨åŸŸé“¾ ä¹‹å‰æˆ‘ä»¬å·²ç»äº†è§£äº†JavaScriptå†…å­˜ä»¥åŠåƒåœ¾å›æ”¶çš„æœºåˆ¶äº†ï¼Œåœ¨è®²ä½œç”¨åŸŸä¹‹å‰ï¼Œå…¶å®è¿˜æœ‰ä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼Œé‚£å°±æ˜¯JavaScriptçš„æ‰§è¡Œç¯å¢ƒäº§ç”Ÿçš„å˜é‡å¯¹è±¡ã€‚ å˜é‡å¯¹è±¡ æ‰§è¡Œç¯å¢ƒå®šä¹‰äº†å˜é‡æˆ–å‡½æ•°æœ‰æƒè®¿é—®çš„å…¶ä»–æ•°æ®ï¼Œå†³å®šäº†å®ƒä»¬å„è‡ªçš„è¡Œä¸ºã€‚è€Œæ¯ä¸ªæ‰§è¡Œç¯å¢ƒéƒ½æœ‰ä¸€ä¸ªä¸ä¹‹å…³è”çš„å˜é‡å¯¹è±¡ï¼ˆvariable objectï¼‰ï¼Œç¯å¢ƒä¸­å®šä¹‰çš„æ‰€æœ‰å˜é‡å’Œå‡½æ•°éƒ½ä¿å­˜åœ¨è¿™ä¸ªå¯¹è±¡ä¸­ã€‚è™½ç„¶æˆ‘ä»¬ç¼–å†™çš„ä»£ç æ— æ³•è®¿é—®è¿™ä¸ªå¯¹è±¡ï¼Œä½†æ˜¯è§£æå™¨åœ¨å¤„ç†æ•°æ®æ—¶ä¼šåœ¨åå°å¤„ç†å®ƒä»¬ã€‚ JavaScriptçš„è¿è¡Œç¯å¢ƒå¤§æ¦‚æœ‰ä¸‰ç§ï¼š å…¨å±€ç¯å¢ƒï¼šå…¨å±€ç¯å¢ƒæ˜¯æœ€å¤–å›´çš„ä¸€ä¸ªæ‰§è¡Œç¯å¢ƒã€‚åœ¨webæµè§ˆå™¨ä¸­ï¼Œå…¨å±€æ‰§è¡Œç¯å¢ƒè¢«è®¤ä¸ºæ˜¯windowå¯¹è±¡ï¼Œå› æ­¤æ‰€æœ‰çš„å…¨å±€å˜é‡å’Œå‡½æ•°éƒ½ä¼šä½œä¸ºwindowå¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•åˆ›å»ºçš„ï¼› å±€éƒ¨ç¯å¢ƒï¼šé€šå¸¸æ˜¯å‡½æ•°å†…éƒ¨åˆ›å»ºçš„æ‰§è¡Œç¯å¢ƒã€‚ eval å˜é‡å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹ï¼š åˆ›å»ºargumentså¯¹è±¡ã€‚æ£€æŸ¥å½“å‰æ‰§è¡Œç¯å¢ƒä¸­çš„å‚æ•°ï¼Œå»ºç«‹è¯¥å¯¹è±¡ä¸‹çš„å±æ€§ä¸å±æ€§å€¼ã€‚ æ£€æŸ¥å½“å‰æ‰§è¡Œç¯å¢ƒä¸­çš„å‡½æ•°å£°æ˜ï¼Œå³functionå…³é”®å­—çš„å‡½æ•°å£°æ˜ï¼Œåœ¨å˜é‡å¯¹è±¡ä¸­ä»¥å‡½æ•°åå»ºç«‹ä¸€ä¸ªå±æ€§ï¼Œå…¶å€¼æ˜¯æŒ‡å‘è¯¥å‡½æ•°æ‰€åœ¨å†…å­˜åœ°å€çš„å¼•ç”¨ã€‚è‹¥å‡½æ•°åå·²ç»å­˜åœ¨ï¼Œåˆ™æ”¹å±æ€§å°†ä¼šè¢«æ–°çš„å¼•ç”¨è¯´è¦†ç›–ã€‚ æ£€æŸ¥å½“å‰æ‰§è¡Œç¯å¢ƒä¸­çš„å˜é‡å£°æ˜ï¼Œåœ¨å˜é‡å¯¹è±¡ä»¥å˜é‡åå»ºç«‹ä¸€ä¸ªå±æ€§ï¼Œå¹¶åˆå§‹åŒ–ä¸ºundefinedã€‚ æˆ‘ä»¬ç»å¸¸è¯´åˆ°çš„å˜é‡æå‡ï¼Œå‡½æ•°ä¼˜å…ˆæå‡å°±æ˜¯è¿™æ ·ä¸€ä¸ªè¿‡ç¨‹ï¼Œåœ¨æ¯ä¸ªæ‰§è¡Œç¯å¢ƒä¸­çš„å˜é‡å¯¹è±¡è¢«åˆ›å»ºçš„æ—¶å€™éƒ½ä¼šç»å†è¿™å‡ ä¸ªæ­¥éª¤ã€‚ è€Œå½“æŸä¸ªæ‰§è¡Œç¯å¢ƒä¸­çš„æ‰€æœ‰ä»£ç æ‰§è¡Œå®Œæ¯•åï¼Œè¯¥ç¯å¢ƒè¢«é”€æ¯ï¼Œä¿å­˜åœ¨å…¶ä¸­çš„å˜é‡å’Œå‡½æ•°å®šä¹‰ä¹Ÿéšä¹‹é”€æ¯ï¼Œå…¨å±€æ‰§è¡Œç¯å¢ƒç›´åˆ°åº”ç”¨ç¨‹åºé€€å‡ºæ¯”å¦‚æµè§ˆå™¨å…³é—­æ—¶æ‰ä¼šé”€æ¯ã€‚ ä½œç”¨åŸŸ äº†è§£äº†å˜é‡å¯¹è±¡ä¹‹åï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œç»™ä½œç”¨åŸŸä¸€ä¸ªå®šä¹‰ï¼Œä½œç”¨åŸŸå°±æ˜¯ç”¨æ¥ç®¡ç†JavaScriptå¼•æ“å¦‚ä½•åœ¨å½“å‰ä½œç”¨åŸŸä»¥åŠåµŒå¥—çš„å­ä½œç”¨åŸŸä¸­æ ¹æ®æ ‡è¯†ç¬¦åç§°ï¼ˆè¿™é‡ŒæŒ‡çš„æ˜¯å˜é‡åå’Œå‡½æ•°åï¼‰è¿›è¡Œå˜é‡æŸ¥æ‰¾çš„ä¸€å¥—è§„åˆ™ã€‚è¯´çš„ç®€å•ç‚¹å°±æ˜¯ä½œç”¨åŸŸå°±æ˜¯å˜é‡ä¸å‡½æ•°çš„å¯è®¿é—®èŒƒå›´ï¼Œå®ƒæ§åˆ¶ç€å˜é‡ä¸å‡½æ•°çš„å¯è§æ€§ä¸ç”Ÿå‘½å‘¨æœŸã€‚ JavaScriptä»£ç çš„æ•´ä¸ªæ‰§è¡Œè¿‡ç¨‹åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼Œä»£ç ç¼–è¯‘é˜¶æ®µä¸ä»£ç æ‰§è¡Œé˜¶æ®µã€‚ç¼–è¯‘é˜¶æ®µç”±ç¼–è¯‘å™¨æ‰§è¡Œå®Œæˆï¼Œå°†ä»£ç ç¼–è¯‘æˆå¯æ‰§è¡Œä»£ç ï¼Œå¹¶ç¡®ç«‹ä½œç”¨åŸŸçš„è§„åˆ™ã€‚æ‰§è¡Œé˜¶æ®µç”±å¼•æ“å®Œæˆï¼Œä¸»è¦æ˜¯æ‰§è¡Œå¯æ‰§è¡Œä»£ç ï¼Œæ‰§è¡Œä¸Šä¸‹æ–‡åœ¨è¿™ä¸ªé˜¶æ®µåˆ›å»ºã€‚ æˆ‘ä»¬ä¸¾ä¸€ä¸ªç®€å•ç²—æš´çš„ğŸŒ°è§£é‡Šä¸€ä¸‹å¼•æ“ã€ç¼–è¯‘å™¨å’Œä½œç”¨åŸŸæ˜¯å¦‚ä½•ååŒå·¥ä½œçš„å°±æ˜ç™½äº†ï¼š 1var a = 10; JavaScriptæ‰§è¡Œä¸Šé¢ä»£ç çš„æ—¶å€™ä¼šå°†å…¶çœ‹æˆæ˜¯ä¸¤ä¸ªå£°æ˜ï¼Œä¸€ä¸ªæ˜¯ç¼–è¯‘é˜¶æ®µçš„å®šä¹‰å£°æ˜ï¼Œä¸€ä¸ªæ˜¯å¼•æ“æ‰§è¡Œé˜¶æ®µçš„èµ‹å€¼å£°æ˜ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åˆ†è§£æˆï¼š 12var a;a=10; ç¼–è¯‘é˜¶æ®µï¼šâ€œç¼–è¯‘å™¨&quot;ä¼šè¯¢é—®&quot;ä½œç”¨åŸŸâ€ï¼šå½“å‰çš„ä½œç”¨åŸŸä¸­æ˜¯å¦å·²ç»æœ‰å˜é‡aï¼Œå¦‚æœæœ‰ï¼Œé‚£ä¹ˆ&quot;ç¼–è¯‘å™¨&quot;ä¼šå¿½ç•¥è¿™ä¸ªå£°æ˜ï¼Œç»§ç»­è¿›è¡Œç¼–è¯‘ï¼›å¦‚æœæ²¡æœ‰ï¼Œé‚£ä¹ˆå®ƒä¼šè¦æ±‚â€œä½œç”¨åŸŸâ€åœ¨å½“å‰çš„ä½œç”¨åŸŸå£°æ˜ä¸€ä¸ªæ–°çš„å˜é‡ï¼Œå¹¶å‘½åä¸ºa; æ‰§è¡Œé˜¶æ®µï¼šâ€œå¼•æ“&quot;å¤„ç†a = 10æ—¶ï¼Œé¦–å…ˆä¼šè¯¢é—®&quot;ä½œç”¨åŸŸâ€ï¼šå½“å‰çš„ä½œç”¨åŸŸä¸­æ˜¯å¦å­˜åœ¨ä¸€ä¸ªaçš„å˜é‡ï¼Œå¦‚æœå­˜åœ¨ï¼Œé‚£ä¹ˆå¼•æ“å°±ä¼šä½¿ç”¨è¿™ä¸ªå˜é‡ï¼Œå¦‚æœå¦ï¼Œé‚£ä¹ˆ&quot;å¼•æ“&quot;ä¼šç»§ç»­æŸ¥æ‰¾è¯¥å˜é‡ã€‚å¦‚æœ&quot;å¼•æ“&quot;æœ€ç»ˆæ‰¾åˆ°äº†aå˜é‡ï¼Œé‚£ä¹ˆå°±å°†10èµ‹å€¼ç»™å®ƒï¼Œå¦åˆ™&quot;å¼•æ“&quot;å°±ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚ æ€»ç»“ä¸€ä¸‹å˜é‡èµ‹å€¼æ“ä½œè¿‡ç¨‹ï¼Œå³ï¼šé¦–å…ˆç¼–è¯‘å™¨ä¼šåœ¨å½“å‰ä½œç”¨åŸŸä¸­å£°æ˜ä¸€ä¸ªå˜é‡ï¼ˆå¦‚æœä¹‹å‰æ²¡æœ‰å£°æ˜è¿‡ï¼‰ï¼Œç„¶ååœ¨è¿è¡Œæ—¶ï¼Œå¼•æ“ä¼šåœ¨ä½œç”¨åŸŸä¸­æŸ¥æ‰¾è¯¥å˜é‡ï¼Œå¦‚æœèƒ½å¤Ÿæ‰¾åˆ°å°±å¯¹å®ƒèµ‹å€¼ï¼Œå¦åˆ™å°±æŠ›å‡ºå¼‚å¸¸ã€‚ ç¼–è¯‘é˜¶æ®µæ˜¯åœ¨å½“å‰çš„ä½œç”¨åŸŸä¸­å£°æ˜å˜é‡ï¼Œè€Œå¼•æ“æŸ¥æ‰¾æ—¶ï¼Œæ˜¯åœ¨æ•´ä¸ªä½œç”¨åŸŸä¸­æŸ¥æ‰¾è¯¥å˜é‡ã€‚ ä½œç”¨åŸŸé“¾ ä¸Šé¢æˆ‘ä»¬è®²äº†ï¼Œå¼•æ“åœ¨æŸ¥æ‰¾å˜é‡çš„æ—¶å€™ï¼Œæ˜¯åœ¨æ•´ä¸ªä½œç”¨åŸŸä¸­æŸ¥æ‰¾çš„ï¼Œåœ¨å½“å‰ä½œç”¨åŸŸä¸­æ‰¾ä¸åˆ°å®ƒä¼šç»§ç»­å¾€ä¸Šä¸€å±‚ä½œç”¨åŸŸä¸­æŸ¥æ‰¾ï¼Œç›´è‡³åˆ°é¡¶å±‚ä½œç”¨åŸŸå³å…¨å±€ä½œç”¨åŸŸã€‚è€Œè¿™ä¸€ä¸ªè¿‡ç¨‹ä¸­å°±äº§ç”Ÿäº†æˆ‘ä»¬æ‰€è¯´çš„ä½œç”¨åŸŸé“¾ï¼Œä½œç”¨åŸŸé“¾æ˜¯åœ¨æ‰§è¡Œä¸Šä¸‹æ–‡åˆ›å»ºçš„æ—¶å€™äº§ç”Ÿçš„ã€‚ æˆ‘ä»¬è¯´ä½œç”¨åŸŸæ˜¯JavaScriptç¼–è¯‘æ‰§è¡Œçš„ä¸€å¥—è§„åˆ™ï¼Œé‚£ä¹ˆä½œç”¨åŸŸé“¾å°±æ˜¯è¿™ä¸ªè§„åˆ™çš„ä¸€ç§å…·ä½“ä½“ç°ã€‚ ä½œç”¨åŸŸé“¾æ˜¯ä¿è¯å¯¹æ‰§è¡Œç¯å¢ƒæœ‰æƒè®¿é—®çš„æ‰€æœ‰å˜é‡å’Œå‡½æ•°çš„æœ‰åºè®¿é—®ã€‚ä½œç”¨åŸŸé“¾çš„å‰ç«¯å§‹ç»ˆæ˜¯å½“å‰æ‰§è¡Œçš„ä»£ç æ‰€åœ¨ç¯å¢ƒçš„å˜é‡å¯¹è±¡ã€‚è€Œå‰é¢æˆ‘ä»¬å·²ç»è®²äº†å˜é‡å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹ã€‚ä½œç”¨åŸŸé“¾çš„ä¸‹ä¸€ä¸ªå˜é‡å¯¹è±¡æ¥è‡ªåŒ…å«ç¯å¢ƒå³å¤–éƒ¨ç¯å¢ƒï¼Œè¿™æ ·ï¼Œä¸€ç›´å»¶ç»­åˆ°å…¨å±€æ‰§è¡Œç¯å¢ƒï¼›å…¨å±€æ‰§è¡Œç¯å¢ƒçš„å˜é‡å¯¹è±¡å§‹ç»ˆéƒ½æ˜¯ä½œç”¨åŸŸé“¾ä¸­çš„æœ€åä¸€ä¸ªå¯¹è±¡ã€‚ é—­åŒ… å®šä¹‰ ç†è§£äº†ä½œç”¨åŸŸä¸ä½œç”¨åŸŸé“¾ä¹‹åï¼Œæˆ‘ä»¬å†æ¥çœ‹çœ‹é—­åŒ…çš„ä¸€äº›å®šä¹‰ï¼š MDN å¯¹é—­åŒ…çš„å®šä¹‰ï¼š é—­åŒ…æ˜¯æŒ‡é‚£äº›èƒ½å¤Ÿè®¿é—®ç‹¬ç«‹ï¼ˆè‡ªç”±ï¼‰å˜é‡çš„å‡½æ•°ï¼ˆå˜é‡åœ¨æœ¬åœ°ä½¿ç”¨ï¼Œä½†å®šä¹‰åœ¨ä¸€ä¸ªå°é—­çš„ä½œç”¨åŸŸä¸­ï¼‰ã€‚æ¢å¥è¯è¯´ï¼Œè¿™äº›å‡½æ•°å¯ä»¥ã€Œè®°å¿†ã€å®ƒè¢«åˆ›å»ºæ—¶å€™çš„ç¯å¢ƒã€‚ ã€ŠJavaScript æƒå¨æŒ‡å—(ç¬¬6ç‰ˆ)ã€‹å¯¹é—­åŒ…çš„å®šä¹‰ï¼š å‡½æ•°å¯¹è±¡å¯ä»¥é€šè¿‡ä½œç”¨åŸŸé“¾ç›¸äº’å…³è”èµ·æ¥ï¼Œå‡½æ•°ä½“å†…éƒ¨çš„å˜é‡éƒ½å¯ä»¥ä¿å­˜åœ¨å‡½æ•°ä½œç”¨åŸŸå†…ï¼Œè¿™ç§ç‰¹æ€§åœ¨è®¡ç®—æœºç§‘å­¦æ–‡çŒ®ä¸­ç§°ä¸ºé—­åŒ…ã€‚ ã€ŠJavaScript é«˜çº§ç¨‹åºè®¾è®¡(ç¬¬3ç‰ˆ)ã€‹å¯¹é—­åŒ…çš„å®šä¹‰ï¼š é—­åŒ…æ˜¯æŒ‡æœ‰æƒè®¿é—®å¦ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸä¸­çš„å˜é‡çš„å‡½æ•°ã€‚ æœ€åæ˜¯é˜®ä¸€å³°è€å¸ˆå¯¹é—­åŒ…çš„è§£é‡Šï¼š ç”±äºåœ¨ Javascript è¯­è¨€ä¸­ï¼Œåªæœ‰å‡½æ•°å†…éƒ¨çš„å­å‡½æ•°æ‰èƒ½è¯»å–å±€éƒ¨å˜é‡ï¼Œå› æ­¤å¯ä»¥æŠŠé—­åŒ…ç®€å•ç†è§£æˆå®šä¹‰åœ¨ä¸€ä¸ªå‡½æ•°å†…éƒ¨çš„å‡½æ•°ã€‚ ä»ä»¥ä¸Šå®šä¹‰æˆ‘ä»¬å¯ä»¥æ€»ç»“ï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•ç†è§£å°±æ˜¯ä¸€ä¸ªå‡½æ•°è¢«ä¸€ä¸ªå¤–éƒ¨å‡½æ•°æ‰€åŒ…å«ï¼Œæ ¹æ®ä¸Šé¢æˆ‘ä»¬è®²åˆ°çš„ä½œç”¨åŸŸé“¾åªæ˜¯æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œå½“å‰è¢«åŒ…å«çš„å‡½æ•°å†…éƒ¨ï¼ˆå³å½“å‰çš„æ‰§è¡Œç¯å¢ƒï¼‰æ˜¯æœ‰æƒè®¿é—®å®ƒå¤–éƒ¨å‡½æ•°ï¼ˆå¤–éƒ¨çš„æ‰§è¡Œç¯å¢ƒï¼‰çš„å˜é‡å¯¹è±¡çš„ï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°å°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„é—­åŒ…äº†ã€‚åŸæ¥å¯¹é—­åŒ…çš„ç†è§£å°±æ˜¯è¿™ä¹ˆçš„é€šç•…ï¼Œå“ˆå“ˆğŸ˜†ã€‚ é—­åŒ…çš„ç”¨é€” æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œå½“å‡½æ•°æ‰§è¡Œå®Œæ¯•çš„æ—¶å€™ï¼Œå±€éƒ¨çš„æ´»åŠ¨å¯¹è±¡å°±ä¼šé€€å‡ºæ‰§è¡Œæ ˆï¼Œéšåå°±ä¼šè¢«é”€æ¯ï¼Œä½†æ˜¯é—­åŒ…åˆ™ä¸æ˜¯é…±ç´«çš„ã€‚åºŸè¯ä¸å¤šè¯´ï¼Œæˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸ªğŸŒ°ï¼ˆå›¾ç”»çš„æœ‰ç‚¹ä¸‘ï¼Œå°†å°±ç€çœ‹å§å“ˆå“ˆï¼‰ 12345678910function fun()&#123; var name = "Junga" function fun1()&#123; var greet = 'Hello '+ name; console.log(greet); &#125; return fun1;&#125;var result = fun();result(); ä¸Šå›¾å±•ç¤ºçš„æ˜¯è°ƒç”¨å‡½æ•°fun()çš„è¿‡ç¨‹ä¸­äº§ç”Ÿçš„ä½œç”¨åŸŸé“¾ä¹‹é—´çš„å…³ç³»ã€‚ä½œç”¨åŸŸé“¾æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªæŒ‡å‘å˜é‡å¯¹è±¡çš„æŒ‡é’ˆåˆ—è¡¨ï¼Œå®ƒåªå¼•ç”¨ä½†ä¸å®é™…åŒ…å«å˜é‡å¯¹è±¡ã€‚ä¸Šé¢ä»£ç å¾ˆæ˜æ˜¾ï¼Œfun1()å°±æ˜¯ä¸€ä¸ªé—­åŒ…ï¼Œå› ä¸ºå®ƒçš„ä½œç”¨åŸŸé“¾åŒ…å«äº†å¤–éƒ¨å‡½æ•°fun()çš„æ´»åŠ¨å¯¹è±¡ï¼Œé‚£ä¸ºä»€ä¹ˆé—­åŒ…åœ¨è¿è¡Œå®Œä¹‹åä¸ä¼šè¢«é”€æ¯å‘¢ï¼Ÿä¸‹é¢è§£é‡Šä¸€ä¸‹ï¼š åœ¨å‡½æ•°fun()ä¸­ï¼Œè¿”å›äº†å†…éƒ¨å‡½æ•°fun1()ï¼Œå®ƒçš„ä½œç”¨åŸŸé“¾è¢«åˆå§‹åŒ–ä¸ºåŒ…å«fun()å‡½æ•°çš„æ´»åŠ¨å¯¹è±¡å’Œå…¨å±€å˜é‡å¯¹è±¡ã€‚å› æ­¤ï¼Œfun1()å°±å¯ä»¥è®¿é—®fun()ä¸­å®šä¹‰çš„æ‰€æœ‰å˜é‡ã€‚æ¥ä¸‹æ¥æœ€é‡è¦çš„ä¸€ç‚¹å°±æ˜¯ï¼Œfun()å‡½æ•°åœ¨æ‰§è¡Œå®Œæ¯•ä¹‹åå…¶æ´»åŠ¨å¯¹è±¡ä¹Ÿä¸ä¼šè¢«é”€æ¯ï¼Œå› ä¸ºé—­åŒ…fun1()çš„ä½œç”¨åŸŸé“¾ä»ç„¶åœ¨å¼•ç”¨è¿™ä¸ªæ´»åŠ¨å¯¹è±¡ã€‚æ¢å¥è¯è¯´ï¼Œå½“fun()å‡½æ•°è¿”å›åï¼Œå…¶æ‰§è¡Œç¯å¢ƒçš„ä½œç”¨åŸŸé“¾ä¼šè¢«é”€æ¯ï¼Œä½†å®ƒçš„æ´»åŠ¨å¯¹è±¡ä»ç„¶ä¼šç•™åœ¨å†…å­˜ä¸­ï¼Œç›´åˆ°é—­åŒ…fun1()è¢«é”€æ¯åï¼Œfun()çš„æ´»åŠ¨å¯¹è±¡æ‰ä¼šè¢«é”€æ¯ã€‚ä¾‹å¦‚å½“ä¸Šé¢çš„resultè¢«èµ‹å€¼ä¸ºnullæ—¶ï¼Œæ­¤æ—¶é—­åŒ…fun1()å°±è¢«è§£é™¤äº†å¼•ç”¨ï¼Œéšåè¢«åƒåœ¾æ”¶é›†å™¨å›æ”¶ï¼Œæœ€åé‡Šæ”¾å…¶å†…å­˜ã€‚ å› æ­¤ï¼Œå¯ä»¥æ€»ç»“å‡ºé—­åŒ…æœ‰ä¸¤å¤§ç”¨é€”ï¼š1ã€å¯ä»¥è¯»å–å‡½æ•°å†…éƒ¨çš„å˜é‡ï¼›2ã€å¯ä»¥è®©å‡½æ•°å†…éƒ¨çš„å˜é‡å§‹ç»ˆä¿å­˜åœ¨å†…å­˜ä¸­ã€‚ æ³¨æ„ï¼šç”±äºé—­åŒ…ä¼šæºå¸¦åŒ…å«å®ƒçš„å‡½æ•°çš„ä½œç”¨åŸŸï¼Œå› æ­¤ä¼šæ¯”å…¶ä»–å‡½æ•°å ç”¨æ›´å¤šçš„å†…å­˜ï¼Œè¿‡åº¦ä½¿ç”¨é—­åŒ…å¯èƒ½ä¼šå¯¼è‡´å†…å­˜æ³„æ¼ã€‚]]></content>
      <categories>
        <category>å‰ç«¯å¼€å‘</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[flexboxå­¦ä¹ å°è®°]]></title>
    <url>%2F2017%2F02%2F23%2Fflexbox%2F</url>
    <content type="text"><![CDATA[å› ä¸ºç°åœ¨çš„å…¬å¸è¦æ±‚å¸ƒå±€çš„å…¼å®¹æ€§è¦å…¼å®¹åˆ°è‡³å°‘IE7ï¼Œæ‰€ä»¥å¯¹äºflexboxè¿™ç§å¸ƒå±€ä¹Ÿæ²¡æœ‰äº†è§£å¤ªå¤šï¼Œä¹‹å‰æœ‰å¬è¯´è¿‡flexå¸ƒå±€ï¼Œå¬èµ·æ¥æ˜¯ä¸€ç§æ¯”è¾ƒé«˜å¤§ä¸Šï¼Œå¯ä»¥è‡ªé€‚åº”ä¸åŒå°ºå¯¸å±å¹•çš„å¸ƒå±€æ–¹å¼ï¼Œä½†æ˜¯æ²¡æœ‰æ­£å¼çš„å»å­¦ä¹ äº†è§£ã€‚flexboxæ˜¯CSS3ç®—æ˜¯æ¯”è¾ƒæ–°çš„ä¸€ä¸ªç‰¹æ€§ï¼Œæœ€è¿‘åˆšå¥½æœ‰æ—¶é—´ä¹Ÿæœ‰å…´è¶£å°±äº†è§£äº†ï¼Œè§‰å¾—è¿˜æ˜¯è¦åšä¸€ä¸‹æ€»ç»“ï¼Œä¸ç„¶å¾ˆå¿«åˆå¿˜äº†ğŸ˜°ã€‚ flexboxå¸ƒå±€æ„ä¸ºå¼¹æ€§å¸ƒå±€ï¼Œæ˜¯css3çš„å¼¹æ€§ç›’å­æ¨¡å¼ï¼Œç”¨å®ƒå¯ä»¥å‘Šåˆ«floatå¸ƒå±€ï¼Œä¹Ÿå¯ä»¥ç®€å•å®ç°å‚ç›´å±…ä¸­ï¼Œå¹¶ä¸”å…·æœ‰å“åº”å¼ï¼Œå°±æ˜¯å¯ä»¥è‡ªåŠ¨è°ƒæ•´ï¼Œè®¡ç®—å…ƒç´ åœ¨å®¹å™¨ç©ºé—´ä¸­çš„å¤§å°ï¼Œå¯ä»¥è¯´ï¼šå®Œç¾~~~ï¼ˆæ­¤å¤„åº”æœ‰æ ‡å¿—æ€§åŠ¨ä½œ) Flexå¸ƒå±€èƒŒåçš„ä¸»è¦æ€æƒ³æ˜¯ç»™å®¹å™¨æ§åˆ¶é¡¹ç›®ï¼ˆFlexé¡¹ç›®ï¼‰çš„å®½åº¦ã€é«˜åº¦çš„èƒ½åŠ›ï¼Œä½¿ç”¨Flexé¡¹ç›®å¯ä»¥è‡ªåŠ¨å¡«æ»¡å®¹å™¨çš„å¯ç”¨ç©ºé—´ï¼ˆä¸»è¦æ˜¯é€‚åº”æ‰€æœ‰ç±»å‹çš„æ˜¾ç¤ºè®¾å¤‡å’Œå±å¹•å¤§å°ï¼‰ã€‚Flexå®¹å™¨ä½¿ç”¨Flexé¡¹ç›®å¯ä»¥è‡ªåŠ¨æ”¾å¤§ä¸æ”¶ç¼©ï¼Œç”¨æ¥å¡«è¡¥å¯ç”¨çš„ç©ºé—²ç©ºé—´ã€‚ å…ˆçœ‹ä¸‹flexboxå¸ƒå±€å¯¹å„å¤§æµè§ˆå™¨çš„æ”¯æŒæƒ…å†µï¼ŒåŸºæœ¬ä¹Ÿå°±å‘Šåˆ«ä½ç‰ˆæœ¬çš„æµè§ˆå™¨äº†ï¼š ä¸‹é¢æˆ‘ä»¬æ¥ç®€å•äº†è§£ä¸€ä¸‹flexå¸ƒå±€çš„åŸºæœ¬æ¦‚å¿µï¼š flexé¡¹ç›®æ’åˆ—æ–¹å¼ï¼š main axis:Flexå®¹å™¨çš„ä¸»è½´ä¸»è¦ç”¨æ¥é…ç½®Flexé¡¹ç›®ã€‚æ³¨æ„ï¼Œå®ƒä¸ä¸€å®šæ˜¯æ°´å¹³ï¼Œè¿™ä¸»è¦å–å†³äºflex-directionå±æ€§ã€‚ main-start | main-end:Flexé¡¹ç›®çš„é…ç½®ä»å®¹å™¨çš„ä¸»è½´èµ·ç‚¹è¾¹å¼€å§‹ï¼Œå¾€ä¸»è½´ç»ˆç‚¹è¾¹ç»“æŸã€‚ main size:Flexé¡¹ç›®çš„åœ¨ä¸»è½´æ–¹å‘çš„å®½åº¦æˆ–é«˜åº¦å°±æ˜¯é¡¹ç›®çš„ä¸»è½´é•¿åº¦ï¼ŒFlexé¡¹ç›®çš„ä¸»è½´é•¿åº¦å±æ€§æ˜¯widthæˆ–heightå±æ€§ï¼Œç”±å“ªä¸€ä¸ªå¯¹ç€ä¸»è½´æ–¹å‘å†³å®šã€‚ cross axis:ä¸ä¸»è½´å‚ç›´çš„è½´ç§°ä½œä¾§è½´ï¼Œæ˜¯ä¾§è½´æ–¹å‘çš„å»¶ä¼¸ã€‚ cross-start | cross-end:ä¼¸ç¼©è¡Œçš„é…ç½®ä»å®¹å™¨çš„ä¾§è½´èµ·ç‚¹è¾¹å¼€å§‹ï¼Œå¾€ä¾§è½´ç»ˆç‚¹è¾¹ç»“æŸã€‚ cross size:Flexé¡¹ç›®çš„åœ¨ä¾§è½´æ–¹å‘çš„å®½åº¦æˆ–é«˜åº¦å°±æ˜¯é¡¹ç›®çš„ä¾§è½´é•¿åº¦ï¼ŒFlexé¡¹ç›®çš„ä¾§è½´é•¿åº¦å±æ€§æ˜¯widthæˆ–heightå±æ€§ï¼Œç”±å“ªä¸€ä¸ªå¯¹ç€ä¾§è½´æ–¹å‘å†³å®šã€‚ flexå¸ƒå±€æ‹¥æœ‰çš„å±æ€§ï¼š çˆ¶å®¹å™¨çš„å±æ€§ display:flex | inline-flexã€‚ è¡¨æ˜è¿™ä¸ªå®¹å™¨æ˜¯flexå¸ƒå±€ã€‚flexæ˜¯å—ä¼¸ç¼©å®¹å™¨ï¼Œinline-flexæ˜¯å†…è”ä¼¸ç¼©å®¹å™¨ã€‚ flex-direction: row | row-reverse | column | column-reverse; è¡¨æ˜å®¹å™¨é‡Œé¢çš„å­å…ƒç´ çš„æ’åˆ—æ–¹å‘ã€‚ flex-wrap: nowrap | wrap | wrap-reverse; å¦‚æœå­å…ƒç´ æº¢å‡ºçˆ¶å®¹å™¨çš„æ—¶å€™æ˜¯å¦è¿›è¡Œæ¢è¡Œã€‚ justify-content: flex-start | flex-end | center | space-between | space-around; è¿™ä¸€ä¸ªå®¹å™¨å­å…ƒç´ æ¨ªå‘æ’ç‰ˆåœ¨å®¹å™¨çš„å“ªä¸ªä½ç½® align-items: flex-start | flex-end | center | baseline | stretch; è¿™ä¸ªå®¹å™¨å­å…ƒç´ çºµå‘æ’ç‰ˆåœ¨å®¹å™¨çš„å“ªä¸ªä½ç½® align-content: flex-start | flex-end | center | space-between | space-around | stretch; å½“å®¹å™¨å†…æœ‰å¤šè¡Œé¡¹ç›®çš„æ—¶å€™ï¼Œé¡¹ç›®çš„å¸ƒå±€ å­å…ƒç´ çš„å±æ€§ order: ; å­å…ƒç´ çš„æ’åº flex-grow: ; åˆ†é…å‰©ä½™ç©ºé—´çš„æ¯”ä¾‹ flex-shrink: ; åˆ†é…æº¢å‡ºç©ºé—´çš„æ¯”ä¾‹ flex-basis: | auto; flex: none | [ &lt;â€˜flex-growâ€™&gt; &lt;â€˜flex-shrinkâ€™&gt;? || &lt;â€˜flex-basisâ€™&gt; ] åœ¨å®¹å™¨ä¸­å æ¯” align-self: auto | flex-start | flex-end | center | baseline | stretch; ç‰¹å®šæŸä¸ªå­å…ƒç´ çš„æ’å¸ƒæƒ…å†µ å±æ€§è¯¦è§£ Flexå®¹å™¨å±æ€§ï¼š displayå±æ€§ displayå®šä¹‰äº†ä¸€ä¸ªFlexå®¹å™¨ï¼Œä¸ºå…¶å†…å®¹å»ºç«‹æ–°çš„ä¼¸ç¼©æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ã€‚å…¶ä¸­flexæ˜¯å—ä¼¸ç¼©å®¹å™¨ï¼Œinline-flexæ˜¯å†…è”ä¼¸ç¼©å®¹å™¨ã€‚ 123.container&#123; display: flex;/* or inline-flex*/&#125; å¦‚æœå…ƒç´ displayçš„å€¼æŒ‡å®šä¸ºinline-flexï¼Œè€Œä¸”å…ƒç´ æ˜¯ä¸€ä¸ªæµ®åŠ¨å…ƒç´ æˆ–ç»å¯¹å®šä½å…ƒç´ ï¼Œåˆ™displayçš„è®¡ç®—å€¼æ˜¯flexã€‚ flex-directionå±æ€§ flex-directionå®šä¹‰äº†flexå®¹å™¨é‡Œé¢çš„flexé¡¹ç›®çš„æ’åˆ—æ–¹å‘ï¼Œæ°´å¹³æ’åˆ—å’Œç«–ç›´æ’åˆ— 123.container &#123; flex-direction: row | row-reverse | column | column-reverse; &#125; row(é»˜è®¤å€¼): ä¸»è½´ä¸ºæ°´å¹³æ–¹å‘ï¼Œä»å·¦å‘å³æ’åˆ— row-reverse: ä¸»è½´ä¸ºæ°´å¹³æ–¹å‘ï¼Œä»å³å‘å·¦æ’åˆ— column: ä¸»è½´ä¸ºå‚ç›´æ–¹å‘ï¼Œä»ä¸Šåˆ°ä¸‹æ’åˆ— column-reverse: ä¸»è½´ä¸ºå‚ç›´æ–¹å‘ï¼Œä»ä¸‹å‘ä¸Šæ’åˆ— flex-wrapå±æ€§ flex-wrapå®šä¹‰äº†å½“ä¸€è¡Œæˆ–è€…ä¸€åˆ—æ’ä¸ä¸Šï¼Œflexé¡¹ç›®æ˜¯å¦æ¢è¡Œï¼Œé»˜è®¤æ˜¯ä¸æ¢è¡Œã€‚ 123.container &#123; flex-wrap: nowrap | wrap | wrap-reverse;&#125; nowrap(é»˜è®¤å€¼): å•è¡Œæ˜¾ç¤ºä¸æ¢è¡Œ wrap: å¤šè¡Œæ˜¾ç¤ºæ¢è¡Œï¼Œç¬¬ä¸€è¡Œåœ¨ä¸Šæ–¹ wrap-reverse: å¤šè¡Œæ˜¾ç¤ºæ¢è¡Œï¼Œç¬¬ä¸€è¡Œåœ¨ä¸‹æ–¹ flex-flowå±æ€§ flex-flowæ˜¯flex-directionå±æ€§å’Œflex-wrapå±æ€§çš„ç®€å†™å½¢å¼ï¼Œé»˜è®¤å€¼ä¸ºrow nowrapã€‚é“ç†å°±è·Ÿborder: 1px solid redç±»ä¼¼ï¼Œå¤šä¸ªå€¼å†™åœ¨åŒä¸€è¡Œã€‚ justify-contentå±æ€§ justify-contentå®šä¹‰äº†flexé¡¹ç›®åœ¨flexå®¹å™¨ä¸»è½´ä¸­çš„å¯¹é½æ–¹å¼ã€‚ 123container&#123; justify-content: &#123;flex-start | flex-end | center | space-between | space-around;&#125; flex-startï¼ˆé»˜è®¤å€¼ï¼‰ï¼šflexé¡¹ç›®åœ¨ä¸»è½´æ–¹å‘ä¸Šè¿›è¡Œå·¦å¯¹é½ flex-endï¼šflexé¡¹ç›®åœ¨ä¸»è½´æ–¹å‘ä¸Šè¿›è¡Œå³å¯¹é½ centerï¼š flexé¡¹ç›®åœ¨ä¸»è½´æ–¹å‘ä¸Šè¿›è¡Œå±…ä¸­ space-betweenï¼šflexé¡¹ç›®ä¸¤ç«¯å¯¹é½ï¼Œé¡¹ç›®ä¹‹é—´çš„é—´éš”éƒ½ç›¸ç­‰ã€‚ space-aroundï¼šæ¯ä¸ªé¡¹ç›®ä¸¤ä¾§çš„é—´éš”ç›¸ç­‰ã€‚æ‰€ä»¥ï¼Œé¡¹ç›®ä¹‹é—´çš„é—´éš”æ¯”é¡¹ç›®ä¸è¾¹æ¡†çš„é—´éš”å¤§ä¸€å€ã€‚ align-itemså±æ€§ align-itemså®šä¹‰äº†flexé¡¹ç›®åœ¨flexå®¹å™¨ç«–è½´ä¸Šçš„å¯¹é½æ–¹å¼ã€‚ç±»ä¼¼justify-contentå±æ€§ï¼Œåªä¸è¿‡æ˜¯æ–¹å‘ä¸åŒã€‚ 123container&#123; align-items: &#123;flex-start | flex-end | center | baseline | stretch;&#125; flex-startï¼ˆé»˜è®¤å€¼ï¼‰ï¼šflexé¡¹ç›®åœ¨flexå®¹å™¨ç«–è½´æ–¹å‘èµ·ç‚¹å¯¹é½ã€‚ flex-endï¼šflexé¡¹ç›®åœ¨flexå®¹å™¨ç«–è½´æ–¹å‘ç»ˆç‚¹å¯¹é½ã€‚ centerï¼šflexé¡¹ç›®åœ¨flexå®¹å™¨ç«–è½´æ–¹å‘ä¸­ç‚¹å¯¹é½ã€‚ baseline: é¡¹ç›®çš„ç¬¬ä¸€è¡Œæ–‡å­—çš„åŸºçº¿å¯¹é½ã€‚ stretchï¼šå¦‚æœé¡¹ç›®æœªè®¾ç½®é«˜åº¦æˆ–è®¾ä¸ºautoï¼Œå°†å æ»¡æ•´ä¸ªå®¹å™¨çš„é«˜åº¦ã€‚ align-contentå±æ€§ align-contentå±æ€§å®šä¹‰äº†å¤šæ ¹è½´çº¿çš„å¯¹é½æ–¹å¼ã€‚å½“ä¼¸ç¼©å®¹å™¨çš„ä¾§è½´è¿˜æœ‰å¤šä½™ç©ºé—´æ—¶ï¼Œalign-contentå±æ€§å¯ä»¥ç”¨æ¥è°ƒå‡†ä¼¸ç¼©è¡Œåœ¨ä¼¸ç¼©å®¹å™¨é‡Œçš„å¯¹é½æ–¹å¼ï¼Œè¿™ä¸è°ƒå‡†ä¼¸ç¼©é¡¹ç›®åœ¨ä¸»è½´ä¸Šå¯¹é½æ–¹å¼çš„justify-contentå±æ€§ç±»ä¼¼ã€‚ 123container&#123; align-items: &#123;flex-start | flex-end | center | baseline | stretch;&#125; flex-startï¼šä¸ç«–è½´æ–¹å‘çš„èµ·ç‚¹å¯¹é½ã€‚ flex-endï¼šä¸ç«–è½´æ–¹å‘çš„ç»ˆç‚¹å¯¹é½ã€‚ centerï¼šä¸ç«–è½´æ–¹å‘çš„ä¸­ç‚¹å¯¹é½ã€‚ space-betweenï¼šä¸ç«–è½´çš„ä¸¤ç«¯å¯¹é½ï¼Œè½´çº¿ä¹‹é—´çš„é—´éš”å¹³å‡åˆ†å¸ƒã€‚ space-aroundï¼šæ¯æ ¹è½´çº¿ä¸¤ä¾§çš„é—´éš”éƒ½ç›¸ç­‰ã€‚æ‰€ä»¥ï¼Œè½´çº¿ä¹‹é—´çš„é—´éš”æ¯”è½´çº¿ä¸è¾¹æ¡†çš„é—´éš”å¤§ä¸€å€ã€‚ stretchï¼ˆé»˜è®¤å€¼ï¼‰ï¼šè½´çº¿å æ»¡æ•´ä¸ªç«–è½´æ–¹å‘ã€‚ Flexé¡¹ç›®å±æ€§ï¼š orderå±æ€§ orderå±æ€§å®šä¹‰é¡¹ç›®çš„æ’åˆ—é¡ºåºã€‚æ•°å€¼è¶Šå°ï¼Œæ’åˆ—è¶Šé å‰ï¼Œé»˜è®¤ä¸º0ã€‚ 123.item &#123; order: &lt;integer&gt;;&#125; æ ¹æ®orderé‡æ–°æ’åºä¼¸ç¼©é¡¹ç›®ã€‚æœ‰æœ€å°ï¼ˆè´Ÿå€¼æœ€å¤§ï¼‰orderçš„ä¼¸ç¼©é¡¹ç›®æ’åœ¨ç¬¬ä¸€ä¸ªã€‚è‹¥æœ‰å¤šä¸ªé¡¹ç›®æœ‰ç›¸åŒçš„orderå€¼ï¼Œè¿™äº›é¡¹ç›®ç…§æ–‡ä»¶é¡ºåºæ’ã€‚è¿™ä¸ªæ­¥éª¤å½±å“äº†ä¼¸ç¼©é¡¹ç›®ç”Ÿç›’æ ‘æˆçš„ç›’å­çš„é¡ºåºï¼Œä¹Ÿå½±å“äº†åé¢çš„æ¼”ç®—æ³•å¦‚ä½•å¤„ç†å„é¡¹ç›®ã€‚ flex-growå±æ€§ flex-growå±æ€§å®šä¹‰é¡¹ç›®çš„æ”¾å¤§æ¯”ä¾‹ï¼Œé»˜è®¤ä¸º0ï¼Œå³å¦‚æœå­˜åœ¨å‰©ä½™ç©ºé—´ï¼Œä¹Ÿä¸æ”¾å¤§ã€‚flex-growå–è´Ÿå€¼å°†å¤±æ•ˆã€‚ 123.item &#123; flex-grow: &lt;number&gt;; /* default 0 */&#125; å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œè‹¥æ‰€æœ‰flexé¡¹ç›®çš„flex-growå±æ€§éƒ½ä¸º1ï¼Œåˆ™flexå®¹å™¨ä¸­çš„flexé¡¹ç›®å°ºå¯¸éƒ½ç›¸ç­‰ï¼Œè‹¥å…¶ä¸­ä¸€ä¸ªä¸º2å…¶ä»–ä¸º1ï¼Œåˆ™ä¸ºå…¶ä»–flexé¡¹ç›®çš„ä¸¤å€ã€‚ flex-shrinkå±æ€§ flex-shrinkå±æ€§åˆ™ä¸flex-growå±æ€§ç›¸åï¼Œå®šä¹‰äº†é¡¹ç›®çš„ç¼©å°æ¯”ä¾‹ï¼Œé»˜è®¤ä¸º1ï¼Œå³å¦‚æœç©ºé—´ä¸è¶³ï¼Œè¯¥é¡¹ç›®å°†ç¼©å°ã€‚ä¸flex-growä¸€æ ·ï¼Œflex-shrinkå–è´Ÿå€¼å°†å¤±æ•ˆã€‚ 123.item &#123; flex-shrink: &lt;number&gt;; /* default 1 */&#125; flex-basiså±æ€§ flex-basiså±æ€§å®šä¹‰äº†Flexé¡¹ç›®åœ¨åˆ†é…Flexå®¹å™¨å‰©ä½™ç©ºé—´ä¹‹å‰çš„ä¸€ä¸ªé»˜è®¤å°ºå¯¸ï¼Œé€šä¿—ä¸€ç‚¹æ˜¯è¯´åœ¨flex-growå’Œflex-shrinkå±æ€§è°ƒæ•´å®ƒçš„å¤§å°ä»¥é€‚åº”Flexå®¹å™¨ä¹‹å‰ï¼Œå¯ä»¥æŒ‡å®šFlexé¡¹ç›®çš„åˆå§‹å¤§å°ã€‚å®ƒçš„é»˜è®¤å€¼ä¸ºautoï¼Œå³é¡¹ç›®çš„æœ¬æ¥å¤§å°ã€‚flex-basiså¯ä»¥å–ä»»ä½•ç”¨äºwidthå±æ€§çš„ä»»ä½•å€¼ï¼Œæ¯”å¦‚ % || em || rem || pxç­‰ã€‚ æ³¨æ„ï¼šå¦‚æœflex-basiså±æ€§çš„å€¼æ˜¯0æ—¶ï¼Œä¹Ÿéœ€è¦ä½¿ç”¨å•ä½ã€‚å³flex-basis: 0pxä¸èƒ½å†™æˆflex-basis:0ã€‚ 123.item &#123; flex-basis: &lt;length&gt; | auto; /* default auto */ &#125; flexå±æ€§ flexå±æ€§æ˜¯flex-grow, flex-shrink å’Œ flex-basisçš„ç®€å†™ï¼Œé»˜è®¤å€¼ä¸º0 1 autoã€‚ æ³¨æ„ï¼šflex-growç¬¬ä¸€ï¼Œç„¶åæ˜¯flex-shrinkï¼Œæœ€åæ˜¯flex-basisã€‚ç¼©å†™æˆGSBã€‚ 123.item &#123; flex: 0 1 auto;/*flex-grow: 0; flex-shrink: 1; flex-basis: auto;*/&#125; flexå¸¸è§å€¼: flex: 0 auto,flex: initialä¸flex: 0 1 autoç›¸åŒã€‚æ ¹æ®widthï¼heightå±æ€§å†³å®šå…ƒç´ çš„å°ºå¯¸ã€‚ï¼ˆå¦‚æœé¡¹ç›®çš„ä¸»è½´é•¿åº¦å±æ€§çš„è®¡ç®—å€¼ä¸ºautoï¼Œåˆ™ä¼šæ ¹æ®å…¶å†…å®¹æ¥å†³å®šå…ƒç´ å°ºå¯¸ã€‚ï¼‰å½“å‰©ä½™ç©ºé—´ä¸ºæ­£å€¼æ—¶ï¼Œä¼¸ç¼©é¡¹ç›®æ— æ³•ä¼¸ç¼©ï¼Œä½†å½“ç©ºé—´ä¸è¶³æ—¶ï¼Œä¼¸ç¼©é¡¹ç›®å¯æ”¶ç¼©è‡³å…¶æœ€å°å€¼ã€‚ flex: autoä¸flex: 1 1 autoç›¸åŒã€‚æ ¹æ®widthï¼heightå±æ€§å†³å®šå…ƒç´ çš„å°ºå¯¸ï¼Œä½†æ˜¯å®Œå…¨å¯ä»¥ä¼¸ç¼©ï¼Œä¼šå¸æ”¶ä¸»è½´ä¸Šå‰©ä¸‹çš„ç©ºé—´ã€‚ flex: noneä¸flex: 0 0 autoç›¸åŒã€‚æ ¹æ®widthï¼heightå±æ€§å†³å®šå…ƒç´ çš„å°ºå¯¸ï¼Œä½†æ˜¯å®Œå…¨ä¸å¯ä¼¸ç¼©ï¼ŒåŸºæœ¬ä¸Šå°±æ˜¯ä¸€ä¸ªå›ºå®šå®½åº¦çš„å…ƒç´ ï¼Œåˆå§‹å®½åº¦æ˜¯åŸºäºflexé¡¹ç›®å†…å®¹å¤§å°ã€‚æ³¨æ„ï¼šå³ä½¿åœ¨ç©ºé—´ä¸å¤Ÿè€Œæº¢å‡ºçš„æƒ…å†µä¸‹ï¼Œä¼¸ç¼©é¡¹ç›®ä¹Ÿä¸èƒ½æ”¶ç¼©ã€‚ flex: ä¸flex: 1 0pxç›¸åŒã€‚è¯¥å€¼ä½¿å…ƒç´ å¯ä¼¸ç¼©ï¼Œå¹¶å°†ä¼¸ç¼©åŸºå‡†å€¼è®¾ç½®ä¸ºé›¶ï¼Œå¯¼è‡´è¯¥é¡¹ç›®ä¼šæ ¹æ®è®¾ç½®çš„æ¯”ç‡å ç”¨ä¼¸ç¼©å®¹å™¨çš„å‰©ä½™ç©ºé—´ã€‚å¦‚æœä¸€ä¸ªä¼¸ç¼©å®¹å™¨é‡Œçš„æ‰€æœ‰é¡¹ç›®éƒ½ä½¿ç”¨æ­¤æ¨¡å¼ï¼Œåˆ™å®ƒä»¬çš„å°ºå¯¸ä¼šæ­£æ¯”äºæŒ‡å®šçš„ä¼¸ç¼©æ¯”ç‡ã€‚ é»˜è®¤çŠ¶æ€ä¸‹ï¼Œä¼¸ç¼©é¡¹ç›®ä¸ä¼šæ”¶ç¼©è‡³æ¯”å…¶æœ€å°å†…å®¹å°ºå¯¸ï¼ˆæœ€é•¿çš„è‹±æ–‡è¯æˆ–æ˜¯å›ºå®šå°ºå¯¸å…ƒç´ çš„é•¿åº¦ï¼‰æ›´å°ã€‚ç½‘é¡µä½œè€…å¯ä»¥é è®¾ç½®min-widthæˆ–min-heightå±æ€§æ¥æ”¹å˜è¿™ä¸ªé»˜è®¤çŠ¶æ€. align-selfå±æ€§ align-selfå±æ€§å…è®¸å•ä¸ªé¡¹ç›®æœ‰ä¸å…¶ä»–é¡¹ç›®ä¸ä¸€æ ·çš„å¯¹é½æ–¹å¼ï¼Œå¯è¦†ç›–align-itemså±æ€§ã€‚é»˜è®¤å€¼ä¸ºautoï¼Œè¡¨ç¤ºç»§æ‰¿çˆ¶å…ƒç´ çš„align-itemså±æ€§ï¼Œå¦‚æœæ²¡æœ‰çˆ¶å…ƒç´ ï¼Œåˆ™ç­‰åŒäºstretchã€‚ .item { align-self: auto | flex-start | flex-end | center | baseline | stretch; } flex-start:ä¼¸ç¼©é¡¹ç›®åœ¨ä¾§è½´èµ·ç‚¹è¾¹çš„å¤–è¾¹è·ç´§é ä½è¯¥è¡Œåœ¨ä¾§è½´èµ·å§‹çš„è¾¹ã€‚ flex-end:ä¼¸ç¼©é¡¹ç›®åœ¨ä¾§è½´ç»ˆç‚¹è¾¹çš„å¤–è¾¹è·é ä½è¯¥è¡Œåœ¨ä¾§è½´ç»ˆç‚¹çš„è¾¹ ã€‚ center:ä¼¸ç¼©é¡¹ç›®çš„å¤–è¾¹è·ç›’åœ¨è¯¥è¡Œçš„ä¾§è½´ä¸Šå±…ä¸­æ”¾ç½®ã€‚ï¼ˆå¦‚æœä¼¸ç¼©è¡Œçš„å°ºå¯¸å°äºä¼¸ç¼©é¡¹ç›®ï¼Œåˆ™ä¼¸ç¼©é¡¹ç›®ä¼šå‘ä¸¤ä¸ªæ–¹å‘æº¢å‡ºç›¸åŒçš„é‡ï¼‰ã€‚ baseline:å¦‚æœä¼¸ç¼©é¡¹ç›®çš„è¡Œå†…è½´ä¸ä¾§è½´ä¸ºåŒä¸€æ¡ï¼Œåˆ™è¯¥å€¼å’Œflex-startç­‰æ•ˆã€‚å…¶å®ƒæƒ…å†µä¸‹ï¼Œè¯¥å€¼å°†å‚ä¸åŸºçº¿å¯¹é½ã€‚æ‰€æœ‰å‚ä¸è¯¥å¯¹é½æ–¹å¼çš„ä¼¸ç¼©é¡¹ç›®å°†æŒ‰ä¸‹åˆ—æ–¹å¼æ’åˆ—ï¼šé¦–å…ˆå°†è¿™äº›ä¼¸ç¼©é¡¹ç›®çš„åŸºçº¿è¿›è¡Œå¯¹é½ï¼Œéšåå…¶ä¸­åŸºçº¿è‡³ä¾§è½´èµ·ç‚¹è¾¹çš„å¤–è¾¹è·è·ç¦»æœ€é•¿çš„é‚£ä¸ªé¡¹ç›®å°†ç´§é ä½è¯¥è¡Œåœ¨ä¾§è½´èµ·ç‚¹çš„è¾¹ã€‚ stretch:å¦‚æœä¾§è½´é•¿åº¦å±æ€§çš„å€¼ä¸ºautoï¼Œåˆ™æ­¤å€¼ä¼šä½¿é¡¹ç›®çš„å¤–è¾¹è·ç›’çš„å°ºå¯¸åœ¨éµç…§min/max-width/heightå±æ€§çš„é™åˆ¶ä¸‹å°½å¯èƒ½æ¥è¿‘æ‰€åœ¨è¡Œçš„å°ºå¯¸ã€‚ åšå®¢ä¸­æœ‰äº›åœ°æ–¹æ˜¯å‚è€ƒé˜®è€å¸ˆçš„æ–‡ç« ï¼Œå†è‡ªå·±ä½œæ€»ç»“çš„ï¼Œå…·ä½“å¯ä»¥å‚è€ƒé˜®è€å¸ˆçš„ã€ŠFlexå¸ƒå±€æ•™ç¨‹ã€‹]]></content>
      <categories>
        <category>å‰ç«¯å¼€å‘</category>
      </categories>
      <tags>
        <tag>CSS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaScriptçš„å†…å­˜é—®é¢˜]]></title>
    <url>%2F2017%2F02%2F21%2Fjavascript-memory%2F</url>
    <content type="text"><![CDATA[ä¸€ç›´ä»¥æ¥ï¼Œå¯¹äºJsçš„å†…å­˜ç©ºé—´è¿™éƒ¨åˆ†çš„çŸ¥è¯†æ¦‚å¿µæœ‰äº›æ¨¡ç³Šï¼Œæœ€è¿‘åœ¨å›é¡¾ä¸€äº›çŸ¥è¯†ç‚¹çš„æ—¶å€™ï¼Œç‰¹åœ°çš„å¯¹jsçš„å†…å­˜è¿™éƒ¨åˆ†çŸ¥è¯†åŠ æ·±äº†ä¸€ä¸‹ç†è§£ï¼Œæ¯”å¦‚åŸºæœ¬ç±»å‹æ•°æ®å’Œå¼•ç”¨ç±»å‹æ•°æ®åœ¨jså†…å­˜ä¸­æ˜¯æ€ä¹ˆå›äº‹ï¼Ÿä»€ä¹ˆæ˜¯æŒ‰å€¼ä¼ é€’å’ŒæŒ‰å¼•ç”¨ä¼ é€’ï¼Ÿä»¥åŠå¯¹ä½œç”¨åŸŸå’Œé—­åŒ…çš„ç†è§£ç­‰ç­‰ã€‚ JavaScriptçš„å†…å­˜æ˜¯æ€æ ·çš„ï¼Ÿ JavaScriptä¸­æœ‰ä¸¤ç§ä¸åŒæ•°æ®ç±»å‹çš„å€¼ï¼Œä¸€ç§æ˜¯åŸå§‹å€¼ï¼Œå¦å¤–ä¸€ç§æ˜¯å¼•ç”¨ç±»å‹å€¼ï¼ŒåŸå§‹å€¼å°±æ˜¯å¸¸è¯´çš„åŸºæœ¬æ•°æ®ç±»å‹å€¼ï¼ŒåŒ…æ‹¬Stringã€Numberã€Booleanã€Undefinedå’ŒNullè¿™äº”å¤§åŸºæœ¬æ•°æ®ç±»å‹ï¼Œå¼•ç”¨å€¼æŒ‡çš„æ˜¯é‚£äº›å¯èƒ½ç”±å¤šä¸ªæŒ‡æ„æˆçš„å¯¹è±¡ï¼ŒåŒ…æ‹¬Object,Function,Arrayç­‰ç±»å‹çš„å€¼ã€‚ JavaScriptä¸­çš„å†…å­˜ä¹Ÿåˆ†ä¸ºæ ˆå†…å­˜å’Œå †å†…å­˜ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæ ˆå†…å­˜ä¸­å­˜æ”¾çš„æ˜¯å­˜å‚¨å¯¹è±¡çš„åœ°å€ï¼Œè€Œå †å†…å­˜ä¸­å­˜æ”¾çš„æ˜¯å­˜å‚¨å¯¹è±¡çš„å…·ä½“å†…å®¹ã€‚å¯¹äºåŸå§‹ç±»å‹çš„å€¼è€Œè¨€ï¼Œå…¶åœ°å€å’Œå…·ä½“å†…å®¹éƒ½å­˜åœ¨ä¸æ ˆå†…å­˜ä¸­ï¼›è€ŒåŸºäºå¼•ç”¨ç±»å‹çš„å€¼ï¼Œå…¶åœ°å€å­˜åœ¨æ ˆå†…å­˜ï¼Œå…¶å…·ä½“å†…å®¹å­˜åœ¨å †å†…å­˜ä¸­ã€‚å †å†…å­˜ä¸æ ˆå†…å­˜æ˜¯æœ‰åŒºåˆ«çš„ï¼Œæ ˆå†…å­˜è¿è¡Œæ•ˆç‡æ¯”å †å†…å­˜é«˜ï¼Œç©ºé—´ç›¸å¯¹å †å†…å­˜æ¥è¯´è¾ƒå°ï¼Œåä¹‹åˆ™æ˜¯å †å†…å­˜çš„ç‰¹ç‚¹ã€‚æ‰€ä»¥å°†æ„é€ ç®€å•çš„åŸå§‹ç±»å‹å€¼æ”¾åœ¨æ ˆå†…å­˜ä¸­ï¼Œå°†æ„é€ å¤æ‚çš„å¼•ç”¨ç±»å‹å€¼æ”¾åœ¨å †ä¸­è€Œä¸å½±å“æ ˆçš„æ•ˆç‡ã€‚ æˆ‘ä»¬çœ‹ä¸‹ä¸‹é¢Jsçš„å†…å­˜ç¤ºæ„å›¾ï¼š 12345678910111213141516 var a = 20; var b = 'abc'; var c = true; var d = &#123; m: 20 &#125;``` å¯ä»¥çœ‹å‡ºå˜é‡a,b,cå±äºåŸå§‹æ•°æ®ç±»å‹çš„å˜é‡ï¼Œå®ƒä»¬çš„å€¼éƒ½å­˜æ”¾åœ¨æ ˆå†…å­˜ä¸­ï¼Œè€Œdæ˜¯ä¸€ä¸ªå¯¹è±¡å³å±äºå¼•ç”¨å€¼ï¼Œæ ˆå†…å­˜ä¸­å­˜æ”¾çš„æ˜¯å®ƒçš„å†…å­˜åœ°å€ï¼ŒæŒ‡å‘å †å†…å­˜é‡Œé¢å…·ä½“çš„ä¸€ä¸ªå€¼ã€‚æ¥ç€æˆ‘ä»¬æ¥çœ‹ä¸‹é¢çš„ä¸€æ®µä»£ç ï¼š```js var a = &#123;n:1&#125;; var b = a; a.x = a = &#123;n:2&#125;; console.log(a.x);// --&gt; undefined console.log(b.x);// --&gt; [object Object] ä¸€å¼€å§‹çœ‹è¿™é“é¢˜ï¼Œç„¶åçœ‹ç­”æ¡ˆï¼Œä¸€è„¸æ‡µé€¼å•Šæœ‰æœ¨æœ‰ï¼Ÿï¼Ÿï¼Ÿä¸ºå•¥ç»“æœè¾“å‡ºçš„æ˜¯undefinedå’Œ[object Object]ï¼Ÿï¼Ÿï¼Ÿ äº†è§£äº†Jsçš„å˜é‡åœ¨å†…å­˜çš„å­˜å‚¨å½¢å¼ä¹‹åï¼Œæˆ‘ä»¬ä¸€èµ·æ¥è§£é‡Šä¸€ä¸‹ï¼š 1ã€aæ˜¯ä¸€ä¸ªå¼•ç”¨ç±»å‹çš„å˜é‡ï¼Œä¸€å¼€å§‹å®ƒåœ¨æ ˆå†…å­˜ä¸­çš„åœ°å€æ˜¯æŒ‡å‘å †å†…å­˜çš„å…·ä½“å†…å®¹{n:1}ï¼Œæ¥ç€èµ‹å€¼ç»™bï¼Œæ‰€ä»¥bå’Œaä¸€æ ·ï¼Œæ­¤æ—¶éƒ½æŒ‡å‘å¯¹è±¡{n:1}ï¼› 12var a = &#123;n:1&#125; ;var b = &#123;n:1&#125; ; 2ã€æ¥ä¸‹æ¥a.x = a = {n:2},æˆ‘ä»¬éƒ½çŸ¥é“jsçš„èµ‹å€¼è¿ç®—æ˜¯ä»å³å¾€å·¦çš„ï¼Œä½†â€œ.â€æ˜¯ä¼˜å…ˆçº§æœ€é«˜çš„è¿ç®—ç¬¦ï¼Œæ‰€ä»¥è¿™æ®µä»£ç å…ˆæ‰§è¡Œäº†a.x,æ‰€ä»¥æ­¤æ—¶å¯¹è±¡{n:1}æ–°å¢åŠ äº†ä¸€ä¸ªxçš„å±æ€§ï¼Œå¹¶ä¸”å€¼æ˜¯undefinedï¼Œæ‰€ä»¥è¿è¡Œåˆ°è¿™é‡Œaå’Œbéƒ½æŒ‡å‘äº†å¯¹è±¡{n:1,x:undefined}ï¼› 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192 var a = &#123;n:1ï¼Œx:undefined&#125; ; var b = &#123;n:1ï¼Œx:undefined&#125; ;``` 3ã€æ¥ç€ï¼Œä¾å¾ªâ€œä»å³å¾€å·¦â€çš„èµ‹å€¼è¿ç®—é¡ºåºå…ˆæ‰§è¡Œ a=&#123;n:2&#125; ï¼Œè¿™æ—¶å€™ï¼ŒaæŒ‡å‘çš„å¯¹è±¡å‘ç”Ÿäº†æ”¹å˜ï¼Œå˜æˆäº†æ–°å¯¹è±¡&#123;n:2&#125;;è€Œa.x = aåˆ™æ˜¯å¯¹è±¡&#123;n:1ï¼Œx:undefined&#125;ä¸­çš„å±æ€§xæŒ‡å‘äº†å¯¹è±¡&#123;n:2&#125;ï¼Œæ‰€ä»¥æ­¤æ—¶æŒ‡å‘çš„å¯¹è±¡å˜æˆäº†&#123;n:1,x:&#123;n:2&#125;&#125;ã€‚```js var a = &#123;n:2&#125; ; var b = &#123;n:1ï¼Œx:&#123;n:2&#125;&#125; ;``` ç»¼ä¸Šæ‰€è¿°ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æœ€åçš„è¿è¡Œç»“æœï¼Œæ˜¾ç„¶a.xæ˜¯undefinedï¼Œb.xæ˜¯å¯¹è±¡&#123;n:2&#125;,ç”¨å¯¹è±¡çš„å­—ç¬¦ä¸²å½¢å¼[object Object]è¡¨ç¤ºã€‚## Jsçš„å†…å­˜ç©ºé—´ç®¡ç†JavaScriptçš„å†…å­˜åˆ†é…å’Œå›æ”¶æ˜¯è‡ªåŠ¨å®Œæˆçš„ï¼Œæ»¡è¶³ä¸€å®šæ¡ä»¶ï¼Œå°±ä¼šè¢«åƒåœ¾å›æ”¶å™¨è‡ªåŠ¨å›æ”¶ï¼Œä¸‹é¢æˆ‘ä»¬ç®€å•çš„äº†è§£ä¸‹jsçš„å†…å­˜ç®¡ç†æœºåˆ¶ã€‚### JavaScriptçš„å†…å­˜ç”Ÿå‘½å‘¨æœŸ:1. åˆ†é…ä½ æ‰€éœ€è¦çš„å†…å­˜2. ä½¿ç”¨åˆ†é…åˆ°çš„å†…å­˜ï¼ˆè¯»ã€å†™ï¼‰3. ä¸éœ€è¦æ—¶å°†å…¶é‡Šæ”¾ã€å½’è¿˜```js var num = 10; // åœ¨å†…å­˜ä¸­ç»™æ•°å€¼å˜é‡åˆ†é…ç©ºé—´ alert(num); // ä½¿ç”¨å†…å­˜ num = null; // ä½¿ç”¨å®Œæ¯•ä¹‹åï¼Œé‡Šæ”¾å†…å­˜ç©ºé—´ var obj = &#123;v:1&#125;; // å†…å­˜ä¸­å­˜åœ¨&#123;v:1&#125;å¯¹è±¡ï¼ŒåŠobjè¿™ä¸ªå¼•ç”¨åœ°å€ obj = &#123;value:2&#125;; // åƒåœ¾å›æ”¶æœºåˆ¶è‡ªåŠ¨æ¸…ç†&#123;v:1&#125;ï¼Œå¹¶ä¸ºæ–°çš„æœ‰ç”¨åˆ°çš„&#123;value:2&#125;åˆ†é…ç©ºé—´``` ### åƒåœ¾å›æ”¶ç®—æ³•jsåƒåœ¾å›æ”¶æœ‰ä¸¤ç§å¸¸è§çš„ç®—æ³•ï¼šå¼•ç”¨è®¡æ•°å’Œæ ‡è®°æ¸…é™¤ã€‚#### å¼•ç”¨è®¡æ•°å¼•ç”¨è®¡æ•°å°±æ˜¯è·Ÿè¸ªå¯¹è±¡è¢«å¼•ç”¨çš„æ¬¡æ•°ï¼Œå½“ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨è®¡æ•°ä¸º0å³æ²¡æœ‰å…¶ä»–å¯¹è±¡å¼•ç”¨å®ƒæ—¶ï¼Œè¯´æ˜è¯¥å¯¹è±¡å·²ç»æ— éœ€è®¿é—®äº†ï¼Œå› æ­¤å°±ä¼šå›æ”¶å…¶æ‰€å çš„å†…å­˜ï¼Œè¿™æ ·ï¼Œå½“åƒåœ¾å›æ”¶å™¨ä¸‹æ¬¡è¿è¡Œå°±ä¼šé‡Šæ”¾å¼•ç”¨æ•°ä¸º0çš„å¯¹è±¡æ‰€å ç”¨çš„å†…å­˜ã€‚ &gt; ä½†å¼•ç”¨è®¡æ•°å­˜åœ¨ä¸€ä¸ªå¼Šç«¯å°±æ˜¯å¾ªç¯å¼•ç”¨é—®é¢˜ï¼ˆIE6å’ŒIE7å°±æ˜¯é‡‡ç”¨æ­¤ç®—æ³•ï¼‰ã€‚å¾ªç¯å¼•ç”¨å°±æ˜¯æŒ‡å¯¹è±¡Aä¸­åŒ…å«ä¸€ä¸ªæŒ‡å‘å¯¹è±¡Bçš„å¼•ç”¨ï¼Œè€Œå¯¹è±¡Bä¸­ä¹ŸåŒ…å«ä¸€ä¸ªæŒ‡å‘å¯¹è±¡çš„å¼•ç”¨ã€‚```js function problem() &#123; var A = &#123;&#125;; var B = &#123;&#125;; A.a = B; B.a = A;&#125;``` ä¸Šé¢ä¾‹å­å¯ä»¥çœ‹å‡ºå¯¹è±¡Aå’ŒBå­˜åœ¨å¾ªç¯éŸ³å¼•ç”¨çš„é—®é¢˜ï¼Œå³ä¸¤ä¸ªçš„å¼•ç”¨æ¬¡æ•°å‡ä¸º2ï¼Œå®ƒä»¬åœ¨è¿è¡Œä¹‹åä¾ç„¶å­˜åœ¨ï¼Œå¹¶ä¸”å¼•ç”¨æ¬¡æ•°æ°¸è¿œä¸ä¸º0ï¼Œå¦‚æœè¿™ä¸ªå‡½æ•°è¢«å¤šæ¬¡è°ƒç”¨ï¼Œå°±æœ‰å¯èƒ½å¼•èµ·å†…å­˜æ³„æ¼é—®é¢˜ã€‚ä¸ºäº†è§£å†³å¾ªç¯å¼•ç”¨çš„é—®é¢˜ï¼Œè¿˜æœ‰ä¸€ç§æ–¹æ³•å°±æ˜¯å¯ä»¥å®ç°åƒåœ¾å›æ”¶ï¼Œé‚£å°±æ˜¯æ ‡è®°æ¸…é™¤æ³•ã€‚#### æ ‡è®°æ¸…é™¤æ ‡è®°æ¸…é™¤æ³•æ˜¯ç°ä»£æµè§ˆå™¨å¸¸ç”¨çš„ä¸€ç§åƒåœ¾æ”¶é›†æ–¹å¼ï¼Œå½“å˜é‡è¿›å…¥ç¯å¢ƒï¼ˆå³åœ¨ä¸€ä¸ªå‡½æ•°ä¸­å£°æ˜ä¸€ä¸ªå˜é‡ï¼‰æ—¶ï¼Œå°±å°†æ­¤å˜é‡æ ‡è®°ä¸ºâ€œè¿›å…¥ç¯å¢ƒâ€ï¼Œè¿›å…¥ç¯å¢ƒçš„å˜é‡æ˜¯ä¸èƒ½è¢«é‡Šæ”¾ï¼Œå› ä¸ºåªæœ‰æ‰§è¡Œæµè¿›å…¥ç›¸åº”çš„ç¯å¢ƒï¼Œå°±å¯èƒ½ä¼šå¼•ç”¨å®ƒä»¬ã€‚è€Œå½“å˜é‡ç¦»å¼€ç¯å¢ƒæ—¶ï¼Œå°±æ ‡è®°ä¸ºâ€œç¦»å¼€ç¯å¢ƒâ€ã€‚åƒåœ¾æ”¶é›†å™¨åœ¨è¿è¡Œæ—¶ä¼šç»™å‚¨å­˜åœ¨å†…å­˜ä¸­çš„æ‰€æœ‰å˜é‡åŠ ä¸Šæ ‡è®°ï¼Œç„¶åä¼šå»æ‰ç¯å¢ƒä¸­çš„å˜é‡ä»¥åŠè¢«ç¯å¢ƒä¸­çš„å˜é‡å¼•ç”¨çš„å˜é‡çš„æ ‡è®°ï¼Œå½“æ‰§è¡Œå®Œæ¯•é‚£äº›æ²¡æœ‰å­˜åœ¨å¼•ç”¨æ— æ³•è®¿é—®çš„å˜é‡å°±è¢«åŠ ä¸Šæ ‡è®°ï¼Œæœ€ååƒåœ¾æ”¶é›†å™¨å®Œæˆæ¸…é™¤å·¥ä½œï¼Œé‡Šæ”¾æ‰é‚£äº›æ‰“ä¸Šæ ‡è®°çš„å˜é‡æ‰€å çš„å†…å­˜ã€‚&gt; æ ‡è®°æ¸…é™¤ä¹‹æ‰€ä»¥ä¸å­˜åœ¨å¾ªç¯å¼•ç”¨çš„é—®é¢˜ï¼Œæ˜¯å› ä¸ºå½“å‡½æ•°æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œå¯¹è±¡Aå’ŒBå°±å·²ç»ç¦»å¼€äº†æ‰€åœ¨çš„ä½œç”¨åŸŸï¼Œæ­¤æ—¶ä¸¤ä¸ªå˜é‡è¢«æ ‡è®°ä¸ºâ€œç¦»å¼€ç¯å¢ƒâ€ï¼Œç­‰å¾…è¢«åƒåœ¾æ”¶é›†å™¨å›æ”¶ï¼Œæœ€åé‡Šæ”¾å…¶å†…å­˜ã€‚### ç®¡ç†å†…å­˜ä½¿ç”¨å…·å¤‡åƒåœ¾æ”¶é›†æœºåˆ¶çš„è¯­è¨€ç¼–å†™ç¨‹åºï¼Œå¼€å‘äººå‘˜ä¸€èˆ¬éƒ½ä¸å¿…æ‹…å¿ƒå†…å­˜ç®¡ç†çš„é—®é¢˜ã€‚ä½†JavaScriptåœ¨è¿›è¡Œå†…å­˜ç®¡ç†ä»¥åŠåƒåœ¾æ”¶é›†æ—¶é¢ä¸´çš„é—®é¢˜è¿˜æ˜¯æœ‰äº›ä¸åŒã€‚å‡ºäºå®‰å…¨æ–¹é¢çš„è€ƒè™‘ï¼Œç³»ç»Ÿåˆ†é…ç»™æµè§ˆå™¨çš„å¯ç”¨å†…å­˜æ•°é‡é€šå¸¸è¦æ¯”åˆ†é…ç»™æ¡Œé¢åº”ç”¨ç¨‹åºçš„å°‘ï¼Œé˜²æ­¢JavaScriptçš„ç½‘é¡µè€—å°½å…¨éƒ¨ç³»ç»Ÿå†…å­˜è€Œå¯¼è‡´ç³»ç»Ÿå´©æºƒã€‚å†…å­˜é™åˆ¶é—®é¢˜ä¸ä»…ä¼šå½±å“ç»™å˜é‡åˆ†é…å†…å­˜ï¼ŒåŒæ—¶è¿˜ä¼šå½±å“è°ƒç”¨æ ˆä»¥åŠåœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­èƒ½å¤ŸåŒæ—¶æ‰§è¡Œçš„è¯­å¥æ•°é‡ã€‚ å› æ­¤ä¸ºäº†ç¡®ä¿å ç”¨æœ€å°‘çš„å†…å­˜å¯ä»¥è®©é¡µé¢è·å–æ›´å¥½çš„æ€§èƒ½ã€‚ä¼˜åŒ–å†…å­˜å ç”¨çš„æœ€ä½³æ–¹å¼å°±æ˜¯ä¸ºæ‰§è¡Œä¸­çš„ä»£ç åªä¿å­˜å¿…è¦çš„æ•°æ®ã€‚ä¸€æ—¦æ•°æ®ä¸å†æœ‰ç”¨ï¼Œæœ€å¥½é€šè¿‡å°†å…¶å€¼è®¾ç½®ä¸ºnullæ¥é‡Šæ”¾å…¶å¼•ç”¨ï¼Œå³è§£é™¤å¼•ç”¨ã€‚è¿™ä¸€åšæ³•é€‚ç”¨äºå¤§å¤šå…¨å±€å˜é‡å’Œå…¨å±€å¯¹è±¡çš„å±æ€§ã€‚å±€éƒ¨å˜é‡ä¼šåœ¨å®ƒä»¬ç¦»å¼€æ‰§è¡Œç¯å¢ƒæ—¶è‡ªåŠ¨è¢«è§£é™¤å¼•ç”¨ã€‚ï¼ˆå…·ä½“è¯·é˜…è¯»ã€ŠJavaScripté«˜çº§ç¨‹åºè®¾è®¡ã€‹ç¬¬å››ç« ï¼‰å¯ä»¥åˆ†æä»¥ä¸‹ä»£ç ï¼š```js function createPerson(name)&#123; var localPerson = new Object(); localPerson.name = name; return localPerson; &#125; var globalPerson = createPerson("Junga"); globalPerson = null;//æ‰‹åŠ¨è§£é™¤å…¨å±€å˜é‡çš„å¼•ç”¨``` åœ¨è¿™ä¸ªğŸŒ°ä¸­ï¼Œå˜é‡globalPersonå–å¾—äº†createPerson()å‡½æ•°çš„è¿”å›çš„å€¼ã€‚åœ¨createPerson()çš„å†…éƒ¨åˆ›å»ºäº†ä¸€ä¸ªå±€éƒ¨å˜é‡localPersonå¹¶æ·»åŠ äº†ä¸€ä¸ªnameå±æ€§ã€‚ç”±äºlocalPersonåœ¨å‡½æ•°æ‰§è¡Œå®Œæ¯•ä¹‹åå°±ç¦»å¼€æ‰§è¡Œç¯å¢ƒï¼Œå› æ­¤ä¼šè‡ªåŠ¨è§£é™¤å¼•ç”¨ï¼Œè€Œå¯¹äºå…¨å±€å˜é‡æ¥è¯´åˆ™éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨è®¾ç½®nullï¼Œè§£é™¤å¼•ç”¨ã€‚&gt; ä¸è¿‡ï¼Œè§£é™¤ä¸€ä¸ªå€¼çš„å¼•ç”¨å¹¶ä¸æ„å‘³ç€è‡ªåŠ¨å›æ”¶è¯¥å€¼æ‰€å ç”¨çš„å†…å­˜ï¼Œè§£é™¤å¼•ç”¨çœŸæ­£çš„ä½œç”¨æ˜¯è®©å€¼è„±ç¦»æ‰§è¡Œç¯å¢ƒï¼Œä»¥ä¾¿åƒåœ¾æ”¶é›†å™¨ä¸‹æ¬¡è¿è¡Œæ—¶å°†å…¶æ”¶å›ã€‚## å†…å­˜ä¼˜åŒ–&gt; å¯¹äºå…¨å±€å˜é‡ï¼ŒJavaScriptä¸èƒ½ç¡®å®šå®ƒåœ¨åé¢ä¸èƒ½å¤Ÿè¢«ç”¨åˆ°ï¼Œæ‰€ä»¥å®ƒä¼šä»å£°æ˜ä¹‹åå°±ä¸€ç›´å­˜åœ¨äºå†…å­˜ä¸­ï¼Œç›´è‡³æ‰‹åŠ¨é‡Šæ”¾æˆ–è€…å…³é—­é¡µé¢/æµè§ˆå™¨ï¼Œè¿™å°±å¯¼è‡´äº†æŸäº›ä¸å¿…è¦çš„å†…å­˜æ¶ˆè€—ã€‚æˆ‘ä»¬å¯ä»¥è¿›è¡Œä»¥ä¸‹çš„ä¼˜åŒ–:### ç«‹å³æ‰§è¡Œå‡½æ•°çš„è¿ç”¨```js ;(function(window, $, undefined) &#123; // ä¸»ä¸šåŠ¡ä»£ç  &#125;)(window, jQuery); ç«‹å³æ‰§è¡Œå‡½æ•°çš„ä½œç”¨å°±æ˜¯å»ºç«‹ä¸€ä¸ªç‹¬ç«‹çš„ä½œç”¨åŸŸï¼Œå…¶ä¸€æ˜¯ä¸ºäº†é˜²æ­¢å…¨å±€æ±¡æŸ“ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥é˜²æ­¢è¿‡å¤šçš„å®šä¹‰å…¨å±€å˜é‡é€ æˆçš„å†…å­˜å›æ”¶é—®é¢˜ã€‚å¦‚æœä½ çš„æŸäº›å˜é‡çœŸçš„éœ€è¦ä¸€ç›´å­˜åœ¨å¯ä»¥é€šè¿‡ä¸Šé¢çš„æ–¹æ³•æŒ‚è½½åœ¨windowä¸‹ã€‚åŒæ ·ï¼Œä½ ä¹Ÿå¯ä»¥ä¼ å…¥jQueryè¿›è¡Œä½¿ç”¨ã€‚ æ‰‹åŠ¨è§£é™¤å˜é‡çš„å¼•ç”¨ 12var obj = &#123;a:1,b:2,c:3&#125;;obj = null; ä½¿ç”¨å›è°ƒ é™¤äº†ä½¿ç”¨é—­åŒ…è¿›è¡Œå†…éƒ¨å˜é‡è®¿é—®ï¼Œå›è°ƒå‡½æ•°ä¹Ÿæœ‰è¿™ä¸ªåŠŸèƒ½ã€‚ 1234567function getData(callback) &#123; var data = 'Junga'; callback(data);&#125;getData(function(data) &#123; console.log(data);&#125;); å›è°ƒå‡½æ•°æ˜¯ä¸€ç§åç»­ä¼ é€’é£æ ¼(Continuation Passing Style, CPS)çš„æŠ€æœ¯ï¼Œè¿™ç§é£æ ¼çš„ç¨‹åºç¼–å†™å°†å‡½æ•°çš„ä¸šåŠ¡é‡ç‚¹ä»è¿”å›å€¼è½¬ç§»åˆ°å›è°ƒå‡½æ•°ä¸­å»ã€‚è€Œä¸”å…¶ç›¸æ¯”é—­åŒ…çš„å¥½å¤„ä¹Ÿä¸å°‘ï¼š å¦‚æœä¼ å…¥çš„å‚æ•°æ˜¯åŸºç¡€ç±»å‹ï¼ˆå¦‚å­—ç¬¦ä¸²ã€æ•°å€¼ï¼‰ï¼Œå›è°ƒå‡½æ•°ä¸­ä¼ å…¥çš„å½¢å‚å°±ä¼šæ˜¯å¤åˆ¶å€¼ï¼Œä¸šåŠ¡ä»£ç ä½¿ç”¨å®Œæ¯•ä»¥åï¼Œæ›´å®¹æ˜“è¢«å›æ”¶ï¼› é€šè¿‡å›è°ƒï¼Œæˆ‘ä»¬é™¤äº†å¯ä»¥å®ŒæˆåŒæ­¥çš„è¯·æ±‚å¤–ï¼Œè¿˜å¯ä»¥ç”¨åœ¨å¼‚æ­¥ç¼–ç¨‹ä¸­ï¼Œè¿™ä¹Ÿå°±æ˜¯ç°åœ¨éå¸¸æµè¡Œçš„ä¸€ç§ç¼–å†™é£æ ¼ï¼› å›è°ƒå‡½æ•°è‡ªèº«é€šå¸¸ä¹Ÿæ˜¯ä¸´æ—¶çš„åŒ¿åå‡½æ•°ï¼Œä¸€æ—¦è¯·æ±‚å‡½æ•°æ‰§è¡Œå®Œæ¯•ï¼Œå›è°ƒå‡½æ•°è‡ªèº«çš„å¼•ç”¨å°±ä¼šè¢«è§£é™¤ï¼Œè‡ªèº«ä¹Ÿå¾—åˆ°å›æ”¶ã€‚]]></content>
      <categories>
        <category>å‰ç«¯å¼€å‘</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å…³äºjsäº‹ä»¶å¾ªç¯çš„é‚£ç‚¹ä¸€çŸ¥åŠè§£]]></title>
    <url>%2F2017%2F02%2F17%2Fevent-Loop%2F</url>
    <content type="text"><![CDATA[èµ·æº æœ€è¿‘åœ¨å›é¡¾ä¸€äº›çŸ¥è¯†ç‚¹ï¼Œä¹Ÿè§£æƒ‘äº†ä¸€äº›ä¹‹å‰ä¸æ‡‚çš„çŸ¥è¯†ç‚¹ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ä¹Ÿé¥¶æœ‰å…´è‡´çš„æäº†ä¸€ä¸ªä¸ªäººåšå®¢ï¼Œç°åœ¨çœ‹æ¥è¿˜ä¸é”™ï¼Œå³å¯ä»¥æ€»ç»“è®°å½•ä¸€äº›çŸ¥è¯†ç‚¹ï¼Œåˆå¯ä»¥åˆ†äº«ï¼Œè™½ç„¶ç°åœ¨æ˜¯ç»™è‡ªå·±çš„çœ‹åˆ°å“ˆå“ˆå“ˆ~~~ å…¶ä¸­åœ¨ç½‘ä¸Šçœ‹åˆ°äº†ä¸€é“é¢è¯•é¢˜ï¼Œè·Ÿä¹‹å‰å»æŸå…¬å¸ç»™çš„ä¸€é“é¢è¯•é¢˜ä¸€æ¯›ä¸€æ ·ï¼Œæ¶‰åŠåˆ°çš„æ˜¯é•¿æ•°ç»„é€’å½’å¯èƒ½é€ æˆjsçš„å †æ ˆæº¢å‡ºï¼Œè€Œååˆä»å †æ ˆæº¢å‡ºå¼•ç”³äº†è§£åˆ°äº†JSçš„äº‹ä»¶å¾ªç¯ï¼Œæ€»ç®—æ˜¯å¯¹æ­¤æœ‰äº†ä¸€çŸ¥åŠè§£ã€‚ å…ˆçœ‹çœ‹ä¸‹é¢è¿™é“é¢è¯•é¢˜ï¼š å¦‚æœ list å¾ˆå¤§ï¼Œä¸‹é¢çš„è¿™æ®µé€’å½’ä»£ç ä¼šé€ æˆå †æ ˆæº¢å‡ºã€‚å¦‚æœåœ¨ä¸æ”¹å˜é€’å½’æ¨¡å¼çš„å‰æä¸‹ä¿®å–„è¿™æ®µä»£ç : var list = readHugeList(); var nextListItem = function() { var item = list.pop(); if (item) { // process the list item... nextListItem(); } }; ä¹‹å‰æ˜¯åˆšæ¯•ä¸šä¸ä¹…å»æŸå…¬å¸ç¢°åˆ°çš„ä¸€é“é¢è¯•é¢˜ï¼Œå½“æ—¶å¯¹jsçš„ä¸€äº›çŸ¥è¯†æŒæ¡çš„ä¸æ˜¯å¾ˆæ·±åˆ»ï¼Œè¿™é“é¢˜å®Œå…¨ä¸çŸ¥é“æ€ä¹ˆå»è§£å†³ï¼Ÿåé¢è¿™é“å°±æ²¡å†™ï¼Œæœ€åé¢è¯•ä»¥å¤±è´¥å‘Šç»ˆã€‚ä¸è¿‡é‚£æ¬¡ä¹‹åä¹Ÿå‘ç°è‡ªå·±çš„ä¸è¶³ï¼Œä»»é‡è€Œé“è¿œå•Šã€‚å…¶ä»–åºŸè¯ä¸å¤šè¯´äº†ï¼Œè¿›å…¥æ­£é¢˜å§ï¼ ä¸Šé¢é‚£é“é¢˜çš„ç­”æ¡ˆæ˜¯åŠ ä¸€ä¸ªsetTimeoutçš„å®šæ—¶å™¨ï¼š var list = readHugeList(); var nextListItem = function() { var item = list.pop(); if (item) { // process the list item... setTimeout( nextListItem, 0); } }; ä¹‹åè¿˜æ˜¯æœ‰äº›å›°æƒ‘ä¸è§£ï¼Œåé¢æŸ¥äº†ä¸€äº›èµ„æ–™ä¹‹åï¼ŒåŸæ¥æ¶‰åŠåˆ°äº†JavaScriptçš„äº‹ä»¶å¾ªç¯æœºåˆ¶ã€‚ JSçš„äº‹ä»¶å¾ªç¯æœºåˆ¶ æˆ‘ä»¬éƒ½çŸ¥é“ï¼ŒJSæ˜¯å•çº¿ç¨‹çš„ç¼–ç¨‹è¯­è¨€ï¼Œå³åœ¨jsè¿è¡Œæ—¶ï¼Œæ‰€æœ‰çš„ä»»åŠ¡æ˜¯ä¸€ä¸ªé˜Ÿåˆ—ï¼Œåªæœ‰å‰ä¸€ä¸ªä»»åŠ¡å®Œæˆäº†ï¼Œä¸‹ä¸€ä¸ªä»»åŠ¡æ‰ä¼šç»§ç»­æ‰§è¡Œã€‚å› æ­¤ï¼Œå¦‚æœå‰é¢ä¸€ä¸ªä»»åŠ¡è€—æ—¶å¾ˆé•¿ï¼Œé‚£ä¹ˆä¸‹ä¸€ä¸ªä»»åŠ¡å°±è¦é•¿æ—¶é—´ç­‰å¾…ï¼Œå¯æƒ³è€ŒçŸ¥ï¼Œè¿™æ ·çš„å¤„ç†ä»»åŠ¡æ•ˆç‡éå¸¸ä½ã€‚ JavaScriptè¯­è¨€çš„è®¾è®¡è€…æ„è¯†åˆ°ï¼Œè¿™æ—¶ä¸»çº¿ç¨‹å®Œå…¨å¯ä»¥ä¸ç®¡IOè®¾å¤‡ï¼ŒæŒ‚èµ·å¤„äºç­‰å¾…ä¸­çš„ä»»åŠ¡ï¼Œå…ˆè¿è¡Œæ’åœ¨åé¢çš„ä»»åŠ¡ã€‚äºæ˜¯ï¼Œæ‰€æœ‰ä»»åŠ¡å¯ä»¥åˆ†æˆä¸¤ç§ï¼Œä¸€ç§æ˜¯åŒæ­¥ä»»åŠ¡ï¼ˆsynchronousï¼‰ï¼Œå¦ä¸€ç§æ˜¯å¼‚æ­¥ä»»åŠ¡ï¼ˆasynchronousï¼‰ã€‚ ç”±æ­¤ï¼ŒJavaScriptçš„è¿è¡Œæœºåˆ¶å¯ä»¥ç®€å•ç†è§£ä¸ºä¸€ä¸ªä¸»çº¿ç¨‹å’Œä¸€ä¸ªä»»åŠ¡é˜Ÿåˆ—ï¼Œè„šæœ¬è¿è¡Œæ—¶å…ˆè¿è¡Œä¸»çº¿ç¨‹ï¼Œä¸»çº¿ç¨‹è¿è¡Œå®Œåï¼Œä»â€ä»»åŠ¡é˜Ÿåˆ—â€ä¸­è¯»å–äº‹ä»¶ï¼Œè¿è¡Œä»»åŠ¡é˜Ÿåˆ—çš„ä»»åŠ¡ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯å¾ªç¯ä¸æ–­çš„ï¼Œåˆç§°Event Loopï¼ˆäº‹ä»¶å¾ªç¯ï¼‰ã€‚æ³¨æ„åªè¦ä¸»çº¿ç¨‹çš„ä»»åŠ¡æ²¡æœ‰è¿è¡Œå®Œï¼Œå¼‚æ­¥é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡æ°¸è¿œä¹Ÿæ— æ³•è¿è¡Œï¼Œæ‰€ä»¥ä¼šå¯¼è‡´æµè§ˆå™¨å‡ºç°å‡æ­»çš„æƒ…å†µã€‚æˆ‘ä»¬å¯ä»¥çœ‹ä¸€ä¸‹å›¾è§£ï¼ˆè½¬å¼•è‡ªé˜®è€å¸ˆçš„JavaScript è¿è¡Œæœºåˆ¶è¯¦è§£ï¼šå†è°ˆEvent Loopï¼‰ã€‚ è§£å†³ æ‰€è°“çš„äº‹ä»¶å¾ªç¯ä¸æ˜¯å•çº¯åªæœ‰JSçš„äº‹ä»¶ç±»å‹å»è§¦å‘ï¼Œç±»ä¼¼setTimeoutå¼€å¯çš„å»¶æ—¶çº¿ç¨‹ï¼Œå½“ä¸»çº¿ç¨‹è¿è¡Œä¹‹åï¼Œåœ¨ä¸€å®šçš„æ—¶é—´ä¼šè§¦å‘setTimeoutçš„å¼‚æ­¥ä»»åŠ¡ï¼Œæ­¤æ—¶ä»»åŠ¡ä¾¿ä»æ¶ˆæ¯é˜Ÿåˆ—ç§»é™¤è¿›å…¥ä¸»çº¿ç¨‹å®Œæˆæ‰§è¡Œï¼Œæ‰€ä»¥setTimeoutäº¦å¯ä»¥çœ‹åšæ˜¯ç”±æ—¶é—´çš„é•¿çŸ­æ¥å®šæ—¶è§¦å‘çš„ä¸€ç§äº‹ä»¶. æˆ‘ä»¬æ¥çœ‹ä¸‹é¢çš„ä»£ç ï¼š console.log('a'); setTimeout(function(){ console.log('b'); },0); console.log('c'); ä¸Šè¿°è¿è¡Œç»“æœä¾æ¬¡è¾“å‡ºçš„æ˜¯ acbï¼›åŸå› æ˜¯jsæ‰§è¡Œæ—¶åŒæ­¥åŠ ä»¥ä¸Šä»»åŠ¡æ”¾å…¥ä¸»çº¿ç¨‹ï¼Œè€Œé‡åˆ°setTimeoutä¹‹åå¼€å¯äº†ä¸€ä¸ªå»¶æ—¶çº¿ç¨‹ï¼Œè¿›å…¥äº†å¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—ï¼Œç­‰åˆ°ä¸»çº¿ç¨‹çš„ä»»åŠ¡éƒ½å®Œæˆä¹‹åï¼Œå†è¯»å–ä»»åŠ¡é˜Ÿåˆ—ï¼Œæ‰€ä»¥è¾“å‡ºçš„ç»“æœæ˜¯acbã€‚ éœ€è¦è¿›ä¸€æ­¥è§£é‡Šçš„æ˜¯ï¼šè¿™é‡Œçš„é›¶å»¶è¿Ÿä¸æ˜¯è¯´setTimeoutä¼šè¢«ç«‹åˆ»æ‰§è¡Œï¼Œæ˜¯è¯´ç­‰åˆ°ä¸»çº¿ç¨‹æ‰§è¡Œå®Œæˆï¼Œå¹¶ä¸”ä»»åŠ¡é˜Ÿåˆ—ä¸­æ²¡æœ‰å…¶ä»–ä»»åŠ¡æ—¶ï¼ŒsetTimeoutçš„å›è°ƒå‡½æ•°æ‰ä¼šè¢«æ‰§è¡Œï¼Œæœ€é‡è¦çš„ä¸€ç‚¹å°±æ˜¯setTimeoutè®¾ç½®çš„æ—¶é—´å¹¶éå›è°ƒå‡½æ•°ä¼šåœ¨è¿™ä¸ªæ—¶é—´é—´éš”ä¹‹åç«‹å³è¿è¡Œï¼Œä»…ä»…è¡¨ç¤ºçš„æ˜¯æœ€å°‘æ—¶é—´è€Œéç¡®åˆ‡çš„æ—¶é—´ï¼Œå› ä¸ºä¸»çº¿ç¨‹ä»»åŠ¡éœ€è¦æ‰§è¡Œå®Œæˆä¸ºç©ºæ—¶ï¼Œæ‰ä¼šå¤„ç†ä»»åŠ¡é˜Ÿåˆ—çš„æ¶ˆæ¯å¤„ç†å³å›è°ƒå‡½æ•°ï¼Œæ‰€ä»¥setTimeoutæ‰§è¡Œå›è°ƒå‡½æ•°æ‰€ç­‰å¾…çš„æ—¶é—´æ¯”å®ƒè®¾å®šçš„æ—¶é—´å‚æ•°è¦é•¿ã€‚ ç°åœ¨æˆ‘ä»¬å¯ä»¥å›è¿‡å¤´å»è§£é‡Šåˆšå¼€å§‹é‚£é“ç”¨setTimeoutæ¥è§£å†³å†…å­˜æº¢å‡ºçš„é¢è¯•é¢˜: åœ¨æ²¡æœ‰ç”¨setTimeoutè¿›è¡Œé€’å½’æ—¶ï¼Œå½“æ•°ç»„è¿‡å¤§ï¼Œä¸æ–­è¿›è¡Œé€’å½’è°ƒç”¨ï¼Œä¸»çº¿ç¨‹çš„ä»»åŠ¡æ•°é‡ä¼šä¸æ–­å åŠ ï¼Œå½“è¾¾åˆ°ä¸€å®šå¤§å°å°±ä¼šé€ æˆå †æ ˆæº¢å‡ºï¼Œè€Œå½“é€’å½’å‡½æ•°æ”¾åˆ°setTimeoutè¿›è¡Œå¼‚æ­¥æ‰§è¡Œï¼Œæ­¤æ—¶ç›¸å½“äºå¼€äº†å¦å¤–ä¸€ä¸ªå»¶æ—¶çº¿ç¨‹ï¼Œä¸»çº¿ç¨‹å°±è´Ÿè´£è°ƒç”¨setTimeoutè¿™ä¸ªå¼‚æ­¥çº¿ç¨‹æ‰§è¡Œä»»åŠ¡å°±å¯ä»¥ï¼Œä¸€æ‰§è¡Œå®Œæˆå°±é‡Šæ”¾ï¼Œå°±ä¸ä¼šé€ æˆå †æ ˆæº¢å‡ºã€‚]]></content>
      <categories>
        <category>å‰ç«¯å¼€å‘</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[CSSä¹‹æ¸…é™¤æµ®åŠ¨]]></title>
    <url>%2F2017%2F02%2F16%2Fcss-clearFloat%2F</url>
    <content type="text"><![CDATA[é¢è¯•çš„æ—¶å€™ï¼Œå…³äºæ¸…é™¤æµ®åŠ¨çš„é—®é¢˜ç»å¸¸ä¼šè¢«è€ƒå¯Ÿï¼Œä¸€å¼€å§‹å¯¹æ¸…é™¤æµ®åŠ¨äº†è§£ä¸æ·±ï¼ŒåªçŸ¥é“cssæœ‰ä¸ªclearå±æ€§ã€‚åœ¨å¹³æ—¶å¼€å‘ä¸­ä¹Ÿç»å¸¸ä¼šç”¨åˆ°floatå¸ƒå±€æ–¹å¼ï¼Œä¹‹å‰å› ä¸ºäº†è§£ä¸æ·±ï¼Œæ‰€ä»¥ä½¿ç”¨è¿™ç§å¸ƒå±€çš„æ—¶å€™ç»å¸¸å‡ºç°é—®é¢˜ã€‚åé¢æŸ¥æ‰¾èµ„æ–™æ‰å‘ç°åŸæ¥æ¸…é™¤æµ®åŠ¨åé¢å¤§æœ‰å­¦é—®ï¼Œäº†è§£æ¸…é™¤æµ®åŠ¨æœ‰åˆ©äºæˆ‘ä»¬å¯¹å¸ƒå±€çš„å¼€å‘ï¼Œä¸‹é¢æ˜¯å¯¹äº†è§£ä¹‹åä½œå‡ºçš„ä¸€äº›æ€»ç»“ï¼Œå¯èƒ½æ€»ç»“çš„ä¸å…¨é¢ã€‚ åœ¨äº†è§£æ¸…é™¤æµ®åŠ¨ä¹‹å‰ï¼Œå…ˆçœ‹ä¸‹ä»€ä¹ˆæ˜¯BFCã€‚ äº†è§£BFC é¦–å…ˆçœ‹çœ‹W3Cå¯¹BFCæ˜¯æ€ä¹ˆå®šä¹‰çš„ï¼š Floats, absolutely positioned elements, block containers (such as inline-blocks, table-cells, and table-captions) that are not block boxes, and block boxes with â€˜overflowâ€™ other than â€˜visibleâ€™ (except when that value has been propagated to the viewport) establish new block formatting contexts for their contents. In a block formatting context, boxes are laid out one after the other, vertically, beginning at the top of a containing block. The vertical distance between two sibling boxes is determined by the â€˜marginâ€™ properties. Vertical margins between adjacent block-level boxes in a block formatting context collapse. In a block formatting context, each boxâ€™s left outer edge touches the left edge of the containing block (for right-to-left formatting, right edges touch). This is true even in the presence of floats (although a boxâ€™s line boxes may shrink due to the floats), unless the box establishes a new block formatting context (in which case the box itself may become narrower due to the floats). ç¿»è¯‘è¿‡æ¥å°±æ˜¯ï¼š æµ®åŠ¨å…ƒç´ å’Œç»å¯¹å®šä½å…ƒç´ ï¼Œéå—çº§ç›’å­çš„å—çº§å®¹å™¨ï¼ˆä¾‹å¦‚ inline-blocks, table-cells, å’Œ table-captionsï¼‰ï¼Œä»¥åŠoverflowå€¼ä¸ä¸ºâ€œvisiableâ€çš„å—çº§ç›’å­ï¼Œéƒ½ä¼šä¸ºä»–ä»¬çš„å†…å®¹åˆ›å»ºæ–°çš„å—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ã€‚ åœ¨ä¸€ä¸ªå—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡é‡Œï¼Œç›’å­ä»åŒ…å«å—çš„é¡¶ç«¯å¼€å§‹å‚ç›´åœ°ä¸€ä¸ªæ¥ä¸€ä¸ªåœ°æ’åˆ—ï¼Œä¸¤ä¸ªç›’å­ä¹‹é—´çš„å‚ç›´çš„é—´éš™æ˜¯ç”±ä»–ä»¬çš„margin å€¼æ‰€å†³å®šçš„ã€‚ä¸¤ä¸ªç›¸é‚»çš„å—çº§ç›’å­çš„å‚ç›´å¤–è¾¹è·ä¼šå‘ç”Ÿå åŠ ã€‚ åœ¨å—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ä¸­ï¼Œæ¯ä¸€ä¸ªç›’å­çš„å·¦å¤–è¾¹ç¼˜ï¼ˆmargin-leftï¼‰ä¼šè§¦ç¢°åˆ°å®¹å™¨çš„å·¦è¾¹ç¼˜(border-left)ï¼ˆå¯¹äºä»å³åˆ°å·¦çš„æ ¼å¼æ¥è¯´ï¼Œåˆ™è§¦ç¢°åˆ°å³è¾¹ç¼˜ï¼‰ï¼Œå³ä½¿å­˜åœ¨æµ®åŠ¨ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œé™¤éè¿™ä¸ªç›’å­åˆ›å»ºä¸€ä¸ªæ–°çš„å—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ã€‚ BFCå°±æ˜¯â€œå—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡â€çš„æ„æ€ï¼Œåˆ›å»ºäº†BFCçš„å…ƒç´ å°±æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ç›’å­ï¼Œä¸è¿‡åªæœ‰Block-level boxå¯ä»¥å‚ä¸åˆ›å»ºBFCï¼Œå®ƒè§„å®šäº†å†…éƒ¨çš„Block-level Boxå¦‚ä½•å¸ƒå±€ï¼Œå¹¶ä¸”ä¸è¿™ä¸ªç‹¬ç«‹ç›’å­é‡Œçš„å¸ƒå±€ä¸å—å¤–éƒ¨å½±å“ï¼Œå½“ç„¶å®ƒä¹Ÿä¸ä¼šå½±å“åˆ°å¤–é¢çš„å…ƒç´ ã€‚ BFCçš„ç‰¹æ€§ å†…éƒ¨çš„Boxä¼šåœ¨å‚ç›´æ–¹å‘ï¼Œä»é¡¶éƒ¨å¼€å§‹ä¸€ä¸ªæ¥ä¸€ä¸ªåœ°æ”¾ç½®ã€‚ Boxå‚ç›´æ–¹å‘çš„è·ç¦»ç”±marginå†³å®šã€‚å±äºåŒä¸€ä¸ªBFCçš„ä¸¤ä¸ªç›¸é‚»Boxçš„marginä¼šå‘ç”Ÿå åŠ  æ¯ä¸ªå…ƒç´ çš„margin boxçš„å·¦è¾¹ï¼Œ ä¸åŒ…å«å—border boxçš„å·¦è¾¹ç›¸æ¥è§¦(å¯¹äºä»å·¦å¾€å³çš„æ ¼å¼åŒ–ï¼Œå¦åˆ™ç›¸å)ã€‚å³ä½¿å­˜åœ¨æµ®åŠ¨ä¹Ÿæ˜¯å¦‚æ­¤ã€‚ BFCçš„åŒºåŸŸä¸ä¼šä¸float boxå åŠ ã€‚ BFCå°±æ˜¯é¡µé¢ä¸Šçš„ä¸€ä¸ªéš”ç¦»çš„ç‹¬ç«‹å®¹å™¨ï¼Œå®¹å™¨é‡Œé¢çš„å­å…ƒç´ ä¸ä¼šå½±å“åˆ°å¤–é¢çš„å…ƒç´ ï¼Œåä¹‹äº¦ç„¶ã€‚ è®¡ç®—BFCçš„é«˜åº¦æ—¶ï¼Œæµ®åŠ¨å…ƒç´ ä¹Ÿå‚ä¸è®¡ç®—ã€‚ è§¦å‘BFCçš„å±æ€§ float é™¤äº†noneä»¥å¤–çš„å€¼ overflow é™¤äº†visible ä»¥å¤–çš„å€¼ï¼ˆhiddenï¼Œautoï¼Œscroll ï¼‰ display (table-cellï¼Œtable-captionï¼Œinline-block, flex, inline-flex) positionå€¼ä¸ºï¼ˆabsoluteï¼Œfixedï¼‰ æ¸…é™¤æµ®åŠ¨ åœ¨éIEæµè§ˆå™¨ï¼ˆå¦‚Firefoxï¼‰ä¸‹ï¼Œå½“å®¹å™¨çš„é«˜åº¦ä¸ºautoï¼Œä¸”å®¹å™¨çš„å†…å®¹ä¸­æœ‰æµ®åŠ¨ï¼ˆfloatä¸ºleftæˆ–rightï¼‰çš„å…ƒç´ ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®¹å™¨çš„é«˜åº¦ä¸èƒ½è‡ªåŠ¨ä¼¸é•¿ä»¥é€‚åº”å†…å®¹çš„é«˜åº¦ï¼Œä½¿å¾—å†…å®¹æº¢å‡ºåˆ°å®¹å™¨å¤–é¢è€Œå½±å“ï¼ˆç”šè‡³ç ´åï¼‰å¸ƒå±€çš„ç°è±¡ã€‚è¿™ä¸ªç°è±¡å«æµ®åŠ¨æº¢å‡ºï¼Œä¸ºäº†é˜²æ­¢è¿™ä¸ªç°è±¡çš„å‡ºç°è€Œè¿›è¡Œçš„CSSå¤„ç†ï¼Œå°±å«CSSæ¸…é™¤æµ®åŠ¨ã€‚ æ¸…é™¤æµ®åŠ¨çš„æœ¬è´¨å°±æ˜¯è®©å…ƒç´ æ ‡ç­¾é—­åˆï¼Œå³è§¦å‘å…¶BFC,æ‰€ä»¥ä»¥ä¸Šå¯ä»¥è§¦å‘BFCçš„å¯ä»¥æ¸…é™¤æµ®åŠ¨,æ­¤å¤–cssè¿˜æœ‰ä¸€ä¸ªclearå±æ€§ä¹Ÿå¯ä»¥æ¸…é™¤æµ®åŠ¨ æ–¹æ³• æ–¹æ³•ä¸€ï¼šä½¿ç”¨é¢å¤–æ ‡ç­¾æ³•ï¼Œå³ä½¿ç”¨å¸¦clearå±æ€§çš„ç©ºå…ƒç´  ä¼˜ç‚¹ï¼šç®€å•ï¼Œä»£ç å°‘ï¼Œæµè§ˆå™¨å…¼å®¹æ€§å¥½ã€‚ ç¼ºç‚¹ï¼šéœ€è¦æ·»åŠ å¤§é‡æ— è¯­ä¹‰çš„htmlå…ƒç´ ï¼Œä»£ç ä¸å¤Ÿä¼˜é›…ï¼ŒåæœŸä¸å®¹æ˜“ç»´æŠ¤ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091929394.box &#123; background-color: gray; border: solid 1px black; &#125;.box img &#123; float: left; &#125;.box p &#123; float: right; &#125;.clear &#123; clear: both; &#125;&lt;div class="box"&gt; &lt;img src="news-pic.jpg" /&gt; &lt;p&gt;some text&lt;/p&gt; &lt;div class="clear"&gt;&lt;/div&gt;&lt;/div&gt;``` æ–¹æ³•äºŒï¼šåˆ©ç”¨CSSçš„overflowå±æ€§ç»™æµ®åŠ¨å…ƒç´ çš„å®¹å™¨æ·»åŠ overflow:hidden;æˆ–overflow:auto;å¯ä»¥æ¸…é™¤æµ®åŠ¨ï¼Œå¦å¤–åœ¨ IE6 ä¸­è¿˜éœ€è¦è§¦å‘ hasLayout ï¼Œä¾‹å¦‚ä¸ºçˆ¶å…ƒç´ è®¾ç½®å®¹å™¨å®½é«˜æˆ–è®¾ç½® zoom:1ã€‚æ˜æ˜¾çš„ç¼ºç‚¹æ˜¯å½“å®¹å™¨å†…éƒ¨çš„å†…å®¹è¿‡å¤šæ—¶ä¼šè¢«éšè—``` html.box &#123; background-color: gray; border: solid 1px black; overflow: hidden; *zoom: 1; &#125;.box img &#123; float: left; &#125;.box p &#123; float: right; &#125;&lt;div class="box"&gt; &lt;img src="news-pic.jpg" /&gt; &lt;p&gt;some text&lt;/p&gt;&lt;/div&gt;``` æ–¹æ³•ä¸‰ï¼šç»™æµ®åŠ¨çš„å…ƒç´ çš„å®¹å™¨æ·»åŠ æµ®åŠ¨ç»™æµ®åŠ¨å…ƒç´ çš„å®¹å™¨ä¹Ÿæ·»åŠ ä¸Šæµ®åŠ¨å±æ€§å³å¯æ¸…é™¤å†…éƒ¨æµ®åŠ¨ï¼Œä½†æ˜¯è¿™æ ·ä¼šä½¿å…¶æ•´ä½“æµ®åŠ¨ï¼Œå½±å“å¸ƒå±€ï¼Œä¸æ¨èä½¿ç”¨ã€‚æ–¹æ³•å››ï¼šç»™çˆ¶å…ƒç´ å®šé«˜çˆ¶å®¹å™¨å› ä¸ºå­å…ƒç´ æµ®åŠ¨é€ æˆé«˜åº¦æ’‘ä¸å¼€ï¼Œå¯ä»¥ç»™çˆ¶å…ƒç´ å®šé«˜åº¦ï¼Œç¼ºç‚¹æ˜æ˜¾æ˜¯å½“çˆ¶å®¹å™¨é«˜åº¦å›ºå®šäº†ï¼Œä¸å¤Ÿçµæ´»ã€‚æ–¹æ³•äº”ï¼šä½¿ç”¨cssçš„:afterä¼ªå…ƒç´ ï¼ˆç°åœ¨é¡¹ç›®ä¸­æ¸…é™¤æµ®åŠ¨å°±æ˜¯é‡‡ç”¨è¿™ç§æ–¹æ³•ï¼Œå…¼å®¹æ€§è·Ÿå‹å¥½æ€§éƒ½æ¯”è¾ƒå¥½ï¼‰afterä¼ªå…ƒç´ å’Œzoomï¼š1ç»“åˆå¯ä»¥è§£å†³å½“å‰ç»å¤§å¤šæ•°æµè§ˆå™¨æµ®åŠ¨é—®é¢˜ï¼Œzoom:1å¯ä»¥è§¦å‘IEçš„hasLayoutï¼Œå…·ä½“å®ç°ä»£ç å¦‚ä¸‹ï¼š``` html.box &#123; background-color: gray; border: solid 1px black; overflow: hidden; *zoom: 1; &#125;.box img &#123; float: left; &#125;.box p &#123; float: right; &#125;.clearfix:after&#123; content: "."; display: block; height: 0; clear: both; visibility: hidden; &#125;.clearfix &#123; /* è§¦å‘ hasLayout */ zoom: 1; &#125;&lt;div class="box clearfix"&gt; &lt;img src="news-pic.jpg" /&gt; &lt;p&gt;some text&lt;/p&gt;&lt;/div&gt; æ€»ç»“ é€šè¿‡ä¸Šé¢çš„ä¾‹å­ï¼Œæ¸…é™¤æµ®åŠ¨çš„æ–¹æ³•å¯ä»¥åˆ†æˆä¸¤ç±»ï¼š ä¸€æ˜¯åˆ©ç”¨ clear å±æ€§ï¼ŒåŒ…æ‹¬åœ¨æµ®åŠ¨å…ƒç´ æœ«å°¾æ·»åŠ ä¸€ä¸ªå¸¦æœ‰ clear: both å±æ€§çš„ç©º div æ¥é—­åˆå…ƒç´ ï¼Œå…¶å®åˆ©ç”¨ :after ä¼ªå…ƒç´ çš„æ–¹æ³•ä¹Ÿæ˜¯åœ¨å…ƒç´ æœ«å°¾æ·»åŠ ä¸€ä¸ªå†…å®¹ä¸ºä¸€ä¸ªç‚¹å¹¶å¸¦æœ‰ clear: both å±æ€§çš„å…ƒç´ å®ç°çš„ã€‚ äºŒæ˜¯è§¦å‘æµ®åŠ¨å…ƒç´ çˆ¶å…ƒç´ çš„ BFC (Block Formatting Contexts, å—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡)ï¼Œä½¿åˆ°è¯¥çˆ¶å…ƒç´ å¯ä»¥åŒ…å«æµ®åŠ¨å…ƒç´ ã€‚]]></content>
      <categories>
        <category>å‰ç«¯å¼€å‘</category>
      </categories>
      <tags>
        <tag>CSS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æˆ‘çš„ç¬¬ä¸€ä¸ªä¸ªäººåšå®¢]]></title>
    <url>%2F2017%2F02%2F15%2Fhello-world%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘ä¸€ç›´æœ‰ä¸ªæƒ³æä¸ªä¸ªäººåšå®¢ç©ç©çš„æƒ³æ³•ï¼Œä»Šå¤©åœ¨ç½‘ä¸Šçœ‹åˆ°ä¸€ä¸ªé™æ€åšå®¢æ¡†æ¶Hexoï¼Œäºæ˜¯çœ‹æ•™ç¨‹å­¦ç€æ­å»ºäº†ä¸€ä¸ªï¼Œç°åœ¨çœ‹èµ·æ¥å¾ˆæˆåŠŸï¼Œå“ˆå“ˆï¼å¼€å¯æˆ‘çš„åšå®¢ä¹‹æ—…å§ï¼ å®‰è£…å‰ç³»ç»Ÿæ‰€éœ€è¦çš„å·¥å…· 1ã€Git Gitæ˜¯ä¸€ä¸ªå¼€æºçš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œå¯ä»¥æœ‰æ•ˆã€é«˜é€Ÿçš„å¤„ç†ä»å¾ˆå°åˆ°éå¸¸å¤§çš„é¡¹ç›®ç‰ˆæœ¬ç®¡ç†ã€‚Hexoå°±æ˜¯å°†ä½ çš„åšå®¢é¡¹ç›®ä¸Šä¼ æ‰˜ç®¡åˆ°git,é€šè¿‡githubæ¥è®¿é—®ä½ çš„ä¸ªäººåšå®¢äº†ã€‚ 2ã€Node å› ä¸ºHexoæ˜¯ä¸€æ¬¾åŸºäºNode.jsçš„é™æ€åšå®¢æ¡†æ¶ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜éœ€è¦å®‰è£…å¥½å®ƒã€‚ 3ã€Hexo å®‰è£…å¥½Gitå’ŒNode.jsä¹‹åï¼Œè½®åˆ°æˆ‘ä»¬ä»Šå¤©çš„ä¸»è§’ç™»åœºäº†~å…ˆæ‰“å¼€Git Bashï¼Œç„¶åè¾“å…¥ä¸‹é¢è¿™æ¡å‘½ä»¤æ¥å®‰è£…Hexoï¼š $ npm install hexo-cli -g å®‰è£…å®Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯ï¼š $ hexo -v å¦‚æœå‡ºç°ç±»ä¼¼ä»¥ä¸‹å†…å®¹çš„åˆ™å®‰è£…æˆåŠŸ hexo: 3.2.2 hexo-cli: 1.0.2 os: Darwin 16.1.0 darwin x64 http_parser: 2.7.0 node: 6.9.1 v8: 5.1.281.84 uv: 1.9.1 zlib: 1.2.8 ares: 1.10.1-DEV icu: 57.1 modules: 48 openssl: 1.0.2j æ¥ä¸‹æ¥å°±å¯ä»¥ç”¨Hexoæ„‰å¿«çš„zhuangbilityäº†ï¼ï¼ï¼ åˆ›å»ºå±äºè‡ªå·±çš„åšå®¢ åˆå§‹åŒ–hexoåˆ›å»ºåšå®¢æ¨¡æ¿ åœ¨æœ¬åœ°åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œæ¯”å¦‚blog,è¿›å…¥æ–‡ä»¶å¤¹æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š $ hexo init æ‰§è¡Œå®Œæˆä¹‹åå¯ä»¥åœ¨blogæ–‡ä»¶ä¸‹çœ‹åˆ°åšå®¢ç›¸å…³çš„é…ç½®æ–‡ä»¶~~~ é…ç½®github å»ºç«‹Repositoryï¼Œå»ºç«‹ä¸ä½ ç”¨æˆ·åå¯¹åº”çš„ä»“åº“ï¼Œä»“åº“åå¿…é¡»ä¸ºã€your_user_name.github.ioã€‘ï¼Œç„¶åä¸æœ¬åœ°blogå»ºç«‹å…³è”ï¼Œ å…³è”ä¹‹å‰é¦–å…ˆé…ç½®ä¸€ä¸‹blogæ ¹ç›®å½•ä¸‹çš„_config.ymlæ–‡ä»¶ï¼š deploy: type: git repo: ä½ åˆ›å»ºçš„åšå®¢æ‰€åœ¨çš„ä»“åº“githubè·¯å¾„ branch: master ç„¶åæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼šå…¶ä¸­hexo gæ˜¯ç”Ÿæˆé™æ€é¡µé¢è‡³publicç›®å½•ï¼Œhexo deploy #å°†.deployç›®å½•éƒ¨ç½²åˆ°GitHub $ npm install hexo-deployer-git --save $ hexo g $ hexo d ä¸€äº›å¸¸ç”¨çš„å‘½ä»¤ï¼š hexo new &quot;postName&quot; #æ–°å»ºæ–‡ç«  hexo new page &quot;pageName&quot; #æ–°å»ºé¡µé¢ hexo generate #ç”Ÿæˆé™æ€é¡µé¢è‡³publicç›®å½• hexo server #å¼€å¯é¢„è§ˆè®¿é—®ç«¯å£ï¼ˆé»˜è®¤ç«¯å£4000ï¼Œ'ctrl + c'å…³é—­serverï¼‰ hexo deploy #å°†.deployç›®å½•éƒ¨ç½²åˆ°GitHub hexo help # æŸ¥çœ‹å¸®åŠ© hexo version #æŸ¥çœ‹Hexoçš„ç‰ˆæœ¬ è‡³æ­¤ï¼Œä½ å¯ä»¥æ‰“å¼€ä½ çš„ä¸ªäººåšå®¢è·¯å¾„username.github.ioï¼Œå°±å¯ä»¥çœ‹åˆ°ä½ çš„åšå®¢äº†ã€‚ æ›´åŠ è¯¦ç»†çš„æ•™ç¨‹å‰å¾€hexoçš„ä¸­æ–‡å®˜ç½‘æŸ¥çœ‹]]></content>
      <categories>
        <category>Other</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
</search>
